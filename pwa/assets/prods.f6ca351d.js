import{c as I,j as m,h as v,W,C as ae,Q as H,r as P,av as oe,am as ie,k as E,ap as se,ae as k,D as le,aq as ue,ar as N,as as $,at as K,a4 as D,au as B,w as ce,a_ as de,y as x,K as pe,a$ as Y,i as ve,v as Q,b0 as X,x as fe,O as me,ak as he,d as ge}from"./index.92c4a599.js";import{c as ye,d as be,e as Se}from"./use-checkbox.7d3c4e08.js";import{u as Ce,a as _e}from"./use-dark.0042ceae.js";import{g as O,s as V}from"./touch.9135741d.js";import{c as qe}from"./selection.9001b9ec.js";import{$axios as M}from"./axios.057661fc.js";import{u as Pe}from"./auth.94608f39.js";var Ke=I({name:"QToggle",props:{...ye,icon:String,iconColor:String},emits:be,setup(e){function n(i,u){const r=m(()=>(i.value===!0?e.checkedIcon:u.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),t=m(()=>i.value===!0?e.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},r.value!==void 0?[v(W,{name:r.value,color:t.value})]:void 0)]}return Se("toggle",n)}});function G(){let e=Object.create(null);return{getCache:(n,i)=>e[n]===void 0?e[n]=typeof i=="function"?i():i:e[n],setCache(n,i){e[n]=i},hasCache(n){return Object.hasOwnProperty.call(e,n)},clearCache(n){n!==void 0?delete e[n]:e=Object.create(null)}}}var xe=I({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:n,emit:i}){let u=!1,r,t,a=null,s=null,h,b;function p(){r&&r(),r=null,u=!1,a!==null&&(clearTimeout(a),a=null),s!==null&&(clearTimeout(s),s=null),t!==void 0&&t.removeEventListener("transitionend",h),h=null}function g(l,o,d){o!==void 0&&(l.style.height=`${o}px`),l.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,u=!0,r=d}function f(l,o){l.style.overflowY=null,l.style.height=null,l.style.transition=null,p(),o!==b&&i(o)}function C(l,o){let d=0;t=l,u===!0?(p(),d=l.offsetHeight===l.scrollHeight?0:void 0):(b="hide",l.style.overflowY="hidden"),g(l,d,o),a=setTimeout(()=>{a=null,l.style.height=`${l.scrollHeight}px`,h=S=>{s=null,(Object(S)!==S||S.target===l)&&f(l,"show")},l.addEventListener("transitionend",h),s=setTimeout(h,e.duration*1.1)},100)}function _(l,o){let d;t=l,u===!0?p():(b="show",l.style.overflowY="hidden",d=l.scrollHeight),g(l,d,o),a=setTimeout(()=>{a=null,l.style.height=0,h=S=>{s=null,(Object(S)!==S||S.target===l)&&f(l,"hide")},l.addEventListener("transitionend",h),s=setTimeout(h,e.duration*1.1)},100)}return ae(()=>{u===!0&&p()}),()=>v(H,{css:!1,appear:e.appear,onEnter:C,onLeave:_},n.default)}}),J=I({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:n}){const{proxy:{$q:i}}=E(),u=P(null),r=m(()=>e.stepper.modelValue===e.step.name),t=m(()=>{const o=e.step.disable;return o===!0||o===""}),a=m(()=>{const o=e.step.error;return o===!0||o===""}),s=m(()=>{const o=e.step.done;return t.value===!1&&(o===!0||o==="")}),h=m(()=>{const o=e.step.headerNav,d=o===!0||o===""||o===void 0;return t.value===!1&&e.stepper.headerNav&&d}),b=m(()=>e.step.prefix&&(r.value===!1||e.stepper.activeIcon==="none")&&(a.value===!1||e.stepper.errorIcon==="none")&&(s.value===!1||e.stepper.doneIcon==="none")),p=m(()=>{const o=e.step.icon||e.stepper.inactiveIcon;if(r.value===!0){const d=e.step.activeIcon||e.stepper.activeIcon;return d==="none"?o:d||i.iconSet.stepper.active}if(a.value===!0){const d=e.step.errorIcon||e.stepper.errorIcon;return d==="none"?o:d||i.iconSet.stepper.error}if(t.value===!1&&s.value===!0){const d=e.step.doneIcon||e.stepper.doneIcon;return d==="none"?o:d||i.iconSet.stepper.done}return o}),g=m(()=>{const o=a.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(r.value===!0){const d=e.step.activeColor||e.stepper.activeColor||e.step.color;return d!==void 0?d:o}return o!==void 0?o:t.value===!1&&s.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),f=m(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(g.value!==void 0?` text-${g.value}`:"")+(a.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(b.value===!0?"prefix":"icon"):"")+(r.value===!0?" q-stepper__tab--active":"")+(s.value===!0?" q-stepper__tab--done":"")+(h.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),C=m(()=>e.stepper.headerNav!==!0?!1:h.value);function _(){u.value!==null&&u.value.focus(),r.value===!1&&e.goToPanel(e.step.name)}function l(o){o.keyCode===13&&r.value===!1&&e.goToPanel(e.step.name)}return()=>{const o={class:f.value};h.value===!0&&(o.onClick=_,o.onKeyup=l,Object.assign(o,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:n.tabindex||0}));const d=[v("div",{class:"q-focus-helper",tabindex:-1,ref:u}),v("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[v("span",{class:"row flex-center"},[b.value===!0?e.step.prefix:v(W,{name:p.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const S=[v("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&S.push(v("div",{class:"q-stepper__caption"},e.step.caption)),d.push(v("div",{class:"q-stepper__label q-stepper__line relative-position"},S))}return oe(v("div",o,d),[[ie,C.value]])}}});function Ie(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((i,u)=>{const r=parseFloat(i);r&&(n[u]=r)}),n}var we=se({name:"touch-swipe",beforeMount(e,{value:n,arg:i,modifiers:u}){if(u.mouse!==!0&&k.has.touch!==!0)return;const r=u.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:Ie(i),direction:O(u),noop:le,mouseStart(a){V(a,t)&&ue(a)&&(N(t,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(a,!0))},touchStart(a){if(V(a,t)){const s=a.target;N(t,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),t.start(a)}},start(a,s){k.is.firefox===!0&&$(e,!0);const h=K(a);t.event={x:h.left,y:h.top,time:Date.now(),mouse:s===!0,dir:!1}},move(a){if(t.event===void 0)return;if(t.event.dir!==!1){D(a);return}const s=Date.now()-t.event.time;if(s===0)return;const h=K(a),b=h.left-t.event.x,p=Math.abs(b),g=h.top-t.event.y,f=Math.abs(g);if(t.event.mouse!==!0){if(p<t.sensitivity[1]&&f<t.sensitivity[1]){t.end(a);return}}else if(window.getSelection().toString()!==""){t.end(a);return}else if(p<t.sensitivity[2]&&f<t.sensitivity[2])return;const C=p/s,_=f/s;t.direction.vertical===!0&&p<f&&p<100&&_>t.sensitivity[0]&&(t.event.dir=g<0?"up":"down"),t.direction.horizontal===!0&&p>f&&f<100&&C>t.sensitivity[0]&&(t.event.dir=b<0?"left":"right"),t.direction.up===!0&&p<f&&g<0&&p<100&&_>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&p<f&&g>0&&p<100&&_>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&p>f&&b<0&&f<100&&C>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&p>f&&b>0&&f<100&&C>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(D(a),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),qe(),t.styleCleanup=l=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const o=()=>{document.body.classList.remove("no-pointer-events--children")};l===!0?setTimeout(o,50):o()}),t.handler({evt:a,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:s,distance:{x:p,y:f}})):t.end(a)},end(a){t.event!==void 0&&(B(t,"temp"),k.is.firefox===!0&&$(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),a!==void 0&&t.event.dir!==!1&&D(a),t.event=void 0)}};if(e.__qtouchswipe=t,u.mouse===!0){const a=u.mouseCapture===!0||u.mousecapture===!0?"Capture":"";N(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}k.has.touch===!0&&N(t,"main",[[e,"touchstart","touchStart",`passive${u.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const i=e.__qtouchswipe;i!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&i.end(),i.handler=n.value),i.direction=O(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(B(n,"main"),B(n,"temp"),k.is.firefox===!0&&$(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchswipe)}});const ke={name:{required:!0},disable:Boolean},z={setup(e,{slots:n}){return()=>v("div",{class:"q-panel scroll",role:"tabpanel"},x(n.default))}},Te={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Ae=["update:modelValue","beforeTransition","transition"];function Ne(){const{props:e,emit:n,proxy:i}=E(),{getCache:u}=G();let r,t;const a=P(null),s=P(null);function h(c){const y=e.vertical===!0?"up":"left";w((i.$q.lang.rtl===!0?-1:1)*(c.direction===y?1:-1))}const b=m(()=>[[we,h,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),p=m(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),g=m(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),f=m(()=>`--q-transition-duration: ${e.transitionDuration}ms`),C=m(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),_=m(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),l=m(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);ce(()=>e.modelValue,(c,y)=>{const q=T(c)===!0?L(c):-1;t!==!0&&j(q===-1?0:q<L(y)?-1:1),a.value!==q&&(a.value=q,n("beforeTransition",c,y),pe(()=>{n("transition",c,y)}))});function o(){w(1)}function d(){w(-1)}function S(c){n("update:modelValue",c)}function T(c){return c!=null&&c!==""}function L(c){return r.findIndex(y=>y.props.name===c&&y.props.disable!==""&&y.props.disable!==!0)}function ee(){return r.filter(c=>c.props.disable!==""&&c.props.disable!==!0)}function j(c){const y=c!==0&&e.animated===!0&&a.value!==-1?"q-transition--"+(c===-1?p.value:g.value):null;s.value!==y&&(s.value=y)}function w(c,y=a.value){let q=y+c;for(;q!==-1&&q<r.length;){const A=r[q];if(A!==void 0&&A.props.disable!==""&&A.props.disable!==!0){j(c),t=!0,n("update:modelValue",A.props.name),setTimeout(()=>{t=!1});return}q+=c}e.infinite===!0&&r.length!==0&&y!==-1&&y!==r.length&&w(c,c===-1?r.length:-1)}function R(){const c=L(e.modelValue);return a.value!==c&&(a.value=c),!0}function U(){const c=T(e.modelValue)===!0&&R()&&r[a.value];return e.keepAlive===!0?[v(Y,_.value,[v(l.value===!0?u(C.value,()=>({...z,name:C.value})):z,{key:C.value,style:f.value},()=>c)])]:[v("div",{class:"q-panel scroll",style:f.value,key:C.value,role:"tabpanel"},[c])]}function te(){if(r.length!==0)return e.animated===!0?[v(H,{name:s.value},U)]:U()}function ne(c){return r=de(x(c.default,[])).filter(y=>y.props!==null&&y.props.slot===void 0&&T(y.props.name)===!0),r.length}function re(){return r}return Object.assign(i,{next:o,previous:d,goTo:S}),{panelIndex:a,panelDirectives:b,updatePanelsList:ne,updatePanelIndex:R,getPanelContent:te,getEnabledPanels:ee,getPanels:re,isValidPanelName:T,keepAliveProps:_,needsUniqueKeepAliveWrapper:l,goToPanelByOffset:w,goToPanel:S,nextPanel:o,previousPanel:d}}function Z(e){return v("div",{class:"q-stepper__step-content"},[v("div",{class:"q-stepper__step-inner"},x(e.default))])}const F={setup(e,{slots:n}){return()=>Z(n)}};var Oe=I({name:"QStep",props:{...ke,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:n,emit:i}){const{proxy:{$q:u}}=E(),r=ve(X,Q);if(r===Q)return console.error("QStep needs to be a child of QStepper"),Q;const{getCache:t}=G(),a=P(null),s=m(()=>r.value.modelValue===e.name),h=m(()=>u.platform.is.ios!==!0&&u.platform.is.chrome===!0||s.value!==!0||r.value.vertical!==!0?{}:{onScroll(g){const{target:f}=g;f.scrollTop>0&&(f.scrollTop=0),e.onScroll!==void 0&&i("scroll",g)}}),b=m(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function p(){const g=r.value.vertical;return g===!0&&r.value.keepAlive===!0?v(Y,r.value.keepAliveProps.value,s.value===!0?[v(r.value.needsUniqueKeepAliveWrapper.value===!0?t(b.value,()=>({...F,name:b.value})):F,{key:b.value},n.default)]:void 0):g!==!0||s.value===!0?Z(n):void 0}return()=>v("div",{ref:a,class:"q-stepper__step",role:"tabpanel",...h.value},r.value.vertical===!0?[v(J,{stepper:r.value,step:e,goToPanel:r.value.goToPanel}),r.value.animated===!0?v(xe,p):p()]:[p()])}}),Ve=I({name:"QStepperNavigation",setup(e,{slots:n}){return()=>v("div",{class:"q-stepper__nav"},x(n.default))}});const Ee=/(-\w)/g;function Le(e){const n={};for(const i in e){const u=i.replace(Ee,r=>r[1].toUpperCase());n[u]=e[i]}return n}var Me=I({name:"QStepper",props:{...Ce,...Te,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:Ae,setup(e,{slots:n}){const i=E(),u=_e(e,i.proxy.$q),{updatePanelsList:r,isValidPanelName:t,updatePanelIndex:a,getPanelContent:s,getPanels:h,panelDirectives:b,goToPanel:p,keepAliveProps:g,needsUniqueKeepAliveWrapper:f}=Ne();fe(X,m(()=>({goToPanel:p,keepAliveProps:g,needsUniqueKeepAliveWrapper:f,...e})));const C=m(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(u.value===!0?" q-stepper--dark q-dark":"")),_=m(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function l(){const o=x(n.message,[]);if(e.vertical===!0){t(e.modelValue)&&a();const d=v("div",{class:"q-stepper__content"},x(n.default));return o===void 0?[d]:o.concat(d)}return[v("div",{class:_.value},h().map(d=>{const S=Le(d.props);return v(J,{key:S.name,stepper:e,step:S,goToPanel:p})})),o,he("div",{class:"q-stepper__content q-panel-parent"},s(),"cont",e.swipeable,()=>b.value)]}return()=>(r(n),v("div",{class:C.value},me(n.navigation,l())))}});const ze=ge({id:"prod",state:()=>({step:1,stepperRef:P(null),companyName:"",prodInfo:{prodName:"tomatoe",batchCode:"12345ABCD",perish:!1,perDate:{from:"2022/01/01",to:"2023/01/05"},prodLogo:P(null),qrType:"",upReason:"",imgFmt:["svg","png","jpg"],reason:["Update the product message","Callback a batch"],message:"",quantity:""},payInfo:{fullname:localStorage.getItem("first_name")+" "+localStorage.getItem("last_name"),email:localStorage.getItem("email"),phoneNumber:""},total:0}),getters:{totals(){const e=parseInt(this.$state.prodInfo.quantity,10);let n=0;return e>1e5||e<200?"out of bounds":(e<=1e5?n=.01:e>=5e4?n=.02:e>=1e4?n=.04:e>=5e3?n=.06:e>=1e3?n=.08:e>=500?n=.1:e>=200?n=.15:e<=200&&(n=.2),e*n)},prodLogoUrl(){return this.prodInfo.prodLogo?URL.createObjectURL(this.prodInfo.prodLogo):null}},actions:{setCompanyName(e){this.companyName=e},setStep(e){this.step=e},setProdInfo(e){this.prodInfo={...this.prodInfo,...e}},setPayInfo(e){this.payInfo={...this.payInfo,...e}},setTotals(e){this.prodInfo.quantity=e,this.total=this.totals},resetState(){this.step=1,this.prodInfo={prodName:"",batchCode:"",perish:!1,perDate:{manufactured:"2020-07-08",expiry:"2020-07-17"},prodLogo:null,qrType:"",imgFmt:["svg","png","jpg"],quantity:""},this.payInfo={fullname:"",cardNumber:"",cardType:"",monthExp:null,yearExp:"",cvv:"",phoneNumber:"",provider:""},this.total=0},handlePaystackSuccess(){window.opener.postMessage({status:"success"},"*"),window.close()},getToken(){return localStorage.getItem("user.access")},async handlePayment(){this.isLoading=!0,this.paymentError=null,this.paymentSuccess=!1;const n=Pe().getAccessToken;try{const i={};n&&(i.Authorization=`Bearer ${n}`);const u=await M.post("payment/initiate-payment/",{email:this.payInfo.email,quantity:this.prodInfo.quantity,product_name:this.prodInfo.prodName,batch_number:this.prodInfo.batchCode},{headers:i});if(u.status===200){const r=u.data.payment_url,t=window.open(r,"_parent","width=600,height=400,resizable=yes,scrollbars=yes"),a=s=>{s.origin===r&&(s.data.status==="success"?(this.paymentSuccess=!0,this.ProdPost(),this.stepperRef.value.next(),t.close()):(this.paymentError=s.data.message||"Payment failed.",t.close()),window.removeEventListener("message",a))};t.addEventListener("message",a)}else this.paymentError=u.data.error||"An error occurred. Please try again later."}catch(i){console.error("Payment request failed:",i),this.paymentError="An error occurred. Please try again later."}finally{this.isLoading=!1}},ProdPost(){return 1*2},async updatecodes(){try{(await M.patch("qrcodes/Updates/",{product_name:this.prodInfo.prodName,batch:this.prodInfo.batchCode,reason:this.prodInfo.reason,message:this.prodInfo.message})).status==204}catch{}}}});export{Ve as Q,ze as a,Oe as b,Ke as c,Me as d,G as u};
