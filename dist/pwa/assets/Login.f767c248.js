import{r as g,M as $,j as S,p as V,q as C,t as r,U as o,m as e,V as a,W as c,X as P,Y as p,Z as f,R as k,S as I}from"./index.92c4a599.js";import{Q as y}from"./QInput.ebfbe653.js";import{Q as A}from"./QSeparator.51100cea.js";import{Q as w}from"./QList.5d5a3bde.js";import{Q as L}from"./QForm.f3c2714e.js";import{Q as B}from"./QCard.33255d16.js";import{Q as M}from"./QPage.806bf0ae.js";import{u as U}from"./auth.94608f39.js";import{u as j}from"./use-quasar.1e418217.js";import{u as K,r as h,e as R}from"./index.f23859cc.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.04474257.js";import"./use-dark.0042ceae.js";import"./private.use-form.93118294.js";import"./axios.057661fc.js";var F="https://github.com/PAQS-Org/PAQS-Company/assets/usershield.31779050.svg";const v=m=>(k("data-v-2c8b01b8"),m=m(),I(),m),N={class:"q-pa-md row items-start q-gutter-md",style:{"max-width":"400px"}},O=v(()=>o("div",{class:"flex justify-center items-center bg-white"},[o("img",{class:"my-card",src:F})],-1)),z={align:"center",class:"q-mx-sm row q-my-lg"},D=v(()=>o("span",null,"Forgot password?",-1)),W=[D],X=v(()=>o("div",null,[o("p",null,"or sign up")],-1)),Y=Object.assign({name:"loginComp"},{__name:"Login",setup(m){const t=U(),d=j(),b=g(null),i=$({email:S(()=>t.email),password:""}),n=g(!1),s=K({user:{email:{required:h,email:R},password:{required:h}}},{user:i}),_=async()=>{if(s.value.$touch(),s.value.$invalid){d.notify({type:"warning",message:"Validation error. Please check your inputs."});return}t.isLoading||await t.logins(i)},Q=async()=>{if(i.password="",s.value.user.password.$reset(),s.value.user.email.$touch(),s.value.user.email.$invalid){d.notify({color:"red-5",textColor:"white",icon:"warning",message:"Please provide a valid email address"});return}try{await t.resetPassword({email:i.email,redirect_url:"http://localhost:9000/#/auth/forgot"}),d.notify({type:"positive",message:"Password reset email sent successfully!"})}catch{d.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error submitting form"})}},x=()=>{s.value.$reset(),i.email="",i.password="",n.value=!1};return(q,l)=>(V(),C(M,{class:"flex flex-center"},{default:r(()=>[o("div",N,[e(B,{class:"shadow-16 bg-gray-200"},{default:r(()=>[O,e(w,{class:""},{default:r(()=>[e(L,{ref_key:"form",ref:b},{default:r(()=>[e(y,{modelValue:a(t).email,"onUpdate:modelValue":l[0]||(l[0]=u=>a(t).email=u),modelModifiers:{trim:!0},class:"q-mx-lg",type:"email",label:"Email","lazy-rules":"",error:a(s).user.email.$error,"error-message":"A valid email is required"},{prepend:r(()=>[e(c,{name:"email"})]),_:1},8,["modelValue","error"]),e(y,{modelValue:a(s).user.password.$model,"onUpdate:modelValue":l[2]||(l[2]=u=>a(s).user.password.$model=u),modelModifiers:{trim:!0},class:"q-mx-lg",label:"Password",error:a(s).user.password.$error,"error-message":"Password is required",type:n.value?"text":"password",onKeydown:P(p(_,["prevent"]),["enter"])},{prepend:r(()=>[e(c,{name:"password"})]),append:r(()=>[e(c,{name:n.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:l[1]||(l[1]=u=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","error","type","onKeydown"]),o("div",z,[e(f,{class:"col",label:"Submit",onClick:p(_,["prevent"]),color:"primary",disable:!a(s).$anyDirty||a(s).$invalid},null,8,["disable"]),o("div",{onClick:p(Q,["prevent"]),class:"col q-ml-sm cursor-pointer"},W),e(f,{label:"Reset",type:"reset",color:"primary",flat:"",class:"col",onClick:p(x,["prevent"])})]),e(A),e(w,{align:"center",class:"q-mt-lg q-mb-lg"},{default:r(()=>[X,e(f,{class:"q-ma-sm",to:"/auth/register",color:"primary",label:"Sign Up"})]),_:1})]),_:1},512)]),_:1})]),_:1})])]),_:1}))}});var ue=E(Y,[["__scopeId","data-v-2c8b01b8"]]);export{ue as default};
