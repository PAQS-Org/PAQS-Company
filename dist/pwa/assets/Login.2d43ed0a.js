import{r as g,M as $,j as V,p as C,q as S,t as r,U as o,m as e,V as a,W as c,X as k,Y as p,Z as f,R as P,S as I}from"./index.e45af843.js";import{Q as y}from"./QInput.a3e34157.js";import{Q as L}from"./QSeparator.df6fcc73.js";import{Q as w}from"./QList.285b7044.js";import{Q as B}from"./QForm.dac69eb6.js";import{Q as M}from"./QCard.3d5d3f78.js";import{Q as U}from"./QPage.9a6954e5.js";import{u as j}from"./auth.7bac95e8.js";import{u as A}from"./use-quasar.78a54e71.js";import{u as K,r as h,e as R}from"./index.9eb55c43.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.2853d462.js";import"./use-dark.a5e256ad.js";import"./private.use-form.95f9ce78.js";import"./axios.f68c117c.js";var F="/assets/usershield.cd46408f.svg";const v=m=>(P("data-v-31a26723"),m=m(),I(),m),N={class:"q-pa-md row items-start q-gutter-md",style:{"max-width":"400px"}},z=v(()=>o("div",{class:"flex justify-center items-center bg-white"},[o("img",{class:"my-card",src:F})],-1)),D={align:"center",class:"q-mx-sm row q-my-lg"},O=v(()=>o("span",null,"Forgot password?",-1)),W=[O],X=v(()=>o("div",null,[o("p",null,"or sign up")],-1)),Y=Object.assign({name:"loginComp"},{__name:"Login",setup(m){const t=j(),d=A(),b=g(null),l=$({email:V(()=>t.email),password:""}),n=g(!1),s=K({user:{email:{required:h,email:R},password:{required:h}}},{user:l}),_=async()=>{if(s.value.$touch(),s.value.$invalid){d.notify({type:"warning",message:"Validation error. Please check your inputs."});return}t.isLoading||await t.logins(l)},x=async()=>{if(l.password="",s.value.user.password.$reset(),s.value.user.email.$touch(),s.value.user.email.$invalid){d.notify({color:"red-5",textColor:"white",icon:"warning",message:"Please provide a valid email address"});return}try{await t.resetPassword({email:l.email,redirect_url:"http://localhost:9000/#/auth/forgot"}),d.notify({type:"positive",message:"Password reset email sent successfully!"})}catch{d.notify({color:"red-5",textColor:"white",icon:"warning",message:"Error submitting form"})}},q=()=>{s.value.$reset(),l.email="",l.password="",n.value=!1};return(Q,i)=>(C(),S(U,{class:"flex flex-center"},{default:r(()=>[o("div",N,[e(M,{class:"shadow-16 bg-gray-200"},{default:r(()=>[z,e(w,{class:""},{default:r(()=>[e(B,{ref_key:"form",ref:b},{default:r(()=>[e(y,{modelValue:a(t).email,"onUpdate:modelValue":i[0]||(i[0]=u=>a(t).email=u),modelModifiers:{trim:!0},class:"q-mx-lg",type:"email",label:"Email","lazy-rules":"",error:a(s).user.email.$error,"error-message":"A valid email is required"},{prepend:r(()=>[e(c,{name:"email"})]),_:1},8,["modelValue","error"]),e(y,{modelValue:a(s).user.password.$model,"onUpdate:modelValue":i[2]||(i[2]=u=>a(s).user.password.$model=u),modelModifiers:{trim:!0},class:"q-mx-lg",label:"Password",error:a(s).user.password.$error,"error-message":"Password is required",type:n.value?"text":"password",onKeydown:k(p(_,["prevent"]),["enter"])},{prepend:r(()=>[e(c,{name:"password"})]),append:r(()=>[e(c,{name:n.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:i[1]||(i[1]=u=>n.value=!n.value)},null,8,["name"])]),_:1},8,["modelValue","error","type","onKeydown"]),o("div",D,[e(f,{class:"col",label:"Submit",onClick:p(_,["prevent"]),color:"primary",disable:!a(s).$anyDirty||a(s).$invalid},null,8,["disable"]),o("div",{onClick:p(x,["prevent"]),class:"col q-ml-sm cursor-pointer"},W),e(f,{label:"Reset",type:"reset",color:"primary",flat:"",class:"col",onClick:p(q,["prevent"])})]),e(L),e(w,{align:"center",class:"q-mt-lg q-mb-lg"},{default:r(()=>[X,e(f,{class:"q-ma-sm",to:"/auth/register",color:"primary",label:"Sign Up"})]),_:1})]),_:1},512)]),_:1})]),_:1})])]),_:1}))}});var ue=E(Y,[["__scopeId","data-v-31a26723"]]);export{ue as default};
