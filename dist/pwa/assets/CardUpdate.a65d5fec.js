import{e as V,r as n,p as I,af as C,U as t,aA as w,m as l,t as s,Z as b,Y as k,q as N,ah as Q,W as r,an as m,R,S}from"./index.e45af843.js";import{Q as _}from"./QInput.a3e34157.js";import{Q as P,n as f}from"./use-checkbox.ff5fecab.js";import{a as U,Q as q,b as y,c as B,d as $}from"./prods.2fd4f4c9.js";import{Q as z}from"./QForm.dac69eb6.js";import{u as E}from"./use-quasar.78a54e71.js";import{_ as M}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-key-composition.2853d462.js";import"./use-dark.a5e256ad.js";import"./private.use-form.95f9ce78.js";import"./QChip.4952feff.js";import"./selection.12f9b3d4.js";import"./use-prevent-scroll.a0aef94f.js";import"./QDialog.fb935a27.js";import"./format.de7e9769.js";import"./touch.9135741d.js";import"./axios.f68c117c.js";import"./auth.7bac95e8.js";const T=V({props:{color:{default:"light",validator(e){return["light","dark"].indexOf(e)!==-1}}},setup(){const e=E(),a=U(),i=n(!1),d=n(1),p=n(null),u=n(null),o=n(null),h=n(null),g=n(null);return{q:e,step:d,prodName:u,batchCode:o,upReason:h,message:g,accept:i,prods:a,onRejected:c=>{this.q.notify({type:"negative",message:`${c.length} file(s) did not pass validation constraints`})},handleNavigation:async()=>{let c=!0;if(d.value===1&&(c=u.value&&u.value.validate()&&o.value&&o.value.validate()&&h.value&&h.value.validate()&&g.value&&g.value.validate),c){if(d.value===2&&!i.value){e.notify({type:"negative",message:"You have not accepted the process."});return}if(d.value===2&&i.value)try{await a.updatecodes()}catch(x){console.error("Process request failed:",x),e.notify({type:"negative",message:"Process failed. Please try again."});return}if(d.value===3){a.prodInfo.prodName="",a.prodInfo.batchCode="",a.prodInfo.upReason="",a.prodInfo.message="",p.value.goTo(1);return}p.value.next()}else console.error("One or more input fields failed validation.")},prev:()=>{p.value.previous()},stepperRef:p}}}),v=e=>(R("data-v-7843b2a2"),e=e(),S(),e),Y={class:"rounded-t mb-0 px-4 py-3 border-0"},F={class:"flex flex-wrap items-center"},O={class:"relative w-full px-4 max-w-full flex-grow flex-1"},j=v(()=>t("div",{class:"flex flex-wrap flex-center"},[t("h1",{class:"text-2xl"},"Requisition")],-1)),A={class:"q-gutter-md"},D={class:"m-8"},G={class:"m-8"},W={class:"self-center full-width no-outline",tabindex:"0"},Z={class:"self-center full-width no-outline",tabindex:"0"},H={class:"self-center full-width no-outline",tabindex:"0"},J={class:"self-center full-width no-outline",tabindex:"0"},K=v(()=>t("hr",{class:"rounded mt-6"},null,-1)),L={class:"grid"},X=v(()=>t("div",{class:"flex-row text-center"},[t("h3",{style:{"font-size":"60px","text-transform":"uppercase"}}," Thank You ")],-1)),ee=v(()=>t("div",{class:"flex-col flex-start"},[t("h5",{style:{"font-size":"20px","margin-left":"10px","margin-top":"20px","margin-bottom":"20px"}}," The updates have been effected. You can re-download the updated version. ")],-1)),oe={class:"flex-col text-center"};function le(e,a,i,d,p,u){return I(),C("div",{class:w(["relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded",[e.color==="light"?"bg-white":"bg-emerald-900 text-white"]])},[t("div",Y,[t("div",F,[t("div",O,[t("h3",{class:w(["font-semibold text-lg",[e.color==="light"?"text-blueGray-700":"text-white"]])}," Update Batch Message ",2)])])]),t("form",null,[l($,{ref:"stepperRef",modelValue:e.step,"onUpdate:modelValue":a[5]||(a[5]=o=>e.step=o),contracted:"",color:"primary",animated:""},{navigation:s(()=>[l(q,{class:"flex flex-center w-full relative"},{default:s(()=>[l(b,{color:"primary",label:e.step===3?"Finish":"Continue",onClick:k(e.handleNavigation,["prevent"])},null,8,["label","onClick"]),e.step>1?(I(),N(b,{key:0,flat:"",color:"primary",label:"Back",class:"q-ml-sm",onClick:e.prev},null,8,["onClick"])):Q("",!0)]),_:1})]),default:s(()=>[l(y,{name:1,title:"Product Info",icon:"feed",done:e.step>1},{default:s(()=>[j,t("div",A,[t("div",D,[l(_,{ref:"prodName",modelValue:e.prods.prodInfo.prodName,"onUpdate:modelValue":a[0]||(a[0]=o=>e.prods.prodInfo.prodName=o),outlined:"",color:"purple-12",label:"Name of Product",rules:[o=>o&&o.length>0||"Enter the product name"]},{prepend:s(()=>[l(r,{name:"inventory"})]),_:1},8,["modelValue","rules"]),l(_,{ref:"batchCode",modelValue:e.prods.prodInfo.batchCode,"onUpdate:modelValue":a[1]||(a[1]=o=>e.prods.prodInfo.batchCode=o),outlined:"",color:"purple-12",label:"Batch Code",rules:[o=>o&&o.length>0||"Enter the batch code"]},{prepend:s(()=>[l(r,{name:"batch_prediction"})]),_:1},8,["modelValue","rules"]),l(P,{ref:"upReason",modelValue:e.prods.prodInfo.upReason,"onUpdate:modelValue":a[2]||(a[2]=o=>e.prods.prodInfo.upReason=o),outlined:"",class:"mt-6",color:"purple-12",options:e.prods.prodInfo.reason,label:"Reason",rules:[o=>o!==null&&o!==""||"Please indicate the reason for the update"]},{prepend:s(()=>[l(r,{name:"psychology_alt"})]),_:1},8,["modelValue","options","rules"]),l(_,{ref:"message",modelValue:e.prods.prodInfo.message,"onUpdate:modelValue":a[3]||(a[3]=o=>e.prods.prodInfo.message=o),outlined:"",clearable:"",counter:"",class:"mt-6",color:"purple-12",type:"textarea",label:"Message *",rules:[o=>o&&o.length>10||"Enter the message"],"lazy-rules":""},{prepend:s(()=>[l(r,{name:"edit_note"})]),_:1},8,["modelValue","rules"])])])]),_:1},8,["done"]),l(y,{name:2,title:"Summary",icon:"preview",done:e.step>2},{default:s(()=>[t("div",null,[l(z,{class:"q-gutter-md"},{default:s(()=>[t("div",G,[l(f,{outlined:"",color:"purple-12",label:"Name of Product *","stack-label":""},{control:s(()=>[t("div",W,m(e.prods.prodInfo.prodName),1)]),prepend:s(()=>[l(r,{name:"inventory"})]),_:1}),l(f,{class:"mt-6",outlined:"",color:"purple-12",label:"Batch Code *","stack-label":""},{control:s(()=>[t("div",Z,m(e.prods.prodInfo.batchCode),1)]),prepend:s(()=>[l(r,{name:"batch_prediction"})]),_:1}),l(f,{outlined:"",class:"mt-6","stack-label":"",color:"purple-12",label:"Reason *"},{control:s(()=>[t("div",H,m(e.prods.prodInfo.upReason),1)]),prepend:s(()=>[l(r,{name:"psychology_alt"})]),_:1}),l(f,{outlined:"",class:"mt-6",color:"purple-12",label:"Message *","stack-label":""},{control:s(()=>[t("div",J,m(e.prods.prodInfo.message),1)]),prepend:s(()=>[l(r,{name:"edit_note"})]),_:1}),K]),l(B,{modelValue:e.accept,"onUpdate:modelValue":a[4]||(a[4]=o=>e.accept=o),class:"flex flex-center",label:"I accept the effect of the changes."},null,8,["modelValue"])]),_:1})])]),_:1},8,["done"]),l(y,{name:3,title:"Peace Out",icon:"done_all"},{default:s(()=>[t("div",L,[X,ee,t("div",oe,[l(b,{class:"q-m-lg",color:"grey-4","text-color":"purple",glossy:"",unelevated:"",label:"Print Receipt",icon:"receipt"})])])]),_:1})]),_:1},8,["modelValue"])])],2)}var Ve=M(T,[["render",le],["__scopeId","data-v-7843b2a2"]]);export{Ve as default};
