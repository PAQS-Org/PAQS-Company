{
  "version": 3,
  "sources": ["../../../../hellojs/dist/hello.all.js", "dep:hellojs"],
  "sourcesContent": ["/*! hellojs v1.20.0 - (c) 2012-2023 Andrew Dodson - MIT https://adodson.com/hello.js/LICENSE */\n// ES5 Object.create\nif (!Object.create) {\n\n\t// Shim, Object create\n\t// A shim for Object.create(), it adds a prototype to a new object\n\tObject.create = (function() {\n\n\t\tfunction F() {}\n\n\t\treturn function(o) {\n\n\t\t\tif (arguments.length != 1) {\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\n\t\t\t}\n\n\t\t\tF.prototype = o;\n\t\t\treturn new F();\n\t\t};\n\n\t})();\n\n}\n\n// ES5 Object.keys\nif (!Object.keys) {\n\tObject.keys = function(o, k, r) {\n\t\tr = [];\n\t\tfor (k in o) {\n\t\t\tif (r.hasOwnProperty.call(o, k))\n\t\t\t\tr.push(k);\n\t\t}\n\n\t\treturn r;\n\t};\n}\n/* eslint-disable no-extend-native */\n// ES5 [].indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function(s) {\n\n\t\tfor (var j = 0; j < this.length; j++) {\n\t\t\tif (this[j] === s) {\n\t\t\t\treturn j;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// ES5 [].forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function(fun/*, thisArg*/) {\n\n\t\tif (this === void 0 || this === null) {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar t = Object(this);\n\t\tvar len = t.length >>> 0;\n\t\tif (typeof fun !== 'function') {\n\t\t\tthrow new TypeError();\n\t\t}\n\n\t\tvar thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tif (i in t) {\n\t\t\t\tfun.call(thisArg, t[i], i, t);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\n// ES5 [].filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\tif (fun.call(thisArg || void 0, val, i, t)) {\n\t\t\t\ta.push(val);\n\t\t\t}\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// Production steps of ECMA-262, Edition 5, 15.4.4.19\n// Reference: http://es5.github.io/#x15.4.4.19\nif (!Array.prototype.map) {\n\n\tArray.prototype.map = function(fun, thisArg) {\n\n\t\tvar a = [];\n\t\tthis.forEach(function(val, i, t) {\n\t\t\ta.push(fun.call(thisArg || void 0, val, i, t));\n\t\t});\n\n\t\treturn a;\n\t};\n}\n\n// ES5 isArray\nif (!Array.isArray) {\n\n\t// Function Array.isArray\n\tArray.isArray = function(o) {\n\t\treturn Object.prototype.toString.call(o) === '[object Array]';\n\t};\n\n}\n\n// Test for location.assign\nif (typeof window === 'object' && typeof window.location === 'object' && !window.location.assign) {\n\n\twindow.location.assign = function(url) {\n\t\twindow.location = url;\n\t};\n\n}\n\n// Test for Function.bind\nif (!Function.prototype.bind) {\n\n\t// MDN\n\t// Polyfill IE8, does not support native Function.bind\n\tFunction.prototype.bind = function(b) {\n\n\t\tif (typeof this !== 'function') {\n\t\t\tthrow new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t\t}\n\n\t\tfunction C() {}\n\n\t\tvar a = [].slice;\n\t\tvar f = a.call(arguments, 1);\n\t\tvar _this = this;\n\t\tvar D = function() {\n\t\t\treturn _this.apply(this instanceof C ? this : b || window, f.concat(a.call(arguments)));\n\t\t};\n\n\t\tC.prototype = this.prototype;\n\t\tD.prototype = new C();\n\n\t\treturn D;\n\t};\n\n}\n/* eslint-enable no-extend-native */\n/**\n * @hello.js\n *\n * HelloJS is a client side Javascript SDK for making OAuth2 logins and subsequent REST calls.\n *\n * @author Andrew Dodson\n * @website https://adodson.com/hello.js/\n *\n * @copyright Andrew Dodson, 2012 - 2015\n * @license MIT: You are free to use and modify this code for any use, on the condition that this copyright notice remains.\n */\n\nvar hello = function(name) {\n\treturn hello.use(name);\n};\n\nhello.utils = {\n\n\t// Extend the first object with the properties and methods of the second\n\textend: function(r /*, a[, b[, ...]] */) {\n\n\t\t// Get the arguments as an array but ommit the initial item\n\t\tArray.prototype.slice.call(arguments, 1).forEach(function(a) {\n\t\t\tif (Array.isArray(r) && Array.isArray(a)) {\n\t\t\t\tArray.prototype.push.apply(r, a);\n\t\t\t}\n\t\t\telse if (r && (r instanceof Object || typeof r === 'object') && a && (a instanceof Object || typeof a === 'object') && r !== a) {\n\t\t\t\tfor (var x in a) {\n\t\t\t\t\t// Prevent prototype pollution\n\t\t\t\t\tif (x === '__proto__' || x === 'constructor') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tr[x] = hello.utils.extend(r[x], a[x]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t// Clone it\n\t\t\t\t\ta = a.slice(0);\n\t\t\t\t}\n\n\t\t\t\tr = a;\n\t\t\t}\n\t\t});\n\n\t\treturn r;\n\t}\n};\n\n// Core library\nhello.utils.extend(hello, {\n\n\tsettings: {\n\n\t\t// OAuth2 authentication defaults\n\t\tredirect_uri: window.location.href.split('#')[0],\n\t\tresponse_type: 'token',\n\t\tdisplay: 'popup',\n\t\tstate: '',\n\n\t\t// OAuth1 shim\n\t\t// The path to the OAuth1 server for signing user requests\n\t\t// Want to recreate your own? Checkout https://github.com/MrSwitch/node-oauth-shim\n\t\toauth_proxy: 'https://auth-server.herokuapp.com/proxy',\n\n\t\t// API timeout in milliseconds\n\t\ttimeout: 20000,\n\n\t\t// Popup Options\n\t\tpopup: {\n\t\t\tresizable: 1,\n\t\t\tscrollbars: 1,\n\t\t\twidth: 500,\n\t\t\theight: 550\n\t\t},\n\n\t\t// Default scope\n\t\t// Many services require atleast a profile scope,\n\t\t// HelloJS automatially includes the value of provider.scope_map.basic\n\t\t// If that's not required it can be removed via hello.settings.scope.length = 0;\n\t\tscope: ['basic'],\n\n\t\t// Scope Maps\n\t\t// This is the default module scope, these are the defaults which each service is mapped too.\n\t\t// By including them here it prevents the scope from being applied accidentally\n\t\tscope_map: {\n\t\t\tbasic: ''\n\t\t},\n\n\t\t// Default service / network\n\t\tdefault_service: null,\n\n\t\t// Force authentication\n\t\t// When hello.login is fired.\n\t\t// (null): ignore current session expiry and continue with login\n\t\t// (true): ignore current session expiry and continue with login, ask for user to reauthenticate\n\t\t// (false): if the current session looks good for the request scopes return the current session.\n\t\tforce: null,\n\n\t\t// Page URL\n\t\t// When 'display=page' this property defines where the users page should end up after redirect_uri\n\t\t// Ths could be problematic if the redirect_uri is indeed the final place,\n\t\t// Typically this circumvents the problem of the redirect_url being a dumb relay page.\n\t\tpage_uri: window.location.href\n\t},\n\n\t// Service configuration objects\n\tservices: {},\n\n\t// Use\n\t// Define a new instance of the HelloJS library with a default service\n\tuse: function(service) {\n\n\t\t// Create self, which inherits from its parent\n\t\tvar self = Object.create(this);\n\n\t\t// Inherit the prototype from its parent\n\t\tself.settings = Object.create(this.settings);\n\n\t\t// Define the default service\n\t\tif (service) {\n\t\t\tself.settings.default_service = service;\n\t\t}\n\n\t\t// Create an instance of Events\n\t\tself.utils.Event.call(self);\n\n\t\treturn self;\n\t},\n\n\t// Initialize\n\t// Define the client_ids for the endpoint services\n\t// @param object o, contains a key value pair, service => clientId\n\t// @param object opts, contains a key value pair of options used for defining the authentication defaults\n\t// @param number timeout, timeout in seconds\n\tinit: function(services, options) {\n\n\t\tvar utils = this.utils;\n\n\t\tif (!services) {\n\t\t\treturn this.services;\n\t\t}\n\n\t\t// Define provider credentials\n\t\t// Reformat the ID field\n\t\tfor (var x in services) {if (services.hasOwnProperty(x)) {\n\t\t\tif (typeof (services[x]) !== 'object') {\n\t\t\t\tservices[x] = {id: services[x]};\n\t\t\t}\n\t\t}}\n\n\t\t// Merge services if there already exists some\n\t\tutils.extend(this.services, services);\n\n\t\t// Update the default settings with this one.\n\t\tif (options) {\n\t\t\tutils.extend(this.settings, options);\n\n\t\t\t// Do this immediatly incase the browser changes the current path.\n\t\t\tif ('redirect_uri' in options) {\n\t\t\t\tthis.settings.redirect_uri = utils.url(options.redirect_uri).href;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Login\n\t// Using the endpoint\n\t// @param network stringify       name to connect to\n\t// @param options object    (optional)  {display mode, is either none|popup(default)|page, scope: email,birthday,publish, .. }\n\t// @param callback  function  (optional)  fired on signin\n\tlogin: function() {\n\n\t\t// Create an object which inherits its parent as the prototype and constructs a new event chain.\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\t\tvar promise = utils.Promise();\n\n\t\t// Get parameters\n\t\tvar p = utils.args({network: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\t// Local vars\n\t\tvar url;\n\n\t\t// Get all the custom options and store to be appended to the querystring\n\t\tvar qs = utils.diffKey(p.options, _this.settings);\n\n\t\t// Merge/override options with app defaults\n\t\tvar opts = p.options = utils.merge(_this.settings, p.options || {});\n\n\t\t// Merge/override options with app defaults\n\t\topts.popup = utils.merge(_this.settings.popup, p.options.popup || {});\n\n\t\t// Network\n\t\tp.network = p.network || _this.settings.default_service;\n\n\t\t// Bind callback to both reject and fulfill states\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.login auth'), emit.bind(this, 'auth.failed auth'));\n\n\t\t// Is our service valid?\n\t\tif (typeof (p.network) !== 'string' || !(p.network in _this.services)) {\n\t\t\t// Trigger the default login.\n\t\t\t// Ahh we dont have one.\n\t\t\treturn promise.reject(error('invalid_network', 'The provided network was not recognized'));\n\t\t}\n\n\t\tvar provider = _this.services[p.network];\n\n\t\t// Create a global listener to capture events triggered out of scope\n\t\tvar callbackId = utils.globalEvent(function(obj) {\n\n\t\t\t// The responseHandler returns a string, lets save this locally\n\t\t\tif (obj) {\n\t\t\t\tif (typeof (obj) == 'string') {\n\t\t\t\t\tobj = JSON.parse(obj);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tobj = error('cancelled', 'The authentication was not completed');\n\t\t\t}\n\n\t\t\t// Handle these response using the local\n\t\t\t// Trigger on the parent\n\t\t\tif (!obj.error) {\n\n\t\t\t\t// Save on the parent window the new credentials\n\t\t\t\t// This fixes an IE10 bug i think... atleast it does for me.\n\t\t\t\tutils.store(obj.network, obj);\n\n\t\t\t\t// Fulfill a successful login\n\t\t\t\tpromise.fulfill({\n\t\t\t\t\tnetwork: obj.network,\n\t\t\t\t\tauthResponse: obj\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Reject a successful login\n\t\t\t\tpromise.reject(obj);\n\t\t\t}\n\t\t});\n\n\t\tvar redirectUri = utils.url(opts.redirect_uri).href;\n\n\t\t// May be a space-delimited list of multiple, complementary types\n\t\tvar responseType = provider.oauth.response_type || opts.response_type;\n\n\t\t// Fallback to token if the module hasn't defined a grant url\n\t\tif (/\\bcode\\b/.test(responseType) && !provider.oauth.grant) {\n\t\t\tresponseType = responseType.replace(/\\bcode\\b/, 'token');\n\t\t}\n\n\t\t// Query string parameters, we may pass our own arguments to form the querystring\n\t\tp.qs = utils.merge(qs, {\n\t\t\tclient_id: encodeURIComponent(provider.id),\n\t\t\tresponse_type: encodeURIComponent(responseType),\n\t\t\tredirect_uri: encodeURIComponent(redirectUri),\n\t\t\tstate: {\n\t\t\t\tclient_id: provider.id,\n\t\t\t\tnetwork: p.network,\n\t\t\t\tdisplay: opts.display,\n\t\t\t\tcallback: callbackId,\n\t\t\t\tstate: opts.state,\n\t\t\t\tredirect_uri: redirectUri\n\t\t\t}\n\t\t});\n\n\t\t// Get current session for merging scopes, and for quick auth response\n\t\tvar session = utils.store(p.network);\n\n\t\t// Scopes (authentication permisions)\n\t\t// Ensure this is a string - IE has a problem moving Arrays between windows\n\t\t// Append the setup scope\n\t\tvar SCOPE_SPLIT = /[,\\s]+/;\n\n\t\t// Include default scope settings (cloned).\n\t\tvar scope = _this.settings.scope ? [_this.settings.scope.toString()] : [];\n\n\t\t// Extend the providers scope list with the default\n\t\tvar scopeMap = utils.merge(_this.settings.scope_map, provider.scope || {});\n\n\t\t// Add user defined scopes...\n\t\tif (opts.scope) {\n\t\t\tscope.push(opts.scope.toString());\n\t\t}\n\n\t\t// Append scopes from a previous session.\n\t\t// This helps keep app credentials constant,\n\t\t// Avoiding having to keep tabs on what scopes are authorized\n\t\tif (session && 'scope' in session && session.scope instanceof String) {\n\t\t\tscope.push(session.scope);\n\t\t}\n\n\t\t// Join and Split again\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Save the the scopes to the state with the names that they were requested with.\n\t\tp.qs.state.scope = scope.join(',');\n\n\t\t// Map scopes to the providers naming convention\n\t\tscope = scope.map(function(item) {\n\t\t\t// Does this have a mapping?\n\t\t\treturn (item in scopeMap) ? scopeMap[item] : item;\n\t\t});\n\n\t\t// Stringify and Arrayify so that double mapped scopes are given the chance to be formatted\n\t\tscope = scope.join(',').split(SCOPE_SPLIT);\n\n\t\t// Again...\n\t\t// Format remove duplicates and empty values\n\t\tscope = utils.unique(scope).filter(filterEmpty);\n\n\t\t// Join with the expected scope delimiter into a string\n\t\tp.qs.scope = scope.join(provider.scope_delim || ',');\n\n\t\t// Is the user already signed in with the appropriate scopes, valid access_token?\n\t\tif (opts.force === false) {\n\n\t\t\tif (session && 'access_token' in session && session.access_token && 'expires' in session && session.expires > ((new Date()).getTime() / 1e3)) {\n\t\t\t\t// What is different about the scopes in the session vs the scopes in the new login?\n\t\t\t\tvar diff = utils.diff((session.scope || '').split(SCOPE_SPLIT), (p.qs.state.scope || '').split(SCOPE_SPLIT));\n\t\t\t\tif (diff.length === 0) {\n\n\t\t\t\t\t// OK trigger the callback\n\t\t\t\t\tpromise.fulfill({\n\t\t\t\t\t\tunchanged: true,\n\t\t\t\t\t\tnetwork: p.network,\n\t\t\t\t\t\tauthResponse: session\n\t\t\t\t\t});\n\n\t\t\t\t\t// Nothing has changed\n\t\t\t\t\treturn promise;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Page URL\n\t\tif (opts.display === 'page' && opts.page_uri) {\n\t\t\t// Add a page location, place to endup after session has authenticated\n\t\t\tp.qs.state.page_uri = utils.url(opts.page_uri).href;\n\t\t}\n\n\t\t// Bespoke\n\t\t// Override login querystrings from auth_options\n\t\tif ('login' in provider && typeof (provider.login) === 'function') {\n\t\t\t// Format the paramaters according to the providers formatting function\n\t\t\tprovider.login(p);\n\t\t}\n\n\t\t// Add OAuth to state\n\t\t// Where the service is going to take advantage of the oauth_proxy\n\t\tif (!/\\btoken\\b/.test(responseType) ||\n\t\tparseInt(provider.oauth.version, 10) < 2 ||\n\t\t(opts.display === 'none' && provider.oauth.grant && session && session.refresh_token)) {\n\n\t\t\t// Add the oauth endpoints\n\t\t\tp.qs.state.oauth = provider.oauth;\n\n\t\t\t// Add the proxy url\n\t\t\tp.qs.state.oauth_proxy = opts.oauth_proxy;\n\n\t\t}\n\n\t\t// Convert state to a string\n\t\tif (provider.oauth.base64_state) {\n\t\t\tp.qs.state = window.btoa(JSON.stringify(p.qs.state));\n\t\t}\n\t\telse {\n\t\t\tp.qs.state = encodeURIComponent(JSON.stringify(p.qs.state));\n\t\t}\n\n\t\t// URL\n\t\tif (parseInt(provider.oauth.version, 10) === 1) {\n\n\t\t\t// Turn the request to the OAuth Proxy for 3-legged auth\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Refresh token\n\t\telse if (opts.display === 'none' && provider.oauth.grant && session && session.refresh_token) {\n\n\t\t\t// Add the refresh_token to the request\n\t\t\tp.qs.refresh_token = session.refresh_token;\n\n\t\t\t// Define the request path\n\t\t\turl = utils.qs(opts.oauth_proxy, p.qs, encodeFunction);\n\t\t}\n\t\telse {\n\t\t\turl = utils.qs(provider.oauth.auth, p.qs, encodeFunction);\n\t\t}\n\n\t\t// Broadcast this event as an auth:init\n\t\temit('auth.init', p);\n\n\t\t// Execute\n\t\t// Trigger how we want self displayed\n\t\tif (opts.display === 'none') {\n\t\t\t// Sign-in in the background, iframe\n\t\t\tutils.iframe(url, redirectUri);\n\t\t}\n\n\t\t// Triggering popup?\n\t\telse if (opts.display === 'popup') {\n\n\t\t\tvar popup = utils.popup(url, redirectUri, opts.popup);\n\n\t\t\tvar timer = setInterval(function() {\n\t\t\t\tif (!popup || popup.closed) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t\tif (!promise.state) {\n\n\t\t\t\t\t\tvar response = error('cancelled', 'Login has been cancelled');\n\n\t\t\t\t\t\tif (!popup) {\n\t\t\t\t\t\t\tresponse = error('blocked', 'Popup was blocked');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresponse.network = p.network;\n\n\t\t\t\t\t\tpromise.reject(response);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t}\n\n\t\telse {\n\t\t\twindow.location = url;\n\t\t}\n\n\t\treturn promise.proxy;\n\n\t\tfunction encodeFunction(s) {return s;}\n\n\t\tfunction filterEmpty(s) {return !!s;}\n\t},\n\n\t// Remove any data associated with a given service\n\t// @param string name of the service\n\t// @param function callback\n\tlogout: function() {\n\n\t\tvar _this = this;\n\t\tvar utils = _this.utils;\n\t\tvar error = utils.error;\n\n\t\t// Create a new promise\n\t\tvar promise = utils.Promise();\n\n\t\tvar p = utils.args({name: 's', options: 'o', callback: 'f'}, arguments);\n\n\t\tp.options = p.options || {};\n\n\t\t// Add callback to events\n\t\tpromise.proxy.then(p.callback, p.callback);\n\n\t\t// Trigger an event on the global listener\n\t\tfunction emit(s, value) {\n\t\t\thello.emit(s, value);\n\t\t}\n\n\t\tpromise.proxy.then(emit.bind(this, 'auth.logout auth'), emit.bind(this, 'error'));\n\n\t\t// Network\n\t\tp.name = p.name || this.settings.default_service;\n\t\tp.authResponse = utils.store(p.name);\n\n\t\tif (p.name && !(p.name in _this.services)) {\n\n\t\t\tpromise.reject(error('invalid_network', 'The network was unrecognized'));\n\n\t\t}\n\t\telse if (p.name && p.authResponse) {\n\n\t\t\t// Define the callback\n\t\t\tvar callback = function(opts) {\n\n\t\t\t\t// Remove from the store\n\t\t\t\tutils.store(p.name, null);\n\n\t\t\t\t// Emit events by default\n\t\t\t\tpromise.fulfill(hello.utils.merge({network: p.name}, opts || {}));\n\t\t\t};\n\n\t\t\t// Run an async operation to remove the users session\n\t\t\tvar _opts = {};\n\t\t\tif (p.options.force) {\n\t\t\t\tvar logout = _this.services[p.name].logout;\n\t\t\t\tif (logout) {\n\t\t\t\t\t// Convert logout to URL string,\n\t\t\t\t\t// If no string is returned, then this function will handle the logout async style\n\t\t\t\t\tif (typeof (logout) === 'function') {\n\t\t\t\t\t\tlogout = logout(callback, p);\n\t\t\t\t\t}\n\n\t\t\t\t\t// If logout is a string then assume URL and open in iframe.\n\t\t\t\t\tif (typeof (logout) === 'string') {\n\t\t\t\t\t\tutils.iframe(logout);\n\t\t\t\t\t\t_opts.force = null;\n\t\t\t\t\t\t_opts.message = 'Logout success on providers site was indeterminate';\n\t\t\t\t\t}\n\t\t\t\t\telse if (logout === undefined) {\n\t\t\t\t\t\t// The callback function will handle the response.\n\t\t\t\t\t\treturn promise.proxy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove local credentials\n\t\t\tcallback(_opts);\n\t\t}\n\t\telse {\n\t\t\tpromise.reject(error('invalid_session', 'There was no session to remove'));\n\t\t}\n\n\t\treturn promise.proxy;\n\t},\n\n\t// Returns all the sessions that are subscribed too\n\t// @param string optional, name of the service to get information about.\n\tgetAuthResponse: function(service) {\n\n\t\t// If the service doesn't exist\n\t\tservice = service || this.settings.default_service;\n\n\t\tif (!service || !(service in this.services)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.utils.store(service) || null;\n\t},\n\n\t// Events: placeholder for the events\n\tevents: {}\n});\n\n// Core utilities\nhello.utils.extend(hello.utils, {\n\n\t// Error\n\terror: function(code, message) {\n\t\treturn {\n\t\t\terror: {\n\t\t\t\tcode: code,\n\t\t\t\tmessage: message\n\t\t\t}\n\t\t};\n\t},\n\n\t// Append the querystring to a url\n\t// @param string url\n\t// @param object parameters\n\tqs: function(url, params, formatFunction) {\n\n\t\tif (params) {\n\n\t\t\t// Set default formatting function\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\t// Override the items in the URL which already exist\n\t\t\tfor (var x in params) {\n\t\t\t\tvar str = '([\\\\?\\\\&])' + x + '=[^\\\\&]*';\n\t\t\t\tvar reg = new RegExp(str);\n\t\t\t\tif (url.match(reg)) {\n\t\t\t\t\turl = url.replace(reg, '$1' + x + '=' + formatFunction(params[x]));\n\t\t\t\t\tdelete params[x];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEmpty(params)) {\n\t\t\treturn url + (url.indexOf('?') > -1 ? '&' : '?') + this.param(params, formatFunction);\n\t\t}\n\n\t\treturn url;\n\t},\n\n\t// Param\n\t// Explode/encode the parameters of an URL string/object\n\t// @param string s, string to decode\n\tparam: function(s, formatFunction) {\n\t\tvar b;\n\t\tvar a = {};\n\t\tvar m;\n\n\t\tif (typeof (s) === 'string') {\n\n\t\t\tformatFunction = formatFunction || decodeURIComponent;\n\n\t\t\tm = s.replace(/^[\\#\\?]/, '').match(/([^=\\/\\&]+)=([^\\&]+)/g);\n\t\t\tif (m) {\n\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\tb = m[i].match(/([^=]+)=(.*)/);\n\t\t\t\t\ta[b[1]] = formatFunction(b[2]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\t\telse {\n\n\t\t\tformatFunction = formatFunction || encodeURIComponent;\n\n\t\t\tvar o = s;\n\n\t\t\ta = [];\n\n\t\t\tfor (var x in o) {if (o.hasOwnProperty(x)) {\n\t\t\t\tif (o.hasOwnProperty(x)) {\n\t\t\t\t\ta.push([x, o[x] === '?' ? '?' : formatFunction(o[x])].join('='));\n\t\t\t\t}\n\t\t\t}}\n\n\t\t\treturn a.join('&');\n\t\t}\n\t},\n\n\t// Local storage facade\n\tstore: (function() {\n\n\t\tvar a = ['localStorage', 'sessionStorage'];\n\t\tvar i = -1;\n\t\tvar prefix = 'test';\n\n\t\t// Set LocalStorage\n\t\tvar localStorage;\n\n\t\twhile (a[++i]) {\n\t\t\ttry {\n\t\t\t\t// In Chrome with cookies blocked, calling localStorage throws an error\n\t\t\t\tlocalStorage = window[a[i]];\n\t\t\t\tlocalStorage.setItem(prefix + i, i);\n\t\t\t\tlocalStorage.removeItem(prefix + i);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlocalStorage = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!localStorage) {\n\n\t\t\tvar cache = null;\n\n\t\t\tlocalStorage = {\n\t\t\t\tgetItem: function(prop) {\n\t\t\t\t\tprop = prop + '=';\n\t\t\t\t\tvar m = document.cookie.split(';');\n\t\t\t\t\tfor (var i = 0; i < m.length; i++) {\n\t\t\t\t\t\tvar _m = m[i].replace(/(^\\s+|\\s+$)/, '');\n\t\t\t\t\t\tif (_m && _m.indexOf(prop) === 0) {\n\t\t\t\t\t\t\treturn _m.substr(prop.length);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn cache;\n\t\t\t\t},\n\n\t\t\t\tsetItem: function(prop, value) {\n\t\t\t\t\tcache = value;\n\t\t\t\t\tdocument.cookie = prop + '=' + value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Fill the cache up\n\t\t\tcache = localStorage.getItem('hello');\n\t\t}\n\n\t\tfunction get() {\n\t\t\tvar json = {};\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(localStorage.getItem('hello')) || {};\n\t\t\t}\n\t\t\tcatch (e) {}\n\n\t\t\treturn json;\n\t\t}\n\n\t\tfunction set(json) {\n\t\t\tlocalStorage.setItem('hello', JSON.stringify(json));\n\t\t}\n\n\t\t// Check if the browser support local storage\n\t\treturn function(name, value, days) {\n\n\t\t\t// Local storage\n\t\t\tvar json = get();\n\n\t\t\tif (name && value === undefined) {\n\t\t\t\treturn json[name] || null;\n\t\t\t}\n\t\t\telse if (name && value === null) {\n\t\t\t\ttry {\n\t\t\t\t\tdelete json[name];\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tjson[name] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (name) {\n\t\t\t\tjson[name] = value;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn json;\n\t\t\t}\n\n\t\t\tset(json);\n\n\t\t\treturn json || null;\n\t\t};\n\n\t})(),\n\n\t// Create and Append new DOM elements\n\t// @param node string\n\t// @param attr object literal\n\t// @param dom/string\n\tappend: function(node, attr, target) {\n\n\t\tvar n = typeof (node) === 'string' ? document.createElement(node) : node;\n\n\t\tif (typeof (attr) === 'object') {\n\t\t\tif ('tagName' in attr) {\n\t\t\t\ttarget = attr;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (var x in attr) {if (attr.hasOwnProperty(x)) {\n\t\t\t\t\tif (typeof (attr[x]) === 'object') {\n\t\t\t\t\t\tfor (var y in attr[x]) {if (attr[x].hasOwnProperty(y)) {\n\t\t\t\t\t\t\tn[x][y] = attr[x][y];\n\t\t\t\t\t\t}}\n\t\t\t\t\t}\n\t\t\t\t\telse if (x === 'html') {\n\t\t\t\t\t\tn.innerHTML = attr[x];\n\t\t\t\t\t}\n\n\t\t\t\t\t// IE doesn't like us setting methods with setAttribute\n\t\t\t\t\telse if (!/^on/.test(x)) {\n\t\t\t\t\t\tn.setAttribute(x, attr[x]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tn[x] = attr[x];\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t}\n\t\t}\n\n\t\tif (target === 'body') {\n\t\t\t(function self() {\n\t\t\t\tif (document.body) {\n\t\t\t\t\tdocument.body.appendChild(n);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tsetTimeout(self, 16);\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\t\telse if (typeof (target) === 'object') {\n\t\t\ttarget.appendChild(n);\n\t\t}\n\t\telse if (typeof (target) === 'string') {\n\t\t\tdocument.getElementsByTagName(target)[0].appendChild(n);\n\t\t}\n\n\t\treturn n;\n\t},\n\n\t// An easy way to create a hidden iframe\n\t// @param string src\n\tiframe: function(src) {\n\t\tthis.append('iframe', {src: src, style: {position: 'absolute', left: '-1000px', bottom: 0, height: '1px', width: '1px'}}, 'body');\n\t},\n\n\t// Recursive merge two objects into one, second parameter overides the first\n\t// @param a array\n\tmerge: function(/* Args: a, b, c, .. n */) {\n\t\tvar args = Array.prototype.slice.call(arguments);\n\t\targs.unshift({});\n\t\treturn this.extend.apply(null, args);\n\t},\n\n\t// Makes it easier to assign parameters, where some are optional\n\t// @param o object\n\t// @param a arguments\n\targs: function(o, args) {\n\n\t\tvar p = {};\n\t\tvar i = 0;\n\t\tvar t = null;\n\t\tvar x = null;\n\n\t\t// 'x' is the first key in the list of object parameters\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\t\t\tbreak;\n\t\t}}\n\n\t\t// Passing in hash object of arguments?\n\t\t// Where the first argument can't be an object\n\t\tif ((args.length === 1) && (typeof (args[0]) === 'object') && o[x] != 'o!') {\n\n\t\t\t// Could this object still belong to a property?\n\t\t\t// Check the object keys if they match any of the property keys\n\t\t\tfor (x in args[0]) {if (o.hasOwnProperty(x)) {\n\t\t\t\t// Does this key exist in the property list?\n\t\t\t\tif (x in o) {\n\t\t\t\t\t// Yes this key does exist so its most likely this function has been invoked with an object parameter\n\t\t\t\t\t// Return first argument as the hash of all arguments\n\t\t\t\t\treturn args[0];\n\t\t\t\t}\n\t\t\t}}\n\t\t}\n\n\t\t// Else loop through and account for the missing ones.\n\t\tfor (x in o) {if (o.hasOwnProperty(x)) {\n\n\t\t\tt = typeof (args[i]);\n\n\t\t\tif ((typeof (o[x]) === 'function' && o[x].test(args[i])) || (typeof (o[x]) === 'string' && (\n\t\t\t\t(o[x].indexOf('s') > -1 && t === 'string') ||\n\t\t\t(o[x].indexOf('o') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('i') > -1 && t === 'number') ||\n\t\t\t(o[x].indexOf('a') > -1 && t === 'object') ||\n\t\t\t(o[x].indexOf('f') > -1 && t === 'function')\n\t\t\t))\n\t\t\t) {\n\t\t\t\tp[x] = args[i++];\n\t\t\t}\n\n\t\t\telse if (typeof (o[x]) === 'string' && o[x].indexOf('!') > -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}}\n\n\t\treturn p;\n\t},\n\n\t// Returns a URL instance\n\turl: function(path) {\n\n\t\t// If the path is empty\n\t\tif (!path) {\n\t\t\treturn window.location;\n\t\t}\n\n\t\t// Chrome and FireFox support new URL() to extract URL objects\n\t\telse if (window.URL && URL instanceof Function && URL.length !== 0) {\n\t\t\treturn new URL(path, window.location);\n\t\t}\n\n\t\t// Ugly shim, it works!\n\t\telse {\n\t\t\tvar a = document.createElement('a');\n\t\t\ta.href = path;\n\t\t\treturn a.cloneNode(false);\n\t\t}\n\t},\n\n\tdiff: function(a, b) {\n\t\treturn b.filter(function(item) {\n\t\t\treturn a.indexOf(item) === -1;\n\t\t});\n\t},\n\n\t// Get the different hash of properties unique to `a`, and not in `b`\n\tdiffKey: function(a, b) {\n\t\tif (a || !b) {\n\t\t\tvar r = {};\n\t\t\tfor (var x in a) {\n\t\t\t\t// Does the property not exist?\n\t\t\t\tif (!(x in b)) {\n\t\t\t\t\tr[x] = a[x];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\n\t\treturn a;\n\t},\n\n\t// Unique\n\t// Remove duplicate and null values from an array\n\t// @param a array\n\tunique: function(a) {\n\t\tif (!Array.isArray(a)) { return []; }\n\n\t\treturn a.filter(function(item, index) {\n\t\t\t// Is this the first location of item\n\t\t\treturn a.indexOf(item) === index;\n\t\t});\n\t},\n\n\tisEmpty: function(obj) {\n\n\t\t// Scalar\n\t\tif (!obj)\n\t\t\treturn true;\n\n\t\t// Array\n\t\tif (Array.isArray(obj)) {\n\t\t\treturn !obj.length;\n\t\t}\n\t\telse if (typeof (obj) === 'object') {\n\t\t\t// Object\n\t\t\tfor (var key in obj) {\n\t\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/* eslint-disable */\n\n\t/*!\n\t **  Thenable -- Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable\n\t **  Copyright (c) 2013-2014 Ralf S. Engelschall <http://engelschall.com>\n\t **  Licensed under The MIT License <http://opensource.org/licenses/MIT>\n\t **  Source-Code distributed on <http://github.com/rse/thenable>\n\t */\n\tPromise: (function() {\n\t\t/*  promise states [Promises/A+ 2.1]  */\n\t\tvar STATE_PENDING = 0; /*  [Promises/A+ 2.1.1]  */\n\t\tvar STATE_FULFILLED = 1; /*  [Promises/A+ 2.1.2]  */\n\t\tvar STATE_REJECTED = 2; /*  [Promises/A+ 2.1.3]  */\n\n\t\t/*  promise object constructor  */\n\t\tvar api = function(executor) {\n\t\t\t/*  optionally support non-constructor/plain-function call  */\n\t\t\tif (!(this instanceof api))\n\t\t\t\treturn new api(executor);\n\n\t\t\t/*  initialize object  */\n\t\t\tthis.id = \"Thenable/1.0.6\";\n\t\t\tthis.state = STATE_PENDING; /*  initial state  */\n\t\t\tthis.fulfillValue = undefined; /*  initial value  */ /*  [Promises/A+ 1.3, 2.1.2.2]  */\n\t\t\tthis.rejectReason = undefined; /*  initial reason */ /*  [Promises/A+ 1.5, 2.1.3.2]  */\n\t\t\tthis.onFulfilled = []; /*  initial handlers  */\n\t\t\tthis.onRejected = []; /*  initial handlers  */\n\n\t\t\t/*  provide optional information-hiding proxy  */\n\t\t\tthis.proxy = {\n\t\t\t\tthen: this.then.bind(this)\n\t\t\t};\n\n\t\t\t/*  support optional executor function  */\n\t\t\tif (typeof executor === \"function\")\n\t\t\t\texecutor.call(this, this.fulfill.bind(this), this.reject.bind(this));\n\t\t};\n\n\t\t/*  promise API methods  */\n\t\tapi.prototype = {\n\t\t\t/*  promise resolving methods  */\n\t\t\tfulfill: function(value) { return deliver(this, STATE_FULFILLED, \"fulfillValue\", value); },\n\t\t\treject: function(value) { return deliver(this, STATE_REJECTED, \"rejectReason\", value); },\n\n\t\t\t/*  \"The then Method\" [Promises/A+ 1.1, 1.2, 2.2]  */\n\t\t\tthen: function(onFulfilled, onRejected) {\n\t\t\t\tvar curr = this;\n\t\t\t\tvar next = new api(); /*  [Promises/A+ 2.2.7]  */\n\t\t\t\tcurr.onFulfilled.push(\n\t\t\t\t\tresolver(onFulfilled, next, \"fulfill\")); /*  [Promises/A+ 2.2.2/2.2.6]  */\n\t\t\t\tcurr.onRejected.push(\n\t\t\t\t\tresolver(onRejected, next, \"reject\")); /*  [Promises/A+ 2.2.3/2.2.6]  */\n\t\t\t\texecute(curr);\n\t\t\t\treturn next.proxy; /*  [Promises/A+ 2.2.7, 3.3]  */\n\t\t\t}\n\t\t};\n\n\t\t/*  deliver an action  */\n\t\tvar deliver = function(curr, state, name, value) {\n\t\t\tif (curr.state === STATE_PENDING) {\n\t\t\t\tcurr.state = state; /*  [Promises/A+ 2.1.2.1, 2.1.3.1]  */\n\t\t\t\tcurr[name] = value; /*  [Promises/A+ 2.1.2.2, 2.1.3.2]  */\n\t\t\t\texecute(curr);\n\t\t\t}\n\t\t\treturn curr;\n\t\t};\n\n\t\t/*  execute all handlers  */\n\t\tvar execute = function(curr) {\n\t\t\tif (curr.state === STATE_FULFILLED)\n\t\t\t\texecute_handlers(curr, \"onFulfilled\", curr.fulfillValue);\n\t\t\telse if (curr.state === STATE_REJECTED)\n\t\t\t\texecute_handlers(curr, \"onRejected\", curr.rejectReason);\n\t\t};\n\n\t\t/*  execute particular set of handlers  */\n\t\tvar execute_handlers = function(curr, name, value) {\n\t\t\t/* global process: true */\n\t\t\t/* global setImmediate: true */\n\t\t\t/* global setTimeout: true */\n\n\t\t\t/*  short-circuit processing  */\n\t\t\tif (curr[name].length === 0)\n\t\t\t\treturn;\n\n\t\t\t/*  iterate over all handlers, exactly once  */\n\t\t\tvar handlers = curr[name];\n\t\t\tcurr[name] = []; /*  [Promises/A+ 2.2.2.3, 2.2.3.3]  */\n\t\t\tvar func = function() {\n\t\t\t\tfor (var i = 0; i < handlers.length; i++)\n\t\t\t\t\thandlers[i](value); /*  [Promises/A+ 2.2.5]  */\n\t\t\t};\n\n\t\t\t/*  execute procedure asynchronously  */ /*  [Promises/A+ 2.2.4, 3.1]  */\n\t\t\tif (typeof process === \"object\" && typeof process.nextTick === \"function\")\n\t\t\t\tprocess.nextTick(func);\n\t\t\telse if (typeof setImmediate === \"function\")\n\t\t\t\tsetImmediate(func);\n\t\t\telse\n\t\t\t\tsetTimeout(func, 0);\n\t\t};\n\n\t\t/*  generate a resolver function  */\n\t\tvar resolver = function(cb, next, method) {\n\t\t\treturn function(value) {\n\t\t\t\tif (typeof cb !== \"function\") /*  [Promises/A+ 2.2.1, 2.2.7.3, 2.2.7.4]  */\n\t\t\t\t\tnext[method].call(next, value); /*  [Promises/A+ 2.2.7.3, 2.2.7.4]  */\n\t\t\t\telse {\n\t\t\t\t\tvar result;\n\t\t\t\t\ttry { result = cb(value); } /*  [Promises/A+ 2.2.2.1, 2.2.3.1, 2.2.5, 3.2]  */\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tnext.reject(e); /*  [Promises/A+ 2.2.7.2]  */\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(next, result); /*  [Promises/A+ 2.2.7.1]  */\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\n\t\t/*  \"Promise Resolution Procedure\"  */ /*  [Promises/A+ 2.3]  */\n\t\tvar resolve = function(promise, x) {\n\t\t\t/*  sanity check arguments  */ /*  [Promises/A+ 2.3.1]  */\n\t\t\tif (promise === x || promise.proxy === x) {\n\t\t\t\tpromise.reject(new TypeError(\"cannot resolve promise with itself\"));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  surgically check for a \"then\" method\n\t\t\t\t(mainly to just call the \"getter\" of \"then\" only once)  */\n\t\t\tvar then;\n\t\t\tif ((typeof x === \"object\" && x !== null) || typeof x === \"function\") {\n\t\t\t\ttry { then = x.then; } /*  [Promises/A+ 2.3.3.1, 3.5]  */\n\t\t\t\tcatch (e) {\n\t\t\t\t\tpromise.reject(e); /*  [Promises/A+ 2.3.3.2]  */\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*  handle own Thenables    [Promises/A+ 2.3.2]\n\t\t\t\tand similar \"thenables\" [Promises/A+ 2.3.3]  */\n\t\t\tif (typeof then === \"function\") {\n\t\t\t\tvar resolved = false;\n\t\t\t\ttry {\n\t\t\t\t\t/*  call retrieved \"then\" method */ /*  [Promises/A+ 2.3.3.3]  */\n\t\t\t\t\tthen.call(x,\n\t\t\t\t\t\t/*  resolvePromise  */ /*  [Promises/A+ 2.3.3.3.1]  */\n\t\t\t\t\t\tfunction(y) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true; /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tif (y === x) /*  [Promises/A+ 3.6]  */\n\t\t\t\t\t\t\t\tpromise.reject(new TypeError(\"circular thenable chain\"));\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tresolve(promise, y);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t/*  rejectPromise  */ /*  [Promises/A+ 2.3.3.3.2]  */\n\t\t\t\t\t\tfunction(r) {\n\t\t\t\t\t\t\tif (resolved) return; resolved = true; /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\t\tpromise.reject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tif (!resolved) /*  [Promises/A+ 2.3.3.3.3]  */\n\t\t\t\t\t\tpromise.reject(e); /*  [Promises/A+ 2.3.3.3.4]  */\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/*  handle other values  */\n\t\t\tpromise.fulfill(x); /*  [Promises/A+ 2.3.4, 2.3.3.4]  */\n\t\t};\n\n\t\t/*  export API  */\n\t\treturn api;\n\t})(),\n\n\t/* eslint-enable */\n\n\t// Event\n\t// A contructor superclass for adding event menthods, on, off, emit.\n\tEvent: function() {\n\n\t\tvar separator = /[\\s\\,]+/;\n\n\t\t// If this doesn't support getPrototype then we can't get prototype.events of the parent\n\t\t// So lets get the current instance events, and add those to a parent property\n\t\tthis.parent = {\n\t\t\tevents: this.events,\n\t\t\tfindEvents: this.findEvents,\n\t\t\tparent: this.parent,\n\t\t\tutils: this.utils\n\t\t};\n\n\t\tthis.events = {};\n\n\t\t// On, subscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.on = function(evt, callback) {\n\n\t\t\tif (callback && typeof (callback) === 'function') {\n\t\t\t\tvar a = evt.split(separator);\n\t\t\t\tfor (var i = 0; i < a.length; i++) {\n\n\t\t\t\t\t// Has this event already been fired on this instance?\n\t\t\t\t\tthis.events[a[i]] = [callback].concat(this.events[a[i]] || []);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Off, unsubscribe to events\n\t\t// @param evt   string\n\t\t// @param callback  function\n\t\tthis.off = function(evt, callback) {\n\n\t\t\tthis.findEvents(evt, function(name, index) {\n\t\t\t\tif (!callback || this.events[name][index] === callback) {\n\t\t\t\t\tthis.events[name][index] = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn this;\n\t\t};\n\n\t\t// Emit\n\t\t// Triggers any subscribed events\n\t\tthis.emit = function(evt /*, data, ... */) {\n\n\t\t\t// Get arguments as an Array, knock off the first one\n\t\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\t\targs.push(evt);\n\n\t\t\t// Handler\n\t\t\tvar handler = function(name, index) {\n\n\t\t\t\t// Replace the last property with the event name\n\t\t\t\targs[args.length - 1] = (name === '*' ? evt : name);\n\n\t\t\t\t// Trigger\n\t\t\t\tthis.events[name][index].apply(this, args);\n\t\t\t};\n\n\t\t\t// Find the callbacks which match the condition and call\n\t\t\tvar _this = this;\n\t\t\twhile (_this && _this.findEvents) {\n\n\t\t\t\t// Find events which match\n\t\t\t\t_this.findEvents(evt + ',*', handler);\n\t\t\t\t_this = _this.parent;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t};\n\n\t\t//\n\t\t// Easy functions\n\t\tthis.emitAfter = function() {\n\t\t\tvar _this = this;\n\t\t\tvar args = arguments;\n\t\t\tsetTimeout(function() {\n\t\t\t\t_this.emit.apply(_this, args);\n\t\t\t}, 0);\n\n\t\t\treturn this;\n\t\t};\n\n\t\tthis.findEvents = function(evt, callback) {\n\n\t\t\tvar a = evt.split(separator);\n\n\t\t\tfor (var name in this.events) {if (this.events.hasOwnProperty(name)) {\n\n\t\t\t\tif (a.indexOf(name) > -1) {\n\n\t\t\t\t\tfor (var i = 0; i < this.events[name].length; i++) {\n\n\t\t\t\t\t\t// Does the event handler exist?\n\t\t\t\t\t\tif (this.events[name][i]) {\n\t\t\t\t\t\t\t// Emit on the local instance of this\n\t\t\t\t\t\t\tcallback.call(this, name, i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}}\n\t\t};\n\n\t\treturn this;\n\t},\n\n\t// Global Events\n\t// Attach the callback to the window object\n\t// Return its unique reference\n\tglobalEvent: function(callback, guid) {\n\t\t// If the guid has not been supplied then create a new one.\n\t\tguid = guid || '_hellojs_' + parseInt(Math.random() * 1e12, 10).toString(36);\n\n\t\t// Define the callback function\n\t\twindow[guid] = function() {\n\t\t\t// Trigger the callback\n\t\t\ttry {\n\t\t\t\tif (callback.apply(this, arguments)) {\n\t\t\t\t\tdelete window[guid];\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\treturn guid;\n\t},\n\n\t// Trigger a clientside popup\n\t// This has been augmented to support PhoneGap\n\tpopup: function(url, redirectUri, options) {\n\n\t\tvar documentElement = document.documentElement;\n\n\t\t// Multi Screen Popup Positioning (http://stackoverflow.com/a/16861050)\n\t\t// Credit: http://www.xtf.dk/2011/08/center-new-popup-window-even-on.html\n\t\t// Fixes dual-screen position                         Most browsers      Firefox\n\n\t\tif (options.height && options.top === undefined) {\n\t\t\tvar dualScreenTop = window.screenTop !== undefined ? window.screenTop : screen.top;\n\t\t\tvar height = screen.height || window.innerHeight || documentElement.clientHeight;\n\t\t\toptions.top = parseInt((height - options.height) / 2, 10) + dualScreenTop;\n\t\t}\n\n\t\tif (options.width && options.left === undefined) {\n\t\t\tvar dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : screen.left;\n\t\t\tvar width = screen.width || window.innerWidth || documentElement.clientWidth;\n\t\t\toptions.left = parseInt((width - options.width) / 2, 10) + dualScreenLeft;\n\t\t}\n\n\t\t// Convert options into an array\n\t\tvar optionsArray = [];\n\t\tObject.keys(options).forEach(function(name) {\n\t\t\tvar value = options[name];\n\t\t\toptionsArray.push(name + (value !== null ? '=' + value : ''));\n\t\t});\n\n\t\t// Call the open() function with the initial path\n\t\t//\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\t//\n\t\t// Firefox  decodes URL fragments when calling location.hash.\n\t\t//  - This is bad if the value contains break points which are escaped\n\t\t//  - Hence the url must be encoded twice as it contains breakpoints.\n\t\tif (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n\t\t\turl = redirectUri + '#oauth_redirect=' + encodeURIComponent(encodeURIComponent(url));\n\t\t}\n\n\t\tvar popup = window.open(\n\t\t\turl,\n\t\t\t'_blank',\n\t\t\toptionsArray.join(',')\n\t\t);\n\n\t\tif (popup && popup.focus) {\n\t\t\tpopup.focus();\n\t\t}\n\n\t\treturn popup;\n\t},\n\n\t// OAuth and API response handler\n\tresponseHandler: function(window, parent) {\n\n\t\tvar _this = this;\n\t\tvar p;\n\t\tvar location = window.location;\n\n\t\t// Is this an auth relay message which needs to call the proxy?\n\t\tp = _this.param(location.search);\n\n\t\t// OAuth2 or OAuth1 server response?\n\t\tif (p && p.state && (p.code || p.oauth_token)) {\n\n\t\t\ttry {\n\t\t\t\tvar state = JSON.parse(p.state);\n\n\t\t\t\t// Add this path as the redirect_uri\n\t\t\t\tp.redirect_uri = state.redirect_uri || location.href.replace(/[\\?\\#].*$/, '');\n\n\t\t\t\t// Redirect to the host\n\t\t\t\tvar path = _this.qs(state.oauth_proxy, p);\n\n\n\t\t\t\tif (isValidUrl(path)) {\n\t\t\t\t\tlocation.assign(path);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tconsole.error('Could not decode state parameter', e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Save session, from redirected authentication\n\t\t// #access_token has come in?\n\t\t//\n\t\t// FACEBOOK is returning auth errors within as a query_string... thats a stickler for consistency.\n\t\t// SoundCloud is the state in the querystring and the token in the hashtag, so we'll mix the two together\n\n\t\tp = _this.merge(_this.param(location.search || ''), _this.param(location.hash || ''));\n\n\t\t// If p.state\n\t\tif (p && 'state' in p) {\n\n\t\t\t// Remove any addition information\n\t\t\t// E.g. p.state = 'facebook.page';\n\t\t\ttry {\n\t\t\t\tvar a = JSON.parse(p.state);\n\t\t\t\t_this.extend(p, a);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tvar stateDecoded = decodeURIComponent(p.state);\n\t\t\t\ttry {\n\t\t\t\t\tvar b = JSON.parse(stateDecoded);\n\t\t\t\t\t_this.extend(p, b);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tconsole.error('Could not decode state parameter');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Access_token?\n\t\t\tif (('access_token' in p && p.access_token) && p.network) {\n\n\t\t\t\tif (!p.expires_in || parseInt(p.expires_in, 10) === 0) {\n\t\t\t\t\t// If p.expires_in is unset, set to 0\n\t\t\t\t\tp.expires_in = 0;\n\t\t\t\t}\n\n\t\t\t\tp.expires_in = parseInt(p.expires_in, 10);\n\t\t\t\tp.expires = ((new Date()).getTime() / 1e3) + (p.expires_in || (60 * 60 * 24 * 365));\n\n\t\t\t\t// Lets use the \"state\" to assign it to one of our networks\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// Error=?\n\t\t\t// &error_description=?\n\t\t\t// &state=?\n\t\t\telse if (('error' in p && p.error) && p.network) {\n\n\t\t\t\tp.error = {\n\t\t\t\t\tcode: p.error,\n\t\t\t\t\tmessage: p.error_message || p.error_description\n\t\t\t\t};\n\n\t\t\t\t// Let the state handler handle it\n\t\t\t\tauthCallback(p, window, parent);\n\t\t\t}\n\n\t\t\t// API call, or a cancelled login\n\t\t\t// Result is serialized JSON string\n\t\t\telse if (p.callback && p.callback in parent) {\n\n\t\t\t\t// Trigger a function in the parent\n\t\t\t\tvar res = 'result' in p && p.result ? JSON.parse(p.result) : false;\n\n\t\t\t\t// Trigger the callback on the parent\n\t\t\t\tcallback(parent, p.callback)(res);\n\t\t\t\tcloseWindow();\n\t\t\t}\n\n\t\t\t// If this page is still open\n\t\t\tif (p.page_uri && isValidUrl(p.page_uri)) {\n\t\t\t\tlocation.assign(p.page_uri);\n\t\t\t}\n\t\t}\n\n\t\t// OAuth redirect, fixes URI fragments from being lost in Safari\n\t\t// (URI Fragments within 302 Location URI are lost over HTTPS)\n\t\t// Loading the redirect.html before triggering the OAuth Flow seems to fix it.\n\t\telse if ('oauth_redirect' in p) {\n\t\t\tvar url = decodeURIComponent(p.oauth_redirect);\n\n\t\t\tif (isValidUrl(url)) {\n\t\t\t\tlocation.assign(url);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tfunction isValidUrl(url) {\n\t\t\tvar regexp = /^https?:/;\n\t\t\treturn regexp.test(url)\n\n\t\t\t\t// If `HELLOJS_REDIRECT_URL` is defined in the window context, validate that the URL matches it.\n\t\t\t\t&& (\n\t\t\t\t\t!Object.prototype.hasOwnProperty.call(window, 'HELLOJS_REDIRECT_URL')\n\t\t\t\t\t||\n\t\t\t\t\turl.match(window.HELLOJS_REDIRECT_URL)\n\t\t\t\t);\n\t\t}\n\n\t\t// Trigger a callback to authenticate\n\t\tfunction authCallback(obj, window, parent) {\n\n\t\t\tvar cb = obj.callback;\n\t\t\tvar network = obj.network;\n\n\t\t\t// Trigger the callback on the parent\n\t\t\t_this.store(network, obj);\n\n\t\t\t// If this is a page request it has no parent or opener window to handle callbacks\n\t\t\tif (('display' in obj) && obj.display === 'page') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Remove from session object\n\t\t\tif (parent && cb && cb in parent) {\n\n\t\t\t\ttry {\n\t\t\t\t\tdelete obj.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t_this.store(network, obj);\n\n\t\t\t\t// Call the globalEvent function on the parent\n\t\t\t\t// It's safer to pass back a string to the parent,\n\t\t\t\t// Rather than an object/array (better for IE8)\n\t\t\t\tvar str = JSON.stringify(obj);\n\n\t\t\t\ttry {\n\t\t\t\t\tcallback(parent, cb)(str);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\t// Error thrown whilst executing parent callback\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcloseWindow();\n\t\t}\n\n\t\tfunction callback(parent, callbackID) {\n\t\t\tif (callbackID.indexOf('_hellojs_') !== 0) {\n\t\t\t\treturn function() {\n\t\t\t\t\tthrow 'Could not execute callback ' + callbackID;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn parent[callbackID];\n\t\t}\n\n\t\tfunction closeWindow() {\n\n\t\t\tif (window.frameElement) {\n\t\t\t\t// Inside an iframe, remove from parent\n\t\t\t\tparent.document.body.removeChild(window.frameElement);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close this current window\n\t\t\t\ttry {\n\t\t\t\t\twindow.close();\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// IOS bug wont let us close a popup if still loading\n\t\t\t\tif (window.addEventListener) {\n\t\t\t\t\twindow.addEventListener('load', function() {\n\t\t\t\t\t\twindow.close();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n});\n\n// Events\n// Extend the hello object with its own event instance\nhello.utils.Event.call(hello);\n\n///////////////////////////////////\n// Monitoring session state\n// Check for session changes\n///////////////////////////////////\n\n(function(hello) {\n\n\t// Monitor for a change in state and fire\n\tvar oldSessions = {};\n\n\t// Hash of expired tokens\n\tvar expired = {};\n\n\t// Listen to other triggers to Auth events, use these to update this\n\thello.on('auth.login, auth.logout', function(auth) {\n\t\tif (auth && typeof (auth) === 'object' && auth.network) {\n\t\t\toldSessions[auth.network] = hello.utils.store(auth.network) || {};\n\t\t}\n\t});\n\n\t(function self() {\n\n\t\tvar CURRENT_TIME = ((new Date()).getTime() / 1e3);\n\t\tvar emit = function(eventName) {\n\t\t\thello.emit('auth.' + eventName, {\n\t\t\t\tnetwork: name,\n\t\t\t\tauthResponse: session\n\t\t\t});\n\t\t};\n\n\t\t// Loop through the services\n\t\tfor (var name in hello.services) {if (hello.services.hasOwnProperty(name)) {\n\n\t\t\tif (!hello.services[name].id) {\n\t\t\t\t// We haven't attached an ID so dont listen.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Get session\n\t\t\tvar session = hello.utils.store(name) || {};\n\t\t\tvar provider = hello.services[name];\n\t\t\tvar oldSess = oldSessions[name] || {};\n\n\t\t\t// Listen for globalEvents that did not get triggered from the child\n\t\t\tif (session && 'callback' in session) {\n\n\t\t\t\t// To do remove from session object...\n\t\t\t\tvar cb = session.callback;\n\t\t\t\ttry {\n\t\t\t\t\tdelete session.callback;\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\n\t\t\t\t// Update store\n\t\t\t\t// Removing the callback\n\t\t\t\thello.utils.store(name, session);\n\n\t\t\t\t// Emit global events\n\t\t\t\ttry {\n\t\t\t\t\twindow[cb](session);\n\t\t\t\t}\n\t\t\t\tcatch (e) {}\n\t\t\t}\n\n\t\t\t// Refresh token\n\t\t\tif (session && ('expires' in session) && session.expires < CURRENT_TIME) {\n\n\t\t\t\t// If auto refresh is possible\n\t\t\t\t// Either the browser supports\n\t\t\t\tvar refresh = provider.refresh || session.refresh_token;\n\n\t\t\t\t// Has the refresh been run recently?\n\t\t\t\tif (refresh && (!(name in expired) || expired[name] < CURRENT_TIME)) {\n\t\t\t\t\t// Try to resignin\n\t\t\t\t\thello.emit('notice', name + ' has expired trying to resignin');\n\t\t\t\t\thello.login(name, {display: 'none', force: false});\n\n\t\t\t\t\t// Update expired, every 10 minutes\n\t\t\t\t\texpired[name] = CURRENT_TIME + 600;\n\t\t\t\t}\n\n\t\t\t\t// Does this provider not support refresh\n\t\t\t\telse if (!refresh && !(name in expired)) {\n\t\t\t\t\t// Label the event\n\t\t\t\t\temit('expired');\n\t\t\t\t\texpired[name] = true;\n\t\t\t\t}\n\n\t\t\t\t// If session has expired then we dont want to store its value until it can be established that its been updated\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Has session changed?\n\t\t\telse if (oldSess.access_token === session.access_token &&\n\t\t\toldSess.expires === session.expires) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Access_token has been removed\n\t\t\telse if (!session.access_token && oldSess.access_token) {\n\t\t\t\temit('logout');\n\t\t\t}\n\n\t\t\t// Access_token has been created\n\t\t\telse if (session.access_token && !oldSess.access_token) {\n\t\t\t\temit('login');\n\t\t\t}\n\n\t\t\t// Access_token has been updated\n\t\t\telse if (session.expires !== oldSess.expires) {\n\t\t\t\temit('update');\n\t\t\t}\n\n\t\t\t// Updated stored session\n\t\t\toldSessions[name] = session;\n\n\t\t\t// Remove the expired flags\n\t\t\tif (name in expired) {\n\t\t\t\tdelete expired[name];\n\t\t\t}\n\t\t}}\n\n\t\t// Check error events\n\t\tsetTimeout(self, 1000);\n\t})();\n\n})(hello);\n\n// EOF CORE lib\n//////////////////////////////////\n\n/////////////////////////////////////////\n// API\n// @param path    string\n// @param query   object (optional)\n// @param method  string (optional)\n// @param data    object (optional)\n// @param timeout integer (optional)\n// @param callback  function (optional)\n\nhello.api = function() {\n\n\t// Shorthand\n\tvar _this = this;\n\tvar utils = _this.utils;\n\tvar error = utils.error;\n\n\t// Construct a new Promise object\n\tvar promise = utils.Promise();\n\n\t// Arguments\n\tvar p = utils.args({path: 's!', query: 'o', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t// Method\n\tp.method = (p.method || 'get').toLowerCase();\n\n\t// Headers\n\tp.headers = p.headers || {};\n\n\t// Query\n\tp.query = p.query || {};\n\n\t// If get, put all parameters into query\n\tif (p.method === 'get' || p.method === 'delete') {\n\t\tutils.extend(p.query, p.data);\n\t\tp.data = {};\n\t}\n\n\tvar data = p.data = p.data || {};\n\n\t// Completed event callback\n\tpromise.then(p.callback, p.callback);\n\n\t// Remove the network from path, e.g. facebook:/me/friends\n\t// Results in { network : facebook, path : me/friends }\n\tif (!p.path) {\n\t\treturn promise.reject(error('invalid_path', 'Missing the path parameter from the request'));\n\t}\n\n\tp.path = p.path.replace(/^\\/+/, '');\n\tvar a = (p.path.split(/[\\/\\:]/, 2) || [])[0].toLowerCase();\n\n\tif (a in _this.services) {\n\t\tp.network = a;\n\t\tvar reg = new RegExp('^' + a + ':?\\/?');\n\t\tp.path = p.path.replace(reg, '');\n\t}\n\n\t// Network & Provider\n\t// Define the network that this request is made for\n\tp.network = _this.settings.default_service = p.network || _this.settings.default_service;\n\tvar o = _this.services[p.network];\n\n\t// INVALID\n\t// Is there no service by the given network name?\n\tif (!o) {\n\t\treturn promise.reject(error('invalid_network', 'Could not match the service requested: ' + p.network));\n\t}\n\n\t// PATH\n\t// As long as the path isn't flagged as unavaiable, e.g. path == false\n\n\tif (!(!(p.method in o) || !(p.path in o[p.method]) || o[p.method][p.path] !== false)) {\n\t\treturn promise.reject(error('invalid_path', 'The provided path is not available on the selected network'));\n\t}\n\n\t// PROXY\n\t// OAuth1 calls always need a proxy\n\n\tif (!p.oauth_proxy) {\n\t\tp.oauth_proxy = _this.settings.oauth_proxy;\n\t}\n\n\tif (!('proxy' in p)) {\n\t\tp.proxy = p.oauth_proxy && o.oauth && parseInt(o.oauth.version, 10) === 1;\n\t}\n\n\t// TIMEOUT\n\t// Adopt timeout from global settings by default\n\n\tif (!('timeout' in p)) {\n\t\tp.timeout = _this.settings.timeout;\n\t}\n\n\t// Format response\n\t// Whether to run the raw response through post processing.\n\tif (!('formatResponse' in p)) {\n\t\tp.formatResponse = true;\n\t}\n\n\t// Get the current session\n\t// Append the access_token to the query\n\tp.authResponse = _this.getAuthResponse(p.network);\n\tif (p.authResponse && p.authResponse.access_token) {\n\t\tp.query.access_token = p.authResponse.access_token;\n\t}\n\n\tvar url = p.path;\n\tvar m;\n\n\t// Store the query as options\n\t// This is used to populate the request object before the data is augmented by the prewrap handlers.\n\tp.options = utils.clone(p.query);\n\n\t// Clone the data object\n\t// Prevent this script overwriting the data of the incoming object.\n\t// Ensure that everytime we run an iteration the callbacks haven't removed some data\n\tp.data = utils.clone(data);\n\n\t// URL Mapping\n\t// Is there a map for the given URL?\n\tvar actions = o[{'delete': 'del'}[p.method] || p.method] || {};\n\n\t// Extrapolate the QueryString\n\t// Provide a clean path\n\t// Move the querystring into the data\n\tif (p.method === 'get') {\n\n\t\tvar query = url.split(/[\\?#]/)[1];\n\t\tif (query) {\n\t\t\tutils.extend(p.query, utils.param(query));\n\n\t\t\t// Remove the query part from the URL\n\t\t\turl = url.replace(/\\?.*?(#|$)/, '$1');\n\t\t}\n\t}\n\n\t// Is the hash fragment defined\n\tif ((m = url.match(/#(.+)/, ''))) {\n\t\turl = url.split('#')[0];\n\t\tp.path = m[1];\n\t}\n\telse if (url in actions) {\n\t\tp.path = url;\n\t\turl = actions[url];\n\t}\n\telse if ('default' in actions) {\n\t\turl = actions['default'];\n\t}\n\n\t// Redirect Handler\n\t// This defines for the Form+Iframe+Hash hack where to return the results too.\n\tp.redirect_uri = _this.settings.redirect_uri;\n\n\t// Define FormatHandler\n\t// The request can be procesed in a multitude of ways\n\t// Here's the options - depending on the browser and endpoint\n\tp.xhr = o.xhr;\n\tp.jsonp = o.jsonp;\n\tp.form = o.form;\n\n\t// Make request\n\tif (typeof (url) === 'function') {\n\t\t// Does self have its own callback?\n\t\turl(p, getPath);\n\t}\n\telse {\n\t\t// Else the URL is a string\n\t\tgetPath(url);\n\t}\n\n\treturn promise.proxy;\n\n\t// If url needs a base\n\t// Wrap everything in\n\tfunction getPath(url) {\n\n\t\t// Format the string if it needs it\n\t\turl = url.replace(/\\@\\{([a-z\\_\\-]+)(\\|.*?)?\\}/gi, function(m, key, defaults) {\n\t\t\tvar val = defaults ? defaults.replace(/^\\|/, '') : '';\n\t\t\tif (key in p.query) {\n\t\t\t\tval = p.query[key];\n\t\t\t\tdelete p.query[key];\n\t\t\t}\n\t\t\telse if (p.data && key in p.data) {\n\t\t\t\tval = p.data[key];\n\t\t\t\tdelete p.data[key];\n\t\t\t}\n\t\t\telse if (!defaults) {\n\t\t\t\tpromise.reject(error('missing_attribute', 'The attribute ' + key + ' is missing from the request'));\n\t\t\t}\n\n\t\t\treturn val;\n\t\t});\n\n\t\t// Add base\n\t\tif (!url.match(/^https?:\\/\\//)) {\n\t\t\turl = o.base + url;\n\t\t}\n\n\t\t// Define the request URL\n\t\tp.url = url;\n\n\t\t// Make the HTTP request with the curated request object\n\t\t// CALLBACK HANDLER\n\t\t// @ response object\n\t\t// @ statusCode integer if available\n\t\tutils.request(p, function(r, headers) {\n\n\t\t\t// Is this a raw response?\n\t\t\tif (!p.formatResponse) {\n\t\t\t\t// Bad request? error statusCode or otherwise contains an error response vis JSONP?\n\t\t\t\tif (typeof headers === 'object' ? (headers.statusCode >= 400) : (typeof r === 'object' && 'error' in r)) {\n\t\t\t\t\tpromise.reject(r);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpromise.fulfill(r);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Should this be an object\n\t\t\tif (r === true) {\n\t\t\t\tr = {success: true};\n\t\t\t}\n\t\t\telse if (!r) {\n\t\t\t\tr = {};\n\t\t\t}\n\n\t\t\t// The delete callback needs a better response\n\t\t\tif (p.method === 'delete') {\n\t\t\t\tr = (!r || utils.isEmpty(r)) ? {success: true} : r;\n\t\t\t}\n\n\t\t\t// FORMAT RESPONSE?\n\t\t\t// Does self request have a corresponding formatter\n\t\t\tif (o.wrap && ((p.path in o.wrap) || ('default' in o.wrap))) {\n\t\t\t\tvar wrap = (p.path in o.wrap ? p.path : 'default');\n\t\t\t\tvar time = (new Date()).getTime();\n\n\t\t\t\t// FORMAT RESPONSE\n\t\t\t\tvar b = o.wrap[wrap](r, headers, p);\n\n\t\t\t\t// Has the response been utterly overwritten?\n\t\t\t\t// Typically self augments the existing object.. but for those rare occassions\n\t\t\t\tif (b) {\n\t\t\t\t\tr = b;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Is there a next_page defined in the response?\n\t\t\tif (r && 'paging' in r && r.paging.next) {\n\n\t\t\t\t// Add the relative path if it is missing from the paging/next path\n\t\t\t\tif (r.paging.next[0] === '?') {\n\t\t\t\t\tr.paging.next = p.path + r.paging.next;\n\t\t\t\t}\n\n\t\t\t\t// The relative path has been defined, lets markup the handler in the HashFragment\n\t\t\t\telse {\n\t\t\t\t\tr.paging.next += '#' + p.path;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Dispatch to listeners\n\t\t\t// Emit events which pertain to the formatted response\n\t\t\tif (!r || 'error' in r) {\n\t\t\t\tpromise.reject(r);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise.fulfill(r);\n\t\t\t}\n\t\t});\n\t}\n};\n\n// API utilities\nhello.utils.extend(hello.utils, {\n\n\t// Make an HTTP request\n\trequest: function(p, callback) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// This has to go through a POST request\n\t\tif (!_this.isEmpty(p.data) && !('FileList' in window) && _this.hasBinary(p.data)) {\n\n\t\t\t// Disable XHR and JSONP\n\t\t\tp.xhr = false;\n\t\t\tp.jsonp = false;\n\t\t}\n\n\t\t// Check if the browser and service support CORS\n\t\tvar cors = this.request_cors(function() {\n\t\t\t// If it does then run this...\n\t\t\treturn ((p.xhr === undefined) || (p.xhr && (typeof (p.xhr) !== 'function' || p.xhr(p, p.query))));\n\t\t});\n\n\t\tif (cors) {\n\n\t\t\tformatUrl(p, function(url) {\n\n\t\t\t\tvar x = _this.xhr(p.method, url, p.headers, p.data, callback);\n\t\t\t\tx.onprogress = p.onprogress || null;\n\n\t\t\t\t// Windows Phone does not support xhr.upload, see #74\n\t\t\t\t// Feature detect\n\t\t\t\tif (x.upload && p.onuploadprogress) {\n\t\t\t\t\tx.upload.onprogress = p.onuploadprogress;\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Clone the query object\n\t\t// Each request modifies the query object and needs to be tared after each one.\n\t\tvar _query = p.query;\n\n\t\tp.query = _this.clone(p.query);\n\n\t\t// Assign a new callbackID\n\t\tp.callbackID = _this.globalEvent();\n\n\t\t// JSONP\n\t\tif (p.jsonp !== false) {\n\n\t\t\t// Clone the query object\n\t\t\tp.query.callback = p.callbackID;\n\n\t\t\t// If the JSONP is a function then run it\n\t\t\tif (typeof (p.jsonp) === 'function') {\n\t\t\t\tp.jsonp(p, p.query);\n\t\t\t}\n\n\t\t\t// Lets use JSONP if the method is 'get'\n\t\t\tif (p.method === 'get') {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.jsonp(url, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// It's not compatible reset query\n\t\t\t\tp.query = _query;\n\t\t\t}\n\n\t\t}\n\n\t\t// Otherwise we're on to the old school, iframe hacks and JSONP\n\t\tif (p.form !== false) {\n\n\t\t\t// Add some additional query parameters to the URL\n\t\t\t// We're pretty stuffed if the endpoint doesn't like these\n\t\t\tp.query.redirect_uri = p.redirect_uri;\n\t\t\tp.query.state = JSON.stringify({callback: p.callbackID});\n\n\t\t\tvar opts;\n\n\t\t\tif (typeof (p.form) === 'function') {\n\n\t\t\t\t// Format the request\n\t\t\t\topts = p.form(p, p.query);\n\t\t\t}\n\n\t\t\tif (p.method === 'post' && opts !== false) {\n\n\t\t\t\tformatUrl(p, function(url) {\n\t\t\t\t\t_this.post(url, p.data, opts, callback, p.callbackID, p.timeout);\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// None of the methods were successful throw an error\n\t\tcallback(error('invalid_request', 'There was no mechanism for handling this request'));\n\n\t\treturn;\n\n\t\t// Format URL\n\t\t// Constructs the request URL, optionally wraps the URL through a call to a proxy server\n\t\t// Returns the formatted URL\n\t\tfunction formatUrl(p, callback) {\n\n\t\t\t// Are we signing the request?\n\t\t\tvar sign;\n\n\t\t\t// OAuth1\n\t\t\t// Remove the token from the query before signing\n\t\t\tif (p.authResponse && p.authResponse.oauth && parseInt(p.authResponse.oauth.version, 10) === 1) {\n\n\t\t\t\t// OAUTH SIGNING PROXY\n\t\t\t\tsign = p.query.access_token;\n\n\t\t\t\t// Remove the access_token\n\t\t\t\tdelete p.query.access_token;\n\n\t\t\t\t// Enfore use of Proxy\n\t\t\t\tp.proxy = true;\n\t\t\t}\n\n\t\t\t// POST body to querystring\n\t\t\tif (p.data && (p.method === 'get' || p.method === 'delete')) {\n\t\t\t\t// Attach the p.data to the querystring.\n\t\t\t\t_this.extend(p.query, p.data);\n\t\t\t\tp.data = null;\n\t\t\t}\n\n\t\t\t// Construct the path\n\t\t\tvar path = _this.qs(p.url, p.query);\n\n\t\t\t// Proxy the request through a server\n\t\t\t// Used for signing OAuth1\n\t\t\t// And circumventing services without Access-Control Headers\n\t\t\tif (p.proxy) {\n\t\t\t\t// Use the proxy as a path\n\t\t\t\tpath = _this.qs(p.oauth_proxy, {\n\t\t\t\t\tpath: path,\n\t\t\t\t\taccess_token: sign || '',\n\n\t\t\t\t\t// This will prompt the request to be signed as though it is OAuth1\n\t\t\t\t\tthen: p.proxy_response_type || (p.method.toLowerCase() === 'get' ? 'redirect' : 'proxy'),\n\t\t\t\t\tmethod: p.method.toLowerCase(),\n\t\t\t\t\tsuppress_response_codes: p.suppress_response_codes || true\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcallback(path);\n\t\t}\n\t},\n\n\t// Test whether the browser supports the CORS response\n\trequest_cors: function(callback) {\n\t\treturn 'withCredentials' in new XMLHttpRequest() && callback();\n\t},\n\n\t// Return the type of DOM object\n\tdomInstance: function(type, data) {\n\t\tvar test = 'HTML' + (type || '').replace(\n\t\t\t/^[a-z]/,\n\t\t\tfunction(m) {\n\t\t\t\treturn m.toUpperCase();\n\t\t\t}\n\n\t\t) + 'Element';\n\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (window[test]) {\n\t\t\treturn data instanceof window[test];\n\t\t}\n\t\telse if (window.Element) {\n\t\t\treturn data instanceof window.Element && (!type || (data.tagName && data.tagName.toLowerCase() === type));\n\t\t}\n\t\telse {\n\t\t\treturn (!(data instanceof Object || data instanceof Array || data instanceof String || data instanceof Number) && data.tagName && data.tagName.toLowerCase() === type);\n\t\t}\n\t},\n\n\t// Create a clone of an object\n\tclone: function(obj) {\n\t\t// Does not clone DOM elements, nor Binary data, e.g. Blobs, Filelists\n\t\tif (obj === null || typeof (obj) !== 'object' || obj instanceof Date || 'nodeName' in obj || this.isBinary(obj) || (typeof FormData === 'function' && obj instanceof FormData)) {\n\t\t\treturn obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\t// Clone each item in the array\n\t\t\treturn obj.map(this.clone.bind(this));\n\t\t}\n\n\t\t// But does clone everything else.\n\t\tvar clone = {};\n\t\tfor (var x in obj) {\n\t\t\tclone[x] = this.clone(obj[x]);\n\t\t}\n\n\t\treturn clone;\n\t},\n\n\t// XHR: uses CORS to make requests\n\txhr: function(method, url, headers, data, callback) {\n\n\t\tvar r = new XMLHttpRequest();\n\t\tvar error = this.error;\n\n\t\t// Binary?\n\t\tvar binary = false;\n\t\tif (method === 'blob') {\n\t\t\tbinary = method;\n\t\t\tmethod = 'GET';\n\t\t}\n\n\t\tmethod = method.toUpperCase();\n\n\t\t// Xhr.responseType 'json' is not supported in any of the vendors yet.\n\t\tr.onload = function(e) {\n\t\t\tvar json = r.response;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {\n\t\t\t\tif (r.status === 401) {\n\t\t\t\t\tjson = error('access_denied', r.statusText);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar headers = headersToJSON(r.getAllResponseHeaders());\n\t\t\theaders.statusCode = r.status;\n\n\t\t\tcallback(json || (method === 'GET' ? error('empty_response', 'Could not get resource') : {}), headers);\n\t\t};\n\n\t\tr.onerror = function(e) {\n\t\t\tvar json = r.responseText;\n\t\t\ttry {\n\t\t\t\tjson = JSON.parse(r.responseText);\n\t\t\t}\n\t\t\tcatch (_e) {}\n\n\t\t\tcallback(json || error('access_denied', 'Could not get resource'));\n\t\t};\n\n\t\tvar x;\n\n\t\t// Should we add the query to the URL?\n\t\tif (method === 'GET' || method === 'DELETE') {\n\t\t\tdata = null;\n\t\t}\n\t\telse if (data && typeof (data) !== 'string' && !(data instanceof FormData) && !(data instanceof File) && !(data instanceof Blob)) {\n\t\t\t// Loop through and add formData\n\t\t\tvar f = new FormData();\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\tif (data[x] instanceof HTMLInputElement) {\n\t\t\t\t\tif ('files' in data[x] && data[x].files.length > 0) {\n\t\t\t\t\t\tf.append(x, data[x].files[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (data[x] instanceof Blob) {\n\t\t\t\t\tf.append(x, data[x], data.name);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf.append(x, data[x]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata = f;\n\t\t}\n\n\t\t// Open the path, async\n\t\tr.open(method, url, true);\n\n\t\tif (binary) {\n\t\t\tif ('responseType' in r) {\n\t\t\t\tr.responseType = binary;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tr.overrideMimeType('text/plain; charset=x-user-defined');\n\t\t\t}\n\t\t}\n\n\t\t// Set any bespoke headers\n\t\tif (headers) {\n\t\t\tfor (x in headers) {\n\t\t\t\tr.setRequestHeader(x, headers[x]);\n\t\t\t}\n\t\t}\n\n\t\tr.send(data);\n\n\t\treturn r;\n\n\t\t// Headers are returned as a string\n\t\tfunction headersToJSON(s) {\n\t\t\tvar r = {};\n\t\t\tvar reg = /([a-z\\-]+):\\s?(.*);?/gi;\n\t\t\tvar m;\n\t\t\twhile ((m = reg.exec(s))) {\n\t\t\t\tr[m[1]] = m[2];\n\t\t\t}\n\n\t\t\treturn r;\n\t\t}\n\t},\n\n\t// JSONP\n\t// Injects a script tag into the DOM to be executed and appends a callback function to the window object\n\t// @param string/function pathFunc either a string of the URL or a callback function pathFunc(querystringhash, continueFunc);\n\t// @param function callback a function to call on completion;\n\tjsonp: function(url, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\n\t\t// Change the name of the callback\n\t\tvar bool = 0;\n\t\tvar head = document.getElementsByTagName('head')[0];\n\t\tvar operaFix;\n\t\tvar result = error('server_error', 'server_error');\n\t\tvar cb = function() {\n\t\t\tif (!(bool++)) {\n\t\t\t\twindow.setTimeout(function() {\n\t\t\t\t\tcallback(result);\n\t\t\t\t\thead.removeChild(script);\n\t\t\t\t}, 0);\n\t\t\t}\n\n\t\t};\n\n\t\t// Add callback to the window object\n\t\tcallbackID = _this.globalEvent(function(json) {\n\t\t\tresult = json;\n\t\t\treturn true;\n\n\t\t\t// Mark callback as done\n\t\t}, callbackID);\n\n\t\t// The URL is a function for some cases and as such\n\t\t// Determine its value with a callback containing the new parameters of this function.\n\t\turl = url.replace(new RegExp('=\\\\?(&|$)'), '=' + callbackID + '$1');\n\n\t\t// Build script tag\n\t\tvar script = _this.append('script', {\n\t\t\tid: callbackID,\n\t\t\tname: callbackID,\n\t\t\tsrc: url,\n\t\t\tasync: true,\n\t\t\tonload: cb,\n\t\t\tonerror: cb,\n\t\t\tonreadystatechange: function() {\n\t\t\t\tif (/loaded|complete/i.test(this.readyState)) {\n\t\t\t\t\tcb();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Opera fix error\n\t\t// Problem: If an error occurs with script loading Opera fails to trigger the script.onerror handler we specified\n\t\t//\n\t\t// Fix:\n\t\t// By setting the request to synchronous we can trigger the error handler when all else fails.\n\t\t// This action will be ignored if we've already called the callback handler \"cb\" with a successful onload event\n\t\tif (window.navigator.userAgent.toLowerCase().indexOf('opera') > -1) {\n\t\t\toperaFix = _this.append('script', {\n\t\t\t\ttext: 'document.getElementById(\\'' + callbackID + '\\').onerror();'\n\t\t\t});\n\t\t\tscript.async = false;\n\t\t}\n\n\t\t// Add timeout\n\t\tif (timeout) {\n\t\t\twindow.setTimeout(function() {\n\t\t\t\tresult = error('timeout', 'timeout');\n\t\t\t\tcb();\n\t\t\t}, timeout);\n\t\t}\n\n\t\t// TODO: add fix for IE,\n\t\t// However: unable recreate the bug of firing off the onreadystatechange before the script content has been executed and the value of \"result\" has been defined.\n\t\t// Inject script tag into the head element\n\t\thead.appendChild(script);\n\n\t\t// Append Opera Fix to run after our script\n\t\tif (operaFix) {\n\t\t\thead.appendChild(operaFix);\n\t\t}\n\t},\n\n\t// Post\n\t// Send information to a remote location using the post mechanism\n\t// @param string uri path\n\t// @param object data, key value data to send\n\t// @param function callback, function to execute in response\n\tpost: function(url, data, options, callback, callbackID, timeout) {\n\n\t\tvar _this = this;\n\t\tvar error = _this.error;\n\t\tvar doc = document;\n\n\t\t// This hack needs a form\n\t\tvar form = null;\n\t\tvar reenableAfterSubmit = [];\n\t\tvar newform;\n\t\tvar i = 0;\n\t\tvar x = null;\n\t\tvar bool = 0;\n\t\tvar cb = function(r) {\n\t\t\tif (!(bool++)) {\n\t\t\t\tcallback(r);\n\t\t\t}\n\t\t};\n\n\t\t// What is the name of the callback to contain\n\t\t// We'll also use this to name the iframe\n\t\t_this.globalEvent(cb, callbackID);\n\n\t\t// Build the iframe window\n\t\tvar win;\n\t\ttry {\n\t\t\t// IE7 hack, only lets us define the name here, not later.\n\t\t\twin = doc.createElement('<iframe name=\"' + callbackID + '\">');\n\t\t}\n\t\tcatch (e) {\n\t\t\twin = doc.createElement('iframe');\n\t\t}\n\n\t\twin.name = callbackID;\n\t\twin.id = callbackID;\n\t\twin.style.display = 'none';\n\n\t\t// Override callback mechanism. Triggger a response onload/onerror\n\t\tif (options && options.callbackonload) {\n\t\t\t// Onload is being fired twice\n\t\t\twin.onload = function() {\n\t\t\t\tcb({\n\t\t\t\t\tresponse: 'posted',\n\t\t\t\t\tmessage: 'Content was posted'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tcb(error('timeout', 'The post operation timed out'));\n\t\t\t}, timeout);\n\t\t}\n\n\t\tdoc.body.appendChild(win);\n\n\t\t// If we are just posting a single item\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// Get the parent form\n\t\t\tform = data.form;\n\n\t\t\t// Loop through and disable all of its siblings\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (form.elements[i] !== data) {\n\t\t\t\t\tform.elements[i].setAttribute('disabled', true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Move the focus to the form\n\t\t\tdata = form;\n\t\t}\n\n\t\t// Posting a form\n\t\tif (_this.domInstance('form', data)) {\n\t\t\t// This is a form element\n\t\t\tform = data;\n\n\t\t\t// Does this form need to be a multipart form?\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\t\t\t\tif (!form.elements[i].disabled && form.elements[i].type === 'file') {\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t\tform.elements[i].setAttribute('name', 'file');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Its not a form element,\n\t\t\t// Therefore it must be a JSON object of Key=>Value or Key=>Element\n\t\t\t// If anyone of those values are a input type=file we shall shall insert its siblings into the form for which it belongs.\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\t\t\t\t// Is this an input Element?\n\t\t\t\tif (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\tform = data[x].form;\n\t\t\t\t\tform.encoding = form.enctype = 'multipart/form-data';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Do If there is no defined form element, lets create one.\n\t\t\tif (!form) {\n\t\t\t\t// Build form\n\t\t\t\tform = doc.createElement('form');\n\t\t\t\tdoc.body.appendChild(form);\n\t\t\t\tnewform = form;\n\t\t\t}\n\n\t\t\tvar input;\n\n\t\t\t// Add elements to the form if they dont exist\n\t\t\tfor (x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t// Is this an element?\n\t\t\t\tvar el = (_this.domInstance('input', data[x]) || _this.domInstance('textArea', data[x]) || _this.domInstance('select', data[x]));\n\n\t\t\t\t// Is this not an input element, or one that exists outside the form.\n\t\t\t\tif (!el || data[x].form !== form) {\n\n\t\t\t\t\t// Does an element have the same name?\n\t\t\t\t\tvar inputs = form.elements[x];\n\t\t\t\t\tif (input) {\n\t\t\t\t\t\t// Remove it.\n\t\t\t\t\t\tif (!(inputs instanceof NodeList)) {\n\t\t\t\t\t\t\tinputs = [inputs];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (i = 0; i < inputs.length; i++) {\n\t\t\t\t\t\t\tinputs[i].parentNode.removeChild(inputs[i]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create an input element\n\t\t\t\t\tinput = doc.createElement('input');\n\t\t\t\t\tinput.setAttribute('type', 'hidden');\n\t\t\t\t\tinput.setAttribute('name', x);\n\n\t\t\t\t\t// Does it have a value attribute?\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tinput.value = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tinput.value = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tinput.value = data[x];\n\t\t\t\t\t}\n\n\t\t\t\t\tform.appendChild(input);\n\t\t\t\t}\n\n\t\t\t\t// It is an element, which exists within the form, but the name is wrong\n\t\t\t\telse if (el && data[x].name !== x) {\n\t\t\t\t\tdata[x].setAttribute('name', x);\n\t\t\t\t\tdata[x].name = x;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable elements from within the form if they weren't specified\n\t\t\tfor (i = 0; i < form.elements.length; i++) {\n\n\t\t\t\tinput = form.elements[i];\n\n\t\t\t\t// Does the same name and value exist in the parent\n\t\t\t\tif (!(input.name in data) && input.getAttribute('disabled') !== true) {\n\t\t\t\t\t// Disable\n\t\t\t\t\tinput.setAttribute('disabled', true);\n\n\t\t\t\t\t// Add re-enable to callback\n\t\t\t\t\treenableAfterSubmit.push(input);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Set the target of the form\n\t\tform.setAttribute('method', 'POST');\n\t\tform.setAttribute('target', callbackID);\n\t\tform.target = callbackID;\n\n\t\t// Update the form URL\n\t\tform.setAttribute('action', url);\n\n\t\t// Submit the form\n\t\t// Some reason this needs to be offset from the current window execution\n\t\tsetTimeout(function() {\n\t\t\tform.submit();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\ttry {\n\t\t\t\t\t// Remove the iframe from the page.\n\t\t\t\t\t//win.parentNode.removeChild(win);\n\t\t\t\t\t// Remove the form\n\t\t\t\t\tif (newform) {\n\t\t\t\t\t\tnewform.parentNode.removeChild(newform);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.error('HelloJS: could not remove iframe');\n\t\t\t\t\t}\n\t\t\t\t\tcatch (ee) {}\n\t\t\t\t}\n\n\t\t\t\t// Reenable the disabled form\n\t\t\t\tfor (var i = 0; i < reenableAfterSubmit.length; i++) {\n\t\t\t\t\tif (reenableAfterSubmit[i]) {\n\t\t\t\t\t\treenableAfterSubmit[i].setAttribute('disabled', false);\n\t\t\t\t\t\treenableAfterSubmit[i].disabled = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t}, 100);\n\t},\n\n\t// Some of the providers require that only multipart is used with non-binary forms.\n\t// This function checks whether the form contains binary data\n\thasBinary: function(data) {\n\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\t\t\tif (this.isBinary(data[x])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// Determines if a variable Either Is or like a FormInput has the value of a Blob\n\n\tisBinary: function(data) {\n\n\t\treturn data instanceof Object && (\n\t\t\t(this.domInstance('input', data) && data.type === 'file') ||\n\t\t('FileList' in window && data instanceof window.FileList) ||\n\t\t('File' in window && data instanceof window.File) ||\n\t\t('Blob' in window && data instanceof window.Blob));\n\n\t},\n\n\t// Convert Data-URI to Blob string\n\ttoBlob: function(dataURI) {\n\t\tvar reg = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\t\tvar m = dataURI.match(reg);\n\t\tif (!m) {\n\t\t\treturn dataURI;\n\t\t}\n\n\t\tvar binary = atob(dataURI.replace(reg, ''));\n\t\tvar array = [];\n\t\tfor (var i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\n\t\treturn new Blob([new Uint8Array(array)], {type: m[1]});\n\t}\n\n});\n\n// EXTRA: Convert FormElement to JSON for POSTing\n// Wrappers to add additional functionality to existing functions\n(function(hello) {\n\n\t// Copy original function\n\tvar api = hello.api;\n\tvar utils = hello.utils;\n\n\tutils.extend(utils, {\n\n\t\t// DataToJSON\n\t\t// This takes a FormElement|NodeList|InputElement|MixedObjects and convers the data object to JSON.\n\t\tdataToJSON: function(p) {\n\n\t\t\tvar _this = this;\n\t\t\tvar w = window;\n\t\t\tvar data = p.data;\n\n\t\t\t// Is data a form object\n\t\t\tif (_this.domInstance('form', data)) {\n\t\t\t\tdata = _this.nodeListToJSON(data.elements);\n\t\t\t}\n\t\t\telse if ('NodeList' in w && data instanceof NodeList) {\n\t\t\t\tdata = _this.nodeListToJSON(data);\n\t\t\t}\n\t\t\telse if (_this.domInstance('input', data)) {\n\t\t\t\tdata = _this.nodeListToJSON([data]);\n\t\t\t}\n\n\t\t\t// Is data a blob, File, FileList?\n\t\t\tif (('File' in w && data instanceof w.File) ||\n\t\t\t\t('Blob' in w && data instanceof w.Blob) ||\n\t\t\t\t('FileList' in w && data instanceof w.FileList)) {\n\t\t\t\tdata = {file: data};\n\t\t\t}\n\n\t\t\t// Loop through data if it's not form data it must now be a JSON object\n\t\t\tif (!('FormData' in w && data instanceof w.FormData)) {\n\n\t\t\t\tfor (var x in data) if (data.hasOwnProperty(x)) {\n\n\t\t\t\t\tif ('FileList' in w && data[x] instanceof w.FileList) {\n\t\t\t\t\t\tif (data[x].length === 1) {\n\t\t\t\t\t\t\tdata[x] = data[x][0];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) && data[x].type === 'file') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance('input', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('select', data[x]) ||\n\t\t\t\t\t\t_this.domInstance('textArea', data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (_this.domInstance(null, data[x])) {\n\t\t\t\t\t\tdata[x] = data[x].innerHTML || data[x].innerText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.data = data;\n\t\t\treturn data;\n\t\t},\n\n\t\t// NodeListToJSON\n\t\t// Given a list of elements extrapolate their values and return as a json object\n\t\tnodeListToJSON: function(nodelist) {\n\n\t\t\tvar json = {};\n\n\t\t\t// Create a data string\n\t\t\tfor (var i = 0; i < nodelist.length; i++) {\n\n\t\t\t\tvar input = nodelist[i];\n\n\t\t\t\t// If the name of the input is empty or diabled, dont add it.\n\t\t\t\tif (input.disabled || !input.name) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Is this a file, does the browser not support 'files' and 'FormData'?\n\t\t\t\tif (input.type === 'file') {\n\t\t\t\t\tjson[input.name] = input;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjson[input.name] = input.value || input.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn json;\n\t\t}\n\t});\n\n\t// Replace it\n\thello.api = function() {\n\n\t\t// Get arguments\n\t\tvar p = utils.args({path: 's!', method: 's', data: 'o', timeout: 'i', callback: 'f'}, arguments);\n\n\t\t// Change for into a data object\n\t\tif (p.data) {\n\t\t\tutils.dataToJSON(p);\n\t\t}\n\n\t\treturn api.call(this, p);\n\t};\n\n})(hello);\n\n/////////////////////////////////////\n//\n// Save any access token that is in the current page URL\n// Handle any response solicited through iframe hash tag following an API request\n//\n/////////////////////////////////////\n\nhello.utils.responseHandler(window, window.opener || window.parent);\n// Script to support ChromeApps\n// This overides the hello.utils.popup method to support chrome.identity.launchWebAuthFlow\n// See https://developer.chrome.com/apps/app_identity#non\n\n// Is this a chrome app?\n\nif (typeof chrome === 'object' && typeof chrome.identity === 'object' && chrome.identity.launchWebAuthFlow) {\n\n\t(function() {\n\n\t\t// Swap the popup method\n\t\thello.utils.popup = function(url) {\n\n\t\t\treturn _open(url, true);\n\n\t\t};\n\n\t\t// Swap the hidden iframe method\n\t\thello.utils.iframe = function(url) {\n\n\t\t\t_open(url, false);\n\n\t\t};\n\n\t\t// Swap the request_cors method\n\t\thello.utils.request_cors = function(callback) {\n\n\t\t\tcallback();\n\n\t\t\t// Always run as CORS\n\n\t\t\treturn true;\n\t\t};\n\n\t\t// Swap the storage method\n\t\tvar _cache = {};\n\t\tchrome.storage.local.get('hello', function(r) {\n\t\t\t// Update the cache\n\t\t\t_cache = r.hello || {};\n\t\t});\n\n\t\thello.utils.store = function(name, value) {\n\n\t\t\t// Get all\n\t\t\tif (arguments.length === 0) {\n\t\t\t\treturn _cache;\n\t\t\t}\n\n\t\t\t// Get\n\t\t\tif (arguments.length === 1) {\n\t\t\t\treturn _cache[name] || null;\n\t\t\t}\n\n\t\t\t// Set\n\t\t\tif (value) {\n\t\t\t\t_cache[name] = value;\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// Delete\n\t\t\tif (value === null) {\n\t\t\t\tdelete _cache[name];\n\t\t\t\tchrome.storage.local.set({hello: _cache});\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\t// Open function\n\t\tfunction _open(url, interactive) {\n\n\t\t\t// Launch\n\t\t\tvar ref = {\n\t\t\t\tclosed: false\n\t\t\t};\n\n\t\t\t// Launch the webAuthFlow\n\t\t\tchrome.identity.launchWebAuthFlow({\n\t\t\t\turl: url,\n\t\t\t\tinteractive: interactive\n\t\t\t}, function(responseUrl) {\n\n\t\t\t\t// Did the user cancel this prematurely\n\t\t\t\tif (responseUrl === undefined) {\n\t\t\t\t\tref.closed = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Split appart the URL\n\t\t\t\tvar a = hello.utils.url(responseUrl);\n\n\t\t\t\t// The location can be augmented in to a location object like so...\n\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\tvar _popup = {\n\t\t\t\t\tlocation: {\n\n\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\tassign: function(url) {\n\n\t\t\t\t\t\t\t// If there is a secondary reassign\n\t\t\t\t\t\t\t// In the case of OAuth1\n\t\t\t\t\t\t\t// Trigger this in non-interactive mode.\n\t\t\t\t\t\t\t_open(url, false);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\thref: a.href\n\t\t\t\t\t},\n\t\t\t\t\tclose: function() {}\n\t\t\t\t};\n\n\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t// URL string\n\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\thello.utils.responseHandler(_popup, window);\n\t\t\t});\n\n\t\t\t// Return the reference\n\t\t\treturn ref;\n\t\t}\n\n\t})();\n}\n// Phonegap override for hello.phonegap.js\n(function() {\n\n\t// Is this a phonegap implementation?\n\tif (!(/^file:\\/{3}[^\\/]/.test(window.location.href) && window.cordova)) {\n\t\t// Cordova is not included.\n\t\treturn;\n\t}\n\n\t// Augment the hidden iframe method\n\thello.utils.iframe = function(url, redirectUri) {\n\t\thello.utils.popup(url, redirectUri, {hidden: 'yes'});\n\t};\n\n\t// Augment the popup\n\tvar utilPopup = hello.utils.popup;\n\n\t// Replace popup\n\thello.utils.popup = function(url, redirectUri, options) {\n\n\t\t// Run the standard\n\t\tvar popup = utilPopup.call(this, url, redirectUri, options);\n\n\t\t// Create a function for reopening the popup, and assigning events to the new popup object\n\t\t// PhoneGap support\n\t\t// Add an event listener to listen to the change in the popup windows URL\n\t\t// This must appear before popup.focus();\n\t\ttry {\n\t\t\tif (popup && popup.addEventListener) {\n\n\t\t\t\t// Get the origin of the redirect URI\n\n\t\t\t\tvar a = hello.utils.url(redirectUri);\n\t\t\t\tvar redirectUriOrigin = a.origin || (a.protocol + '//' + a.hostname);\n\n\t\t\t\t// Listen to changes in the InAppBrowser window\n\n\t\t\t\tpopup.addEventListener('loadstart', function(e) {\n\n\t\t\t\t\tvar url = e.url;\n\n\t\t\t\t\t// Is this the path, as given by the redirectUri?\n\t\t\t\t\t// Check the new URL agains the redirectUriOrigin.\n\t\t\t\t\t// According to #63 a user could click 'cancel' in some dialog boxes ....\n\t\t\t\t\t// The popup redirects to another page with the same origin, yet we still wish it to close.\n\n\t\t\t\t\tif (url.indexOf(redirectUriOrigin) !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Split appart the URL\n\t\t\t\t\tvar a = hello.utils.url(url);\n\n\t\t\t\t\t// We dont have window operations on the popup so lets create some\n\t\t\t\t\t// The location can be augmented in to a location object like so...\n\n\t\t\t\t\tvar _popup = {\n\t\t\t\t\t\tlocation: {\n\t\t\t\t\t\t\t// Change the location of the popup\n\t\t\t\t\t\t\tassign: function(location) {\n\n\t\t\t\t\t\t\t\t// Unfourtunatly an app is may not change the location of a InAppBrowser window.\n\t\t\t\t\t\t\t\t// So to shim this, just open a new one.\n\t\t\t\t\t\t\t\tpopup.executeScript({code: 'window.location.href = \"' + location + ';\"'});\n\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\tsearch: a.search,\n\t\t\t\t\t\t\thash: a.hash,\n\t\t\t\t\t\t\thref: a.href\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclose: function() {\n\t\t\t\t\t\t\tif (popup.close) {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tpopup.closed = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (_e) {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Then this URL contains information which HelloJS must process\n\t\t\t\t\t// URL string\n\t\t\t\t\t// Window - any action such as window relocation goes here\n\t\t\t\t\t// Opener - the parent window which opened this, aka this script\n\n\t\t\t\t\thello.utils.responseHandler(_popup, window);\n\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\treturn popup;\n\t};\n\n})();\n(function(hello) {\n\n\t// OAuth1\n\tvar OAuth1Settings = {\n\t\tversion: '1.0',\n\t\tauth: 'https://www.dropbox.com/1/oauth/authorize',\n\t\trequest: 'https://api.dropbox.com/1/oauth/request_token',\n\t\ttoken: 'https://api.dropbox.com/1/oauth/access_token'\n\t};\n\n\t// OAuth2 Settings\n\tvar OAuth2Settings = {\n\t\tversion: 2,\n\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t};\n\n\t// Initiate the Dropbox module\n\thello.init({\n\n\t\tdropbox: {\n\n\t\t\tname: 'Dropbox',\n\n\t\t\toauth: OAuth2Settings,\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// OAuth2 non-standard adjustments\n\t\t\t\tp.qs.scope = '';\n\n\t\t\t\t// Should this be run as OAuth1?\n\t\t\t\t// If the redirect_uri is is HTTP (non-secure) then its required to revert to the OAuth1 endpoints\n\t\t\t\tvar redirect = decodeURIComponent(p.qs.redirect_uri);\n\t\t\t\tif (redirect.indexOf('http:') === 0 && redirect.indexOf('http://localhost/') !== 0) {\n\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth1Settings;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Override the dropbox OAuth settings.\n\t\t\t\t\thello.services.dropbox.oauth = OAuth2Settings;\n\t\t\t\t}\n\n\t\t\t\t// The dropbox login window is a different size\n\t\t\t\tp.options.popup.width = 1000;\n\t\t\t\tp.options.popup.height = 1000;\n\t\t\t},\n\n\t\t\t/*\n\t\t\t\tDropbox does not allow insecure HTTP URI's in the redirect_uri field\n\t\t\t\t...otherwise I'd love to use OAuth2\n\n\t\t\t\tFollow request https://forums.dropbox.com/topic.php?id=106505\n\n\t\t\t\tp.qs.response_type = 'code';\n\t\t\t\toauth: {\n\t\t\t\t\tversion: 2,\n\t\t\t\t\tauth: 'https://www.dropbox.com/1/oauth2/authorize',\n\t\t\t\t\tgrant: 'https://api.dropbox.com/1/oauth2/token'\n\t\t\t\t}\n\t\t\t*/\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.dropbox.com/1/',\n\n\t\t\t// Bespoke setting: this is states whether to use the custom environment of Dropbox or to use their own environment\n\t\t\t// Because it's notoriously difficult for Dropbox too provide access from other webservices, this defaults to Sandbox\n\t\t\troot: 'sandbox',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'account/info',\n\n\t\t\t\t// Https://www.dropbox.com/developers/core/docs#metadata\n\t\t\t\t'me/files': req('metadata/auto/@{parent|}'),\n\t\t\t\t'me/folder': req('metadata/auto/@{id}'),\n\t\t\t\t'me/folders': req('metadata/auto/'),\n\n\t\t\t\t'default': function(p, callback) {\n\t\t\t\t\tif (p.path.match('https://api-content.dropbox.com/1/files/')) {\n\t\t\t\t\t\t// This is a file, return binary data\n\t\t\t\t\t\tp.method = 'blob';\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(p.path);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/files': function(p, callback) {\n\n\t\t\t\t\tvar path = p.data.parent;\n\t\t\t\t\tvar fileName = p.data.name;\n\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\tfile: p.data.file\n\t\t\t\t\t};\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('https://api-content.dropbox.com/1/files_put/auto/' + path + '/' + fileName);\n\t\t\t\t},\n\n\t\t\t\t'me/folders': function(p, callback) {\n\n\t\t\t\t\tvar name = p.data.name;\n\t\t\t\t\tp.data = {};\n\n\t\t\t\t\tcallback('fileops/create_folder?root=@{root|sandbox}&' + hello.utils.param({\n\t\t\t\t\t\tpath: name\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'fileops/delete?root=@{root|sandbox}&path=@{id}',\n\t\t\t\t'me/folder': 'fileops/delete?root=@{root|sandbox}&path=@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (!o.uid) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.display_name;\n\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\to.id = o.uid;\n\t\t\t\t\tdelete o.uid;\n\t\t\t\t\tdelete o.display_name;\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o.is_dir && o.contents) {\n\t\t\t\t\t\to.data = o.contents;\n\t\t\t\t\t\tdelete o.contents;\n\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.root = o.root;\n\t\t\t\t\t\t\tformatFile(item, headers, req);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tformatFile(o, headers, req);\n\n\t\t\t\t\tif (o.is_deleted) {\n\t\t\t\t\t\to.success = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Doesn't return the CORS headers\n\t\t\txhr: function(p) {\n\n\t\t\t\t// The proxy supports allow-cross-origin-resource\n\t\t\t\t// Alas that's the only thing we're using.\n\t\t\t\tif (p.data && p.data.file) {\n\t\t\t\t\tvar file = p.data.file;\n\t\t\t\t\tif (file) {\n\t\t\t\t\t\tif (file.files) {\n\t\t\t\t\t\t\tp.data = file.files[0];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tp.data = file;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (p.method === 'delete') {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tform: function(p, qs) {\n\t\t\t\tdelete qs.state;\n\t\t\t\tdelete qs.redirect_uri;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'error' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: 'server_error',\n\t\t\t\tmessage: o.error.message || o.error\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatFile(o, headers, req) {\n\n\t\tif (typeof o !== 'object' ||\n\t\t\t(typeof Blob !== 'undefined' && o instanceof Blob) ||\n\t\t\t(typeof ArrayBuffer !== 'undefined' && o instanceof ArrayBuffer)) {\n\t\t\t// This is a file, let it through unformatted\n\t\t\treturn;\n\t\t}\n\n\t\tif ('error' in o) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar path = (o.root !== 'app_folder' ? o.root : '') + o.path.replace(/\\&/g, '%26');\n\t\tpath = path.replace(/^\\//, '');\n\t\tif (o.thumb_exists) {\n\t\t\to.thumbnail = req.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/thumbnails/auto/' + path + '?format=jpeg&size=m') + '&access_token=' + req.options.access_token;\n\t\t}\n\n\t\to.type = (o.is_dir ? 'folder' : o.mime_type);\n\t\to.name = o.path.replace(/.*\\//g, '');\n\t\tif (o.is_dir) {\n\t\t\to.files = path.replace(/^\\//, '');\n\t\t}\n\t\telse {\n\t\t\to.downloadLink = hello.settings.oauth_proxy + '?path=' +\n\t\t\tencodeURIComponent('https://api-content.dropbox.com/1/files/auto/' + path) + '&access_token=' + req.options.access_token;\n\t\t\to.file = 'https://api-content.dropbox.com/1/files/auto/' + path;\n\t\t}\n\n\t\tif (!o.id) {\n\t\t\to.id = o.path.replace(/^\\//, '');\n\t\t}\n\n\t\t// O.media = 'https://api-content.dropbox.com/1/files/' + path;\n\t}\n\n\tfunction req(str) {\n\t\treturn function(p, cb) {\n\t\t\tdelete p.query.limit;\n\t\t\tcb(str);\n\t\t};\n\t}\n\n})(hello);\n(function(hello) {\n\t// For APIs, once a version is no longer usable, any calls made to it will be defaulted to the next oldest usable version.\n\t// So we explicitly state it.\n\tvar version = 'v2.9';\n\n\thello.init({\n\n\t\tfacebook: {\n\n\t\t\tname: 'Facebook',\n\n\t\t\t// SEE https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://www.facebook.com/' + version + '/dialog/oauth/',\n\t\t\t\tgrant: 'https://graph.facebook.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'public_profile',\n\t\t\t\temail: 'email',\n\t\t\t\tshare: 'user_posts',\n\t\t\t\tbirthday: 'user_birthday',\n\t\t\t\tevents: 'user_events',\n\t\t\t\tphotos: 'user_photos',\n\t\t\t\tvideos: 'user_videos',\n\t\t\t\tfriends: 'user_friends',\n\t\t\t\tfiles: 'user_photos,user_videos',\n\t\t\t\tpublish_files: 'user_photos,user_videos,publish_actions',\n\t\t\t\tpublish: 'publish_actions',\n\n\t\t\t\t// Deprecated in v2.0\n\t\t\t\t// Create_event: 'create_event',\n\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: false,\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.facebook.com/docs/facebook-login/reauthentication\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.auth_type = 'reauthenticate';\n\t\t\t\t}\n\n\t\t\t\t// Set the display value\n\t\t\t\tp.qs.display = p.options.display || 'popup';\n\t\t\t},\n\n\t\t\tlogout: function(callback, options) {\n\t\t\t\t// Assign callback to a global handler\n\t\t\t\tvar callbackID = hello.utils.globalEvent(callback);\n\t\t\t\tvar redirect = encodeURIComponent(hello.settings.redirect_uri + '?' + hello.utils.param({callback: callbackID, result: JSON.stringify({force: true}), state: '{}'}));\n\t\t\t\tvar token = (options.authResponse || {}).access_token;\n\t\t\t\thello.utils.iframe('https://www.facebook.com/logout.php?next=' + redirect + '&access_token=' + token);\n\n\t\t\t\t// Possible responses:\n\t\t\t\t// String URL - hello.logout should handle the logout\n\t\t\t\t// Undefined - this function will handle the callback\n\t\t\t\t// True - throw a success, this callback isn't handling the callback\n\t\t\t\t// False - throw a error\n\t\t\t\tif (!token) {\n\t\t\t\t\t// If there isn't a token, the above wont return a response, so lets trigger a response\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://graph.facebook.com/' + version + '/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'me?fields=email,first_name,last_name,name,timezone,verified',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/friends',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/like': 'me/likes',\n\t\t\t\t'me/files': 'me/albums',\n\t\t\t\t'me/albums': 'me/albums?fields=cover_photo,name',\n\t\t\t\t'me/album': '@{id}/photos?fields=picture',\n\t\t\t\t'me/photos': 'me/photos',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'friend/albums': '@{id}/albums',\n\t\t\t\t'friend/photos': '@{id}/photos'\n\n\t\t\t\t// Pagination\n\t\t\t\t// Https://developers.facebook.com/docs/reference/api/pagination/\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/share': 'me/feed',\n\t\t\t\t'me/photo': '@{id}'\n\n\t\t\t\t// Https://developers.facebook.com/docs/graph-api/reference/v2.2/object/likes/\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/albums': format,\n\t\t\t\t'me/photos': format,\n\t\t\t\t'me/files': format,\n\t\t\t\t'default': format\n\t\t\t},\n\n\t\t\t// Special requirements for handling XHR\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method === 'get' || p.method === 'post') {\n\t\t\t\t\tqs.suppress_response_codes = true;\n\t\t\t\t}\n\n\t\t\t\t// Is this a post with a data-uri?\n\t\t\t\tif (p.method === 'post' && p.data && typeof (p.data.file) === 'string') {\n\t\t\t\t\t// Convert the Data-URI to a Blob\n\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Special requirements for handling JSONP fallback\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tvar m = p.method;\n\t\t\t\tif (m !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = m;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'delete') {\n\t\t\t\t\tqs.method = 'delete';\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Special requirements for iframe form hack\n\t\t\tform: function(p) {\n\t\t\t\treturn {\n\t\t\t\t\t// Fire the callback onload\n\t\t\t\t\tcallbackonload: true\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\n\tvar base = 'https://graph.facebook.com/';\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = 'https://graph.facebook.com/' + o.id + '/picture';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction format(o, headers, req) {\n\t\tif (typeof o === 'boolean') {\n\t\t\to = {success: o};\n\t\t}\n\n\t\tif (o && 'data' in o) {\n\t\t\tvar token = req.query.access_token;\n\n\t\t\tif (!(o.data instanceof Array)) {\n\t\t\t\tvar data = o.data;\n\t\t\t\tdelete o.data;\n\t\t\t\to.data = [data];\n\t\t\t}\n\n\t\t\to.data.forEach(function(d) {\n\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\td.pictures = (d.images || [])\n\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t});\n\n\t\t\t\tif (d.cover_photo && d.cover_photo.id) {\n\t\t\t\t\td.thumbnail = base + d.cover_photo.id + '/picture?access_token=' + token;\n\t\t\t\t}\n\n\t\t\t\tif (d.type === 'album') {\n\t\t\t\t\td.files = d.photos = base + d.id + '/photos';\n\t\t\t\t}\n\n\t\t\t\tif (d.can_upload) {\n\t\t\t\t\td.upload_location = base + d.id + '/photos';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n(function(hello) {\n\n\thello.init({\n\n\t\tflickr: {\n\n\t\t\tname: 'Flickr',\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://www.flickr.com/services/oauth/authorize?perms=read',\n\t\t\t\trequest: 'https://www.flickr.com/services/oauth/request_token',\n\t\t\t\ttoken: 'https://www.flickr.com/services/oauth/access_token'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://api.flickr.com/services/rest',\n\n\t\t\t// Map GET resquests\n\t\t\tget: {\n\t\t\t\tme: sign('flickr.people.getInfo'),\n\t\t\t\t'me/friends': sign('flickr.contacts.getList', {per_page: '@{limit|50}'}),\n\t\t\t\t'me/following': sign('flickr.contacts.getList', {per_page: '@{limit|50}'}),\n\t\t\t\t'me/followers': sign('flickr.contacts.getList', {per_page: '@{limit|50}'}),\n\t\t\t\t'me/albums': sign('flickr.photosets.getList', {per_page: '@{limit|50}'}),\n\t\t\t\t'me/album': sign('flickr.photosets.getPhotos', {photoset_id: '@{id}'}),\n\t\t\t\t'me/photos': sign('flickr.people.getPhotos', {per_page: '@{limit|50}'})\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'person');\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\tif (o.realname) {\n\t\t\t\t\t\t\to.name = o.realname._content;\n\t\t\t\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\t\t\t\to.first_name = m.shift();\n\t\t\t\t\t\t\to.last_name = m.join(' ');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\to.thumbnail = getBuddyIcon(o, 'l');\n\t\t\t\t\t\to.picture = getBuddyIcon(o, 'l');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\to = checkResponse(o, 'photosets');\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.photoset) {\n\t\t\t\t\t\to.data = o.photoset;\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.name = item.title._content;\n\t\t\t\t\t\t\titem.photos = 'https://api.flickr.com/services/rest' + getApiUrl('flickr.photosets.getPhotos', {photoset_id: item.id}, true);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.photoset;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/photos': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\treturn formatPhotos(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: false,\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tif (p.method == 'get') {\n\t\t\t\t\tdelete qs.callback;\n\t\t\t\t\tqs.jsoncallback = p.callbackID;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction getApiUrl(method, extraParams, skipNetwork) {\n\t\tvar url = ((skipNetwork) ? '' : 'flickr:') +\n\t\t\t'?method=' + method +\n\t\t\t'&api_key=' + hello.services.flickr.id +\n\t\t\t'&format=json';\n\t\tfor (var param in extraParams) {\n\t\t\tif (extraParams.hasOwnProperty(param)) {\n\t\t\t\turl += '&' + param + '=' + extraParams[param];\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// This is not exactly neat but avoid to call\n\t// The method 'flickr.test.login' for each api call\n\n\tfunction withUser(cb) {\n\t\tvar auth = hello.getAuthResponse('flickr');\n\t\tcb(auth && auth.user_nsid ? auth.user_nsid : null);\n\t}\n\n\tfunction sign(url, params) {\n\t\tif (!params) {\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn function(p, callback) {\n\t\t\twithUser(function(userId) {\n\t\t\t\tparams.user_id = userId;\n\t\t\t\tcallback(getApiUrl(url, params, true));\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction getBuddyIcon(profile, size) {\n\t\tvar url = 'https://www.flickr.com/images/buddyicon.gif';\n\t\tif (profile.nsid && profile.iconserver && profile.iconfarm) {\n\t\t\turl = 'https://farm' + profile.iconfarm + '.staticflickr.com/' +\n\t\t\t\tprofile.iconserver + '/' +\n\t\t\t\t'buddyicons/' + profile.nsid +\n\t\t\t\t((size) ? '_' + size : '') + '.jpg';\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPhotoUrl(id, farm, server, secret, size) {\n\t\tsize = (size) ? '_' + size : '';\n\t\treturn 'https://farm' + farm + '.staticflickr.com/' + server + '/' + id + '_' + secret + size + '.jpg';\n\t}\n\n\tfunction formatUser(o) {\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o && o.stat && o.stat.toLowerCase() != 'ok') {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatPhotos(o) {\n\t\tif (o.photoset || o.photos) {\n\t\t\tvar set = ('photoset' in o) ? 'photoset' : 'photos';\n\t\t\to = checkResponse(o, set);\n\t\t\tpaging(o);\n\t\t\to.data = o.photo;\n\t\t\tdelete o.photo;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar photo = o.data[i];\n\t\t\t\tphoto.name = photo.title;\n\t\t\t\tphoto.picture = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, '');\n\t\t\t\tphoto.pictures = createPictures(photo.id, photo.farm, photo.server, photo.secret);\n\t\t\t\tphoto.source = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'b');\n\t\t\t\tphoto.thumbnail = createPhotoUrl(photo.id, photo.farm, photo.server, photo.secret, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: https://www.flickr.com/services/api/misc.urls.html\n\tfunction createPictures(id, farm, server, secret) {\n\n\t\tvar NO_LIMIT = 2048;\n\t\tvar sizes = [\n\t\t\t{id: 't', max: 100},\n\t\t\t{id: 'm', max: 240},\n\t\t\t{id: 'n', max: 320},\n\t\t\t{id: '', max: 500},\n\t\t\t{id: 'z', max: 640},\n\t\t\t{id: 'c', max: 800},\n\t\t\t{id: 'b', max: 1024},\n\t\t\t{id: 'h', max: 1600},\n\t\t\t{id: 'k', max: 2048},\n\t\t\t{id: 'o', max: NO_LIMIT}\n\t\t];\n\n\t\treturn sizes.map(function(size) {\n\t\t\treturn {\n\t\t\t\tsource: createPhotoUrl(id, farm, server, secret, size.id),\n\n\t\t\t\t// Note: this is a guess that's almost certain to be wrong (unless square source)\n\t\t\t\twidth: size.max,\n\t\t\t\theight: size.max\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction checkResponse(o, key) {\n\n\t\tif (key in o) {\n\t\t\to = o[key];\n\t\t}\n\t\telse if (!('error' in o)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'invalid_request',\n\t\t\t\tmessage: o.message || 'Failed to get data from Flickr'\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tif (o.contacts) {\n\t\t\to = checkResponse(o, 'contacts');\n\t\t\tpaging(o);\n\t\t\to.data = o.contact;\n\t\t\tdelete o.contact;\n\t\t\tfor (var i = 0; i < o.data.length; i++) {\n\t\t\t\tvar item = o.data[i];\n\t\t\t\titem.id = item.nsid;\n\t\t\t\titem.name = item.realname || item.username;\n\t\t\t\titem.thumbnail = getBuddyIcon(item, 'm');\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res.page && res.pages && res.page !== res.pages) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?page=' + (++res.page)\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n(function(hello) {\n\n\thello.init({\n\n\t\tfoursquare: {\n\n\t\t\tname: 'Foursquare',\n\n\t\t\toauth: {\n\t\t\t\t// See: https://developer.foursquare.com/overview/auth\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://foursquare.com/oauth2/authenticate',\n\t\t\t\tgrant: 'https://foursquare.com/oauth2/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tbase: 'https://api.foursquare.com/v2/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/friends': 'users/self/friends',\n\t\t\t\t'me/followers': 'users/self/friends',\n\t\t\t\t'me/following': 'users/self/friends'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tif (o && o.response) {\n\t\t\t\t\t\to = o.response.user;\n\t\t\t\t\t\tformatUser(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\t// Format friends\n\t\t\t\t\tif (o && 'response' in o && 'friends' in o.response && 'items' in o.response.friends) {\n\t\t\t\t\t\to.data = o.response.friends.items;\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t\tdelete o.response;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o.meta && (o.meta.code === 400 || o.meta.code === 401)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.meta.errorDetail\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o && o.id) {\n\t\t\to.thumbnail = o.photo.prefix + '100x100' + o.photo.suffix;\n\t\t\to.name = o.firstName + ' ' + o.lastName;\n\t\t\to.first_name = o.firstName;\n\t\t\to.last_name = o.lastName;\n\t\t\tif (o.contact) {\n\t\t\t\tif (o.contact.email) {\n\t\t\t\t\to.email = o.contact.email;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs.v = 20121125;\n\t\treturn true;\n\t}\n\n})(hello);\n(function(hello) {\n\n\thello.init({\n\n\t\tgithub: {\n\n\t\t\tname: 'GitHub',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://github.com/login/oauth/authorize',\n\t\t\t\tgrant: 'https://github.com/login/oauth/access_token',\n\t\t\t\tresponse_type: 'code'\n\t\t\t},\n\n\t\t\tscope: {\n\t\t\t\temail: 'user:email'\n\t\t\t},\n\n\t\t\tbase: 'https://api.github.com/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\t'me/friends': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/following': 'user/following?per_page=@{limit|100}',\n\t\t\t\t'me/followers': 'user/followers?per_page=@{limit|100}',\n\t\t\t\t'me/like': 'user/starred?per_page=@{limit|100}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\n\t\t\t\t\tformatError(o, headers);\n\t\t\t\t\tformatUser(o);\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers, req) {\n\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {data: o};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.data) {\n\t\t\t\t\t\tpaging(o, headers, req);\n\t\t\t\t\t\to.data.forEach(formatUser);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method !== 'get' && p.data) {\n\n\t\t\t\t\t// Serialize payload as JSON\n\t\t\t\t\tp.headers = p.headers || {};\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar code = headers ? headers.statusCode : (o && 'meta' in o && 'status' in o.meta && o.meta.status);\n\t\tif ((code === 401 || code === 403)) {\n\t\t\to.error = {\n\t\t\t\tcode: 'access_denied',\n\t\t\t\tmessage: o.message || (o.data ? o.data.message : 'Could not get response')\n\t\t\t};\n\t\t\tdelete o.message;\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.picture = o.avatar_url;\n\t\t\to.name = o.login;\n\t\t}\n\t}\n\n\tfunction paging(res, headers, req) {\n\t\tif (res.data && res.data.length && headers && headers.Link) {\n\t\t\tvar next = headers.Link.match(/<(.*?)>;\\s*rel=\\\"next\\\"/);\n\t\t\tif (next) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: next[1]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n})(hello);\n(function(hello) {\n\n\tvar contactsUrl = 'https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}';\n\n\thello.init({\n\n\t\tgoogle: {\n\n\t\t\tname: 'Google Sign-In',\n\n\t\t\t// See: http://code.google.com/apis/accounts/docs/OAuth2UserAgent.html\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.google.com/o/oauth2/v2/auth',\n\t\t\t\tgrant: 'https://www.googleapis.com/oauth2/v4/token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'openid profile',\n\t\t\t\temail: 'email',\n\t\t\t\tbirthday: '',\n\t\t\t\tevents: '',\n\t\t\t\tphotos: 'https://picasaweb.google.com/data/',\n\t\t\t\tvideos: 'http://gdata.youtube.com',\n\t\t\t\tfiles: 'https://www.googleapis.com/auth/drive.readonly',\n\t\t\t\tpublish: '',\n\t\t\t\tpublish_files: 'https://www.googleapis.com/auth/drive',\n\t\t\t\tshare: '',\n\t\t\t\tcreate_event: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\n\t\t\t\tif (p.qs.response_type === 'code') {\n\n\t\t\t\t\t// Let's set this to an offline access to return a refresh_token\n\t\t\t\t\tp.qs.access_type = 'offline';\n\t\t\t\t}\n\t\t\t\telse if (p.qs.response_type.indexOf('id_token') > -1) {\n\t\t\t\t\tp.qs.nonce = parseInt(Math.random() * 1e12, 10).toString(36);\n\t\t\t\t}\n\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://developers.google.com/identity/protocols/\n\t\t\t\tif (p.options.force) {\n\t\t\t\t\tp.qs.prompt = 'consent';\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// API base URI\n\t\t\tbase: 'https://www.googleapis.com/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: 'oauth2/v3/userinfo?alt=json',\n\n\t\t\t\t// Deprecated Sept 1, 2014\n\t\t\t\t//'me': 'oauth2/v1/userinfo?alt=json',\n\n\t\t\t\t// See: https://developers.google.com/+/api/latest/people/list\n\t\t\t\t'me/following': contactsUrl,\n\t\t\t\t'me/followers': contactsUrl,\n\t\t\t\t'me/contacts': contactsUrl,\n\t\t\t\t'me/albums': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}',\n\t\t\t\t'me/album': function(p, callback) {\n\t\t\t\t\tvar key = p.query.id;\n\t\t\t\t\tdelete p.query.id;\n\t\t\t\t\tcallback(key.replace('/entry/', '/feed/'));\n\t\t\t\t},\n\n\t\t\t\t'me/photos': 'https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/file': 'drive/v2/files/@{id}',\n\t\t\t\t'me/files': 'drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folders': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}',\n\n\t\t\t\t// See: https://developers.google.com/drive/v2/reference/files/list\n\t\t\t\t'me/folder': 'drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\n\t\t\t\t// Google Drive\n\t\t\t\t'me/files': uploadDrive,\n\t\t\t\t'me/folders': function(p, callback) {\n\t\t\t\t\tp.data = {\n\t\t\t\t\t\ttitle: p.data.name,\n\t\t\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\t\t\tmimeType: 'application/vnd.google-apps.folder'\n\t\t\t\t\t};\n\t\t\t\t\tcallback('drive/v2/files');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Map PUT requests\n\t\t\tput: {\n\t\t\t\t'me/files': uploadDrive\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t'me/files': 'drive/v2/files/@{id}',\n\t\t\t\t'me/folder': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\t// Map PATCH requests\n\t\t\tpatch: {\n\t\t\t\t'me/file': 'drive/v2/files/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tif (o.sub) {\n\t\t\t\t\t\to.id = o.sub;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (o.id) {\n\t\t\t\t\t\to.last_name = o.family_name || (o.name ? o.name.familyName : null);\n\t\t\t\t\t\to.first_name = o.given_name || (o.name ? o.name.givenName : null);\n\n\t\t\t\t\t\tif (o.emails && o.emails.length) {\n\t\t\t\t\t\t\to.email = o.emails[0].value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tformatPerson(o);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': function(o) {\n\t\t\t\t\tif (o.items) {\n\t\t\t\t\t\tpaging(o);\n\t\t\t\t\t\to.data = o.items;\n\t\t\t\t\t\to.data.forEach(formatPerson);\n\t\t\t\t\t\tdelete o.items;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/share': formatFeed,\n\t\t\t\t'me/feed': formatFeed,\n\t\t\t\t'me/albums': gEntry,\n\t\t\t\t'me/photos': formatPhotos,\n\t\t\t\t'default': gEntry\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\n\t\t\t\tif (p.method === 'post' || p.method === 'put') {\n\t\t\t\t\ttoJSON(p);\n\t\t\t\t}\n\t\t\t\telse if (p.method === 'patch') {\n\t\t\t\t\thello.utils.extend(p.query, p.data);\n\t\t\t\t\tp.data = null;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// Don't even try submitting via form.\n\t\t\t// This means no POST operations in <=IE9\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction toInt(s) {\n\t\treturn parseInt(s, 10);\n\t}\n\n\tfunction formatFeed(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\t\tdelete o.items;\n\t\treturn o;\n\t}\n\n\t// Format: ensure each record contains a name, id etc.\n\tfunction formatItem(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!o.name) {\n\t\t\to.name = o.title || o.message;\n\t\t}\n\n\t\tif (!o.picture) {\n\t\t\to.picture = o.thumbnailLink;\n\t\t}\n\n\t\tif (!o.thumbnail) {\n\t\t\to.thumbnail = o.thumbnailLink;\n\t\t}\n\n\t\tif (o.mimeType === 'application/vnd.google-apps.folder') {\n\t\t\to.type = 'folder';\n\t\t\to.files = 'https://www.googleapis.com/drive/v2/files?q=%22' + o.id + '%22+in+parents';\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatPhotos(o) {\n\t\tif ('feed' in o) {\n\t\t\to.data = 'entry' in o.feed ? o.feed.entry.map(formatEntry) : [];\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// Google has a horrible JSON API\n\tfunction gEntry(o) {\n\t\tpaging(o);\n\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\to.data = o.feed.entry.map(formatEntry);\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\t// Old style: Picasa, etc.\n\t\telse if ('entry' in o) {\n\t\t\treturn formatEntry(o.entry);\n\t\t}\n\n\t\t// New style: Google Drive\n\t\telse if ('items' in o) {\n\t\t\to.data = o.items.map(formatItem);\n\t\t\tdelete o.items;\n\t\t}\n\t\telse {\n\t\t\tformatItem(o);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatPerson(o) {\n\t\to.name = o.displayName || o.name;\n\t\to.picture = o.picture || (o.image ? o.image.url : null);\n\t\to.thumbnail = o.picture;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tpaging(o);\n\t\tvar r = [];\n\t\tif ('feed' in o && 'entry' in o.feed) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tfor (var i = 0; i < o.feed.entry.length; i++) {\n\t\t\t\tvar a = o.feed.entry[i];\n\n\t\t\t\ta.id = a.id.$t;\n\t\t\t\ta.name = a.title.$t;\n\t\t\t\tdelete a.title;\n\t\t\t\tif (a.gd$email) {\n\t\t\t\t\ta.email = (a.gd$email && a.gd$email.length > 0) ? a.gd$email[0].address : null;\n\t\t\t\t\ta.emails = a.gd$email;\n\t\t\t\t\tdelete a.gd$email;\n\t\t\t\t}\n\n\t\t\t\tif (a.updated) {\n\t\t\t\t\ta.updated = a.updated.$t;\n\t\t\t\t}\n\n\t\t\t\tif (a.link) {\n\n\t\t\t\t\tvar pic = (a.link.length > 0) ? a.link[0].href : null;\n\t\t\t\t\tif (pic && a.link[0].gd$etag) {\n\t\t\t\t\t\tpic += (pic.indexOf('?') > -1 ? '&' : '?') + 'access_token=' + token;\n\t\t\t\t\t\ta.picture = pic;\n\t\t\t\t\t\ta.thumbnail = pic;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete a.link;\n\t\t\t\t}\n\n\t\t\t\tif (a.category) {\n\t\t\t\t\tdelete a.category;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\to.data = o.feed.entry;\n\t\t\tdelete o.feed;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatEntry(a) {\n\n\t\tvar group = a.media$group;\n\t\tvar photo = group.media$content.length ? group.media$content[0] : {};\n\t\tvar mediaContent = group.media$content || [];\n\t\tvar mediaThumbnail = group.media$thumbnail || [];\n\n\t\tvar pictures = mediaContent\n\t\t\t.concat(mediaThumbnail)\n\t\t\t.map(formatImage)\n\t\t\t.sort(function(a, b) {\n\t\t\t\treturn a.width - b.width;\n\t\t\t});\n\n\t\tvar i = 0;\n\t\tvar _a;\n\t\tvar p = {\n\t\t\tid: a.id.$t,\n\t\t\tname: a.title.$t,\n\t\t\tdescription: a.summary.$t,\n\t\t\tupdated_time: a.updated.$t,\n\t\t\tcreated_time: a.published.$t,\n\t\t\tpicture: photo ? photo.url : null,\n\t\t\tpictures: pictures,\n\t\t\timages: [],\n\t\t\tthumbnail: photo ? photo.url : null,\n\t\t\twidth: photo.width,\n\t\t\theight: photo.height\n\t\t};\n\n\t\t// Get feed/children\n\t\tif ('link' in a) {\n\t\t\tfor (i = 0; i < a.link.length; i++) {\n\t\t\t\tvar d = a.link[i];\n\t\t\t\tif (d.rel.match(/\\#feed$/)) {\n\t\t\t\t\tp.upload_location = p.files = p.photos = d.href;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('category' in a && a.category.length) {\n\t\t\t_a = a.category;\n\t\t\tfor (i = 0; i < _a.length; i++) {\n\t\t\t\tif (_a[i].scheme && _a[i].scheme.match(/\\#kind$/)) {\n\t\t\t\t\tp.type = _a[i].term.replace(/^.*?\\#/, '');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get images of different scales\n\t\tif ('media$thumbnail' in group && group.media$thumbnail.length) {\n\t\t\t_a = group.media$thumbnail;\n\t\t\tp.thumbnail = _a[0].url;\n\t\t\tp.images = _a.map(formatImage);\n\t\t}\n\n\t\t_a = group.media$content;\n\n\t\tif (_a && _a.length) {\n\t\t\tp.images.push(formatImage(_a[0]));\n\t\t}\n\n\t\treturn p;\n\t}\n\n\tfunction paging(res) {\n\n\t\t// Contacts V2\n\t\tif ('feed' in res && res.feed.openSearch$itemsPerPage) {\n\t\t\tvar limit = toInt(res.feed.openSearch$itemsPerPage.$t);\n\t\t\tvar start = toInt(res.feed.openSearch$startIndex.$t);\n\t\t\tvar total = toInt(res.feed.openSearch$totalResults.$t);\n\n\t\t\tif ((start + limit) < total) {\n\t\t\t\tres.paging = {\n\t\t\t\t\tnext: '?start=' + (start + limit)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\telse if ('nextPageToken' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?pageToken=' + res.nextPageToken\n\t\t\t};\n\t\t}\n\t}\n\n\t// Construct a multipart message\n\tfunction Multipart() {\n\n\t\t// Internal body\n\t\tvar body = [];\n\t\tvar boundary = (Math.random() * 1e10).toString(32);\n\t\tvar counter = 0;\n\t\tvar lineBreak = '\\r\\n';\n\t\tvar delim = lineBreak + '--' + boundary;\n\t\tvar ready = function() {};\n\n\t\tvar dataUri = /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i;\n\n\t\t// Add file\n\t\tfunction addFile(item) {\n\t\t\tvar fr = new FileReader();\n\t\t\tfr.onload = function(e) {\n\t\t\t\taddContent(btoa(e.target.result), item.type + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t};\n\n\t\t\tfr.readAsBinaryString(item);\n\t\t}\n\n\t\t// Add content\n\t\tfunction addContent(content, type) {\n\t\t\tbody.push(lineBreak + 'Content-Type: ' + type + lineBreak + lineBreak + content);\n\t\t\tcounter--;\n\t\t\tready();\n\t\t}\n\n\t\t// Add new things to the object\n\t\tthis.append = function(content, type) {\n\n\t\t\t// Does the content have an array\n\t\t\tif (typeof (content) === 'string' || !('length' in Object(content))) {\n\t\t\t\t// Converti to multiples\n\t\t\t\tcontent = [content];\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < content.length; i++) {\n\n\t\t\t\tcounter++;\n\n\t\t\t\tvar item = content[i];\n\n\t\t\t\t// Is this a file?\n\t\t\t\t// Files can be either Blobs or File types\n\t\t\t\tif (\n\t\t\t\t\t(typeof (File) !== 'undefined' && item instanceof File) ||\n\t\t\t\t\t(typeof (Blob) !== 'undefined' && item instanceof Blob)\n\t\t\t\t) {\n\t\t\t\t\t// Read the file in\n\t\t\t\t\taddFile(item);\n\t\t\t\t}\n\n\t\t\t\t// Data-URI?\n\t\t\t\t// Data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n\t\t\t\t// /^data\\:([^;,]+(\\;charset=[^;,]+)?)(\\;base64)?,/i\n\t\t\t\telse if (typeof (item) === 'string' && item.match(dataUri)) {\n\t\t\t\t\tvar m = item.match(dataUri);\n\t\t\t\t\taddContent(item.replace(dataUri, ''), m[1] + lineBreak + 'Content-Transfer-Encoding: base64');\n\t\t\t\t}\n\n\t\t\t\t// Regular string\n\t\t\t\telse {\n\t\t\t\t\taddContent(item, type);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.onready = function(fn) {\n\t\t\tready = function() {\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Trigger ready\n\t\t\t\t\tbody.unshift('');\n\t\t\t\t\tbody.push('--');\n\t\t\t\t\tfn(body.join(delim), boundary);\n\t\t\t\t\tbody = [];\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tready();\n\t\t};\n\t}\n\n\t// Upload to Drive\n\t// If this is PUT then only augment the file uploaded\n\t// PUT https://developers.google.com/drive/v2/reference/files/update\n\t// POST https://developers.google.com/drive/manage-uploads\n\tfunction uploadDrive(p, callback) {\n\n\t\tvar data = {};\n\n\t\t// Test for DOM element\n\t\tif (p.data &&\n\t\t\t(typeof (HTMLInputElement) !== 'undefined' && p.data instanceof HTMLInputElement)\n\t\t) {\n\t\t\tp.data = {file: p.data};\n\t\t}\n\n\t\tif (!p.data.name && Object(Object(p.data.file).files).length && p.method === 'post') {\n\t\t\tp.data.name = p.data.file.files[0].name;\n\t\t}\n\n\t\tif (p.method === 'post') {\n\t\t\tp.data = {\n\t\t\t\ttitle: p.data.name,\n\t\t\t\tparents: [{id: p.data.parent || 'root'}],\n\t\t\t\tfile: p.data.file\n\t\t\t};\n\t\t}\n\t\telse {\n\n\t\t\t// Make a reference\n\t\t\tdata = p.data;\n\t\t\tp.data = {};\n\n\t\t\t// Add the parts to change as required\n\t\t\tif (data.parent) {\n\t\t\t\tp.data.parents = [{id: p.data.parent || 'root'}];\n\t\t\t}\n\n\t\t\tif (data.file) {\n\t\t\t\tp.data.file = data.file;\n\t\t\t}\n\n\t\t\tif (data.name) {\n\t\t\t\tp.data.title = data.name;\n\t\t\t}\n\t\t}\n\n\t\t// Extract the file, if it exists from the data object\n\t\t// If the File is an INPUT element lets just concern ourselves with the NodeList\n\t\tvar file;\n\t\tif ('file' in p.data) {\n\t\t\tfile = p.data.file;\n\t\t\tdelete p.data.file;\n\n\t\t\tif (typeof (file) === 'object' && 'files' in file) {\n\t\t\t\t// Assign the NodeList\n\t\t\t\tfile = file.files;\n\t\t\t}\n\n\t\t\tif (!file || !file.length) {\n\t\t\t\tcallback({\n\t\t\t\t\terror: {\n\t\t\t\t\t\tcode: 'request_invalid',\n\t\t\t\t\t\tmessage: 'There were no files attached with this request to upload'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Set type p.data.mimeType = Object(file[0]).type || 'application/octet-stream';\n\n\t\t// Construct a multipart message\n\t\tvar parts = new Multipart();\n\t\tparts.append(JSON.stringify(p.data), 'application/json');\n\n\t\t// Read the file into a  base64 string... yep a hassle, i know\n\t\t// FormData doesn't let us assign our own Multipart headers and HTTP Content-Type\n\t\t// Alas GoogleApi need these in a particular format\n\t\tif (file) {\n\t\t\tparts.append(file);\n\t\t}\n\n\t\tparts.onready(function(body, boundary) {\n\n\t\t\tp.headers['content-type'] = 'multipart/related; boundary=\"' + boundary + '\"';\n\t\t\tp.data = body;\n\n\t\t\tcallback('upload/drive/v2/files' + (data.id ? '/' + data.id : '') + '?uploadType=multipart');\n\t\t});\n\n\t}\n\n\tfunction toJSON(p) {\n\t\tif (typeof (p.data) === 'object') {\n\t\t\t// Convert the POST into a javascript object\n\t\t\ttry {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\tp.headers['content-type'] = 'application/json';\n\t\t\t}\n\t\t\tcatch (e) {}\n\t\t}\n\t}\n\n})(hello);\n(function(hello) {\n\n\thello.init({\n\n\t\tinstagram: {\n\n\t\t\tname: 'Instagram',\n\n\t\t\toauth: {\n\t\t\t\t// See: http://instagram.com/developer/authentication/\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://instagram.com/oauth/authorize/',\n\t\t\t\tgrant: 'https://api.instagram.com/oauth/access_token'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'basic',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'relationships',\n\t\t\t\tpublish: 'likes comments',\n\t\t\t\temail: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.instagram.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'users/self',\n\t\t\t\t'me/feed': 'users/self/feed?count=@{limit|100}',\n\t\t\t\t'me/photos': 'users/self/media/recent?min_id=0&count=@{limit|100}',\n\t\t\t\t'me/friends': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/following': 'users/self/follows?count=@{limit|100}',\n\t\t\t\t'me/followers': 'users/self/followed-by?count=@{limit|100}',\n\t\t\t\t'friend/photos': 'users/@{id}/media/recent?min_id=0&count=@{limit|100}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('media/' + id + '/likes');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'me/like': 'media/@{id}/likes'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\n\t\t\t\t\tformatError(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.id = o.data.id;\n\t\t\t\t\t\to.thumbnail = o.data.profile_picture;\n\t\t\t\t\t\to.name = o.data.full_name || o.data.username;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/photos': function(o) {\n\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\n\t\t\t\t\tif ('data' in o) {\n\t\t\t\t\t\to.data = o.data.filter(function(d) {\n\t\t\t\t\t\t\treturn d.type === 'image';\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\to.data.forEach(function(d) {\n\t\t\t\t\t\t\td.name = d.caption ? d.caption.text : null;\n\t\t\t\t\t\t\td.thumbnail = d.images.thumbnail.url;\n\t\t\t\t\t\t\td.picture = d.images.standard_resolution.url;\n\t\t\t\t\t\t\td.pictures = Object.keys(d.images)\n\t\t\t\t\t\t\t\t.map(function(key) {\n\t\t\t\t\t\t\t\t\tvar image = d.images[key];\n\t\t\t\t\t\t\t\t\treturn formatImage(image);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\to = formatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Instagram does not return any CORS Headers\n\t\t\t// So besides JSONP we're stuck with proxy\n\t\t\txhr: function(p, qs) {\n\n\t\t\t\tvar method = p.method;\n\t\t\t\tvar proxy = method !== 'get';\n\n\t\t\t\tif (proxy) {\n\n\t\t\t\t\tif ((method === 'post' || method === 'put') && p.query.access_token) {\n\t\t\t\t\t\tp.data.access_token = p.query.access_token;\n\t\t\t\t\t\tdelete p.query.access_token;\n\t\t\t\t\t}\n\n\t\t\t\t\t// No access control headers\n\t\t\t\t\t// Use the proxy instead\n\t\t\t\t\tp.proxy = proxy;\n\t\t\t\t}\n\n\t\t\t\treturn proxy;\n\t\t\t},\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\tsource: image.url,\n\t\t\twidth: image.width,\n\t\t\theight: image.height\n\t\t};\n\t}\n\n\tfunction formatError(o) {\n\t\tif (typeof o === 'string') {\n\t\t\treturn {\n\t\t\t\terror: {\n\t\t\t\t\tcode: 'invalid_request',\n\t\t\t\t\tmessage: o\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tpaging(o);\n\t\tif (o && 'data' in o) {\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(o) {\n\t\tif (o.id) {\n\t\t\to.thumbnail = o.profile_picture;\n\t\t\to.name = o.full_name || o.username;\n\t\t}\n\t}\n\n\t// See: http://instagram.com/developer/endpoints/\n\tfunction paging(res) {\n\t\tif ('pagination' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.pagination.next_url\n\t\t\t};\n\t\t\tdelete res.pagination;\n\t\t}\n\t}\n\n})(hello);\n(function(hello) {\n\n\thello.init({\n\n\t\tjoinme: {\n\n\t\t\tname: 'join.me',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://secure.join.me/api/public/v1/auth/oauth2',\n\t\t\t\tgrant: 'https://secure.join.me/api/public/v1/auth/oauth2'\n\t\t\t},\n\n\t\t\trefresh: false,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'user_info',\n\t\t\t\tuser: 'user_info',\n\t\t\t\tscheduler: 'scheduler',\n\t\t\t\tstart: 'start_meeting',\n\t\t\t\temail: '',\n\t\t\t\tfriends: '',\n\t\t\t\tshare: '',\n\t\t\t\tpublish: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\tscope_delim: ' ',\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.options.popup.width = 400;\n\t\t\t\tp.options.popup.height = 700;\n\t\t\t},\n\n\t\t\tbase: 'https://api.join.me/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'user',\n\t\t\t\tmeetings: 'meetings',\n\t\t\t\t'meetings/info': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'meetings/start/adhoc': function(p, callback) {\n\t\t\t\t\tcallback('meetings/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/start/scheduled': function(p, callback) {\n\t\t\t\t\tvar meetingId = p.data.meetingId;\n\t\t\t\t\tp.data = {};\n\t\t\t\t\tcallback('meetings/' + meetingId + '/start');\n\t\t\t\t},\n\n\t\t\t\t'meetings/schedule': function(p, callback) {\n\t\t\t\t\tcallback('meetings');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpatch: {\n\t\t\t\t'meetings/update': function(p, callback) {\n\t\t\t\t\tcallback('meetings/' + p.data.meetingId);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'meetings/delete': 'meetings/@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\tif (!o.email) {\n\t\t\t\t\t\treturn o;\n\t\t\t\t\t}\n\n\t\t\t\t\to.name = o.fullName;\n\t\t\t\t\to.first_name = o.name.split(' ')[0];\n\t\t\t\t\to.last_name = o.name.split(' ')[1];\n\t\t\t\t\to.id = o.email;\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o, headers);\n\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest\n\n\t\t}\n\t});\n\n\tfunction formatError(o, headers) {\n\t\tvar errorCode;\n\t\tvar message;\n\t\tvar details;\n\n\t\tif (o && ('Message' in o)) {\n\t\t\tmessage = o.Message;\n\t\t\tdelete o.Message;\n\n\t\t\tif ('ErrorCode' in o) {\n\t\t\t\terrorCode = o.ErrorCode;\n\t\t\t\tdelete o.ErrorCode;\n\t\t\t}\n\t\t\telse {\n\t\t\t\terrorCode = getErrorCode(headers);\n\t\t\t}\n\n\t\t\to.error = {\n\t\t\t\tcode: errorCode,\n\t\t\t\tmessage: message,\n\t\t\t\tdetails: o\n\t\t\t};\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatRequest(p, qs) {\n\t\t// Move the access token from the request body to the request header\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\t// Format non-get requests to indicate json body\n\t\tif (p.method !== 'get' && p.data) {\n\t\t\tp.headers['Content-Type'] = 'application/json';\n\t\t\tif (typeof (p.data) === 'object') {\n\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t}\n\t\t}\n\n\t\tif (p.method === 'put') {\n\t\t\tp.method = 'patch';\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfunction getErrorCode(headers) {\n\t\tswitch (headers.statusCode) {\n\t\t\tcase 400:\n\t\t\t\treturn 'invalid_request';\n\t\t\tcase 403:\n\t\t\t\treturn 'stale_token';\n\t\t\tcase 401:\n\t\t\t\treturn 'invalid_token';\n\t\t\tcase 500:\n\t\t\t\treturn 'server_error';\n\t\t\tdefault:\n\t\t\t\treturn 'server_error';\n\t\t}\n\t}\n\n}(hello));\n(function(hello) {\n\n\thello.init({\n\n\t\tlinkedin: {\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tresponse_type: 'code',\n\t\t\t\tauth: 'https://www.linkedin.com/uas/oauth2/authorization',\n\t\t\t\tgrant: 'https://www.linkedin.com/uas/oauth2/accessToken'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tscope: {\n\t\t\t\tbasic: 'r_basicprofile',\n\t\t\t\temail: 'r_emailaddress',\n\t\t\t\tfiles: '',\n\t\t\t\tfriends: '',\n\t\t\t\tphotos: '',\n\t\t\t\tpublish: 'w_share',\n\t\t\t\tpublish_files: 'w_share',\n\t\t\t\tshare: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\t\t\tscope_delim: ' ',\n\n\t\t\tbase: 'https://api.linkedin.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)',\n\n\t\t\t\t// See: http://developer.linkedin.com/documents/get-network-updates-and-statistics-api\n\t\t\t\t'me/share': 'people/~/network/updates?count=@{limit|250}'\n\t\t\t},\n\n\t\t\tpost: {\n\n\t\t\t\t// See: https://developer.linkedin.com/documents/api-requests-json\n\t\t\t\t'me/share': function(p, callback) {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tvisibility: {\n\t\t\t\t\t\t\tcode: 'anyone'\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (p.data.id) {\n\n\t\t\t\t\t\tdata.attribution = {\n\t\t\t\t\t\t\tshare: {\n\t\t\t\t\t\t\t\tid: p.data.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tdata.comment = p.data.message;\n\t\t\t\t\t\tif (p.data.picture && p.data.link) {\n\t\t\t\t\t\t\tdata.content = {\n\t\t\t\t\t\t\t\t'submitted-url': p.data.link,\n\t\t\t\t\t\t\t\t'submitted-image-url': p.data.picture\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tp.data = JSON.stringify(data);\n\n\t\t\t\t\tcallback('people/~/shares?format=json');\n\t\t\t\t},\n\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\tdel: {\n\t\t\t\t'me/like': like\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/share': function(o) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tpaging(o);\n\t\t\t\t\tif (o.values) {\n\t\t\t\t\t\to.data = o.values.map(formatUser);\n\t\t\t\t\t\to.data.forEach(function(item) {\n\t\t\t\t\t\t\titem.message = item.headline;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdelete o.values;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o, headers) {\n\t\t\t\t\tformatError(o);\n\t\t\t\t\tempty(o, headers);\n\t\t\t\t\tpaging(o);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tjsonp: function(p, qs) {\n\t\t\t\tformatQuery(qs);\n\t\t\t\tif (p.method === 'get') {\n\t\t\t\t\tqs.format = 'jsonp';\n\t\t\t\t\tqs['error-callback'] = p.callbackID;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: function(p, qs) {\n\t\t\t\tif (p.method !== 'get') {\n\t\t\t\t\tformatQuery(qs);\n\t\t\t\t\tp.headers['Content-Type'] = 'application/json';\n\n\t\t\t\t\t// Note: x-li-format ensures error responses are not returned in XML\n\t\t\t\t\tp.headers['x-li-format'] = 'json';\n\t\t\t\t\tp.proxy = true;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatError(o) {\n\t\tif (o && 'errorCode' in o) {\n\t\t\to.error = {\n\t\t\t\tcode: o.status,\n\t\t\t\tmessage: o.message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.error) {\n\t\t\treturn;\n\t\t}\n\n\t\to.first_name = o.firstName;\n\t\to.last_name = o.lastName;\n\t\to.name = o.formattedName || (o.first_name + ' ' + o.last_name);\n\t\to.thumbnail = o.pictureUrl;\n\t\to.email = o.emailAddress;\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.values) {\n\t\t\to.data = o.values.map(formatUser);\n\t\t\tdelete o.values;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif ('_count' in res && '_start' in res && (res._count + res._start) < res._total) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res._start + res._count) + '&count=' + res._count\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction empty(o, headers) {\n\t\tif (JSON.stringify(o) === '{}' && headers.statusCode === 200) {\n\t\t\to.success = true;\n\t\t}\n\t}\n\n\tfunction formatQuery(qs) {\n\t\t// LinkedIn signs requests with the parameter 'oauth2_access_token'\n\t\t// ... yeah another one who thinks they should be different!\n\t\tif (qs.access_token) {\n\t\t\tqs.oauth2_access_token = qs.access_token;\n\t\t\tdelete qs.access_token;\n\t\t}\n\t}\n\n\tfunction like(p, callback) {\n\t\tp.headers['x-li-format'] = 'json';\n\t\tvar id = p.data.id;\n\t\tp.data = (p.method !== 'delete').toString();\n\t\tp.method = 'put';\n\t\tcallback('people/~/network/updates/key=' + id + '/is-liked');\n\t}\n\n})(hello);\n// See: https://developers.soundcloud.com/docs/api/reference\n(function(hello) {\n\n\thello.init({\n\n\t\tsoundcloud: {\n\t\t\tname: 'SoundCloud',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://soundcloud.com/connect',\n\t\t\t\tgrant: 'https://soundcloud.com/oauth2/token'\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.soundcloud.com/',\n\t\t\tget: {\n\t\t\t\tme: 'me.json',\n\n\t\t\t\t// Http://developers.soundcloud.com/docs/api/reference#me\n\t\t\t\t'me/friends': 'me/followings.json',\n\t\t\t\t'me/followers': 'me/followers.json',\n\t\t\t\t'me/following': 'me/followings.json',\n\n\t\t\t\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\t\t\t\t'default': function(p, callback) {\n\n\t\t\t\t\t// Include '.json at the end of each request'\n\t\t\t\t\tcallback(p.path + '.json');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: function(o) {\n\t\t\t\t\tformatUser(o);\n\t\t\t\t\treturn o;\n\t\t\t\t},\n\n\t\t\t\t'default': function(o) {\n\t\t\t\t\tif (Array.isArray(o)) {\n\t\t\t\t\t\to = {\n\t\t\t\t\t\t\tdata: o.map(formatUser)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tpaging(o);\n\t\t\t\t\treturn o;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: formatRequest\n\t\t}\n\t});\n\n\tfunction formatRequest(p, qs) {\n\t\t// Alter the querystring\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tqs.oauth_token = token;\n\t\tqs['_status_code_map[302]'] = 200;\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.picture = o.avatar_url;\n\t\t\to.thumbnail = o.avatar_url;\n\t\t\to.name = o.username || o.full_name;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\t// See: http://developers.soundcloud.com/docs/api/reference#activities\n\tfunction paging(res) {\n\t\tif ('next_href' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next_href\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n// See: https://developer.spotify.com/web-api/\n(function(hello) {\n\n\thello.init({\n\n\t\tspotify: {\n\t\t\tname: 'Spotify',\n\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://accounts.spotify.com/authorize',\n\t\t\t\tgrant: 'https://accounts.spotify.com/api/token'\n\t\t\t},\n\n\t\t\t// See: https://developer.spotify.com/web-api/using-scopes/\n\t\t\tscope_delim: ' ',\n\t\t\tscope: {\n\t\t\t\tbasic: '',\n\t\t\t\tphotos: '',\n\t\t\t\tfriends: 'user-follow-read',\n\t\t\t\tpublish: 'user-library-read',\n\t\t\t\temail: 'user-read-email',\n\t\t\t\tshare: '',\n\t\t\t\tpublish_files: '',\n\t\t\t\tfiles: '',\n\t\t\t\tvideos: '',\n\t\t\t\toffline_access: ''\n\t\t\t},\n\n\t\t\t// Request path translated\n\t\t\tbase: 'https://api.spotify.com',\n\n\t\t\t// See: https://developer.spotify.com/web-api/endpoint-reference/\n\t\t\tget: {\n\t\t\t\tme: '/v1/me',\n\t\t\t\t'me/following': '/v1/me/following?type=artist', // Only 'artist' is supported\n\n\t\t\t\t// Because tracks, albums and playlist exist on spotify, the tracks are considered\n\t\t\t\t// the resource for the 'me/likes' endpoint\n\t\t\t\t'me/like': '/v1/me/tracks'\n\t\t\t},\n\n\t\t\t// Response handlers\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\t\t\t\t'me/following': formatFollowees,\n\t\t\t\t'me/like': formatTracks\n\t\t\t},\n\n\t\t\txhr: formatRequest,\n\t\t\tjsonp: false\n\t\t}\n\t});\n\n\t// Move the access token from the request body to the request header\n\tfunction formatRequest(p, qs) {\n\t\tvar token = qs.access_token;\n\t\tdelete qs.access_token;\n\t\tp.headers.Authorization = 'Bearer ' + token;\n\n\t\treturn true;\n\t}\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\to.name = o.display_name;\n\t\t\to.thumbnail = o.images.length ? o.images[0].url : null;\n\t\t\to.picture = o.thumbnail;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFollowees(o) {\n\t\tpaging(o);\n\t\tif (o && 'artists' in o) {\n\t\t\to.data = o.artists.items.forEach(formatUser);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatTracks(o) {\n\t\tpaging(o);\n\t\to.data = o.items;\n\n\t\treturn o;\n\t}\n\n\tfunction paging(res) {\n\t\tif (res && 'next' in res) {\n\t\t\tres.paging = {\n\t\t\t\tnext: res.next\n\t\t\t};\n\t\t\tdelete res.next;\n\t\t}\n\t}\n\n})(hello);\n(function(hello) {\n\n\tvar base = 'https://api.twitter.com/';\n\n\thello.init({\n\n\t\ttwitter: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: base + 'oauth/authenticate',\n\t\t\t\trequest: base + 'oauth/request_token',\n\t\t\t\ttoken: base + 'oauth/access_token'\n\t\t\t},\n\n\t\t\tlogin: function(p) {\n\t\t\t\t// Reauthenticate\n\t\t\t\t// https://dev.twitter.com/oauth/reference/get/oauth/authenticate\n\t\t\t\tvar prefix = '?force_login=true';\n\t\t\t\tthis.oauth.auth = this.oauth.auth.replace(prefix, '') + (p.options.force ? prefix : '');\n\t\t\t},\n\n\t\t\tbase: base + '1.1/',\n\n\t\t\tget: {\n\t\t\t\tme: 'account/verify_credentials.json',\n\t\t\t\t'me/friends': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/following': 'friends/list.json?count=@{limit|200}',\n\t\t\t\t'me/followers': 'followers/list.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline\n\t\t\t\t'me/share': 'statuses/user_timeline.json?count=@{limit|200}',\n\n\t\t\t\t// Https://dev.twitter.com/rest/reference/get/favorites/list\n\t\t\t\t'me/like': 'favorites/list.json?count=@{limit|200}'\n\t\t\t},\n\n\t\t\tpost: {\n\t\t\t\t'me/share': function(p, callback) {\n\n\t\t\t\t\tvar data = p.data;\n\t\t\t\t\tp.data = null;\n\n\t\t\t\t\tvar status = [];\n\n\t\t\t\t\t// Change message to status\n\t\t\t\t\tif (data.message) {\n\t\t\t\t\t\tstatus.push(data.message);\n\t\t\t\t\t\tdelete data.message;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If link is given\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tstatus.push(data.link);\n\t\t\t\t\t\tdelete data.link;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.picture) {\n\t\t\t\t\t\tstatus.push(data.picture);\n\t\t\t\t\t\tdelete data.picture;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Compound all the components\n\t\t\t\t\tif (status.length) {\n\t\t\t\t\t\tdata.status = status.join(' ');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet media\n\t\t\t\t\tif (data.file) {\n\t\t\t\t\t\tdata['media[]'] = data.file;\n\t\t\t\t\t\tdelete data.file;\n\t\t\t\t\t\tp.data = data;\n\t\t\t\t\t\tcallback('statuses/update_with_media.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Retweet?\n\t\t\t\t\telse if ('id' in data) {\n\t\t\t\t\t\tcallback('statuses/retweet/' + data.id + '.json');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Tweet\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Assign the post body to the query parameters\n\t\t\t\t\t\thello.utils.extend(p.query, data);\n\t\t\t\t\t\tcallback('statuses/update.json?include_entities=1');\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/create\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/create.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tdel: {\n\n\t\t\t\t// See: https://dev.twitter.com/rest/reference/post/favorites/destroy\n\t\t\t\t'me/like': function(p, callback) {\n\t\t\t\t\tp.method = 'post';\n\t\t\t\t\tvar id = p.data.id;\n\t\t\t\t\tp.data = null;\n\t\t\t\t\tcallback('favorites/destroy.json?id=' + id);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tformatUser(res);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\n\t\t\t\t'me/share': function(res) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\tif (!res.error && 'length' in res) {\n\t\t\t\t\t\treturn {data: res};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\n\t\t\t\t'default': function(res) {\n\t\t\t\t\tres = arrayToDataResponse(res);\n\t\t\t\t\tpaging(res);\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t},\n\t\t\txhr: function(p) {\n\n\t\t\t\t// Rely on the proxy for non-GET requests.\n\t\t\t\treturn (p.method !== 'get');\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatUser(o) {\n\t\tif (o.id) {\n\t\t\tif (o.name) {\n\t\t\t\tvar m = o.name.split(' ');\n\t\t\t\to.first_name = m.shift();\n\t\t\t\to.last_name = m.join(' ');\n\t\t\t}\n\n\t\t\t// See: https://dev.twitter.com/overview/general/user-profile-images-and-banners\n\t\t\to.thumbnail = o.profile_image_url_https || o.profile_image_url;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o) {\n\t\tformatError(o);\n\t\tpaging(o);\n\t\tif (o.users) {\n\t\t\to.data = o.users.map(formatUser);\n\t\t\tdelete o.users;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\t\tif (o.errors) {\n\t\t\tvar e = o.errors[0];\n\t\t\to.error = {\n\t\t\t\tcode: 'request_failed',\n\t\t\t\tmessage: e.message\n\t\t\t};\n\t\t}\n\t}\n\n\t// Take a cursor and add it to the path\n\tfunction paging(res) {\n\t\t// Does the response include a 'next_cursor_string'\n\t\tif ('next_cursor_str' in res) {\n\t\t\t// See: https://dev.twitter.com/docs/misc/cursoring\n\t\t\tres.paging = {\n\t\t\t\tnext: '?cursor=' + res.next_cursor_str\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction arrayToDataResponse(res) {\n\t\treturn Array.isArray(res) ? {data: res} : res;\n\t}\n\n\t/**\n\t// The documentation says to define user in the request\n\t// Although its not actually required.\n\n\tvar user_id;\n\n\tfunction withUserId(callback){\n\t\tif(user_id){\n\t\t\tcallback(user_id);\n\t\t}\n\t\telse{\n\t\t\thello.api('twitter:/me', function(o){\n\t\t\t\tuser_id = o.id;\n\t\t\t\tcallback(o.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction sign(url){\n\t\treturn function(p, callback){\n\t\t\twithUserId(function(user_id){\n\t\t\t\tcallback(url+'?user_id='+user_id);\n\t\t\t});\n\t\t};\n\t}\n\t*/\n\n})(hello);\n// Vkontakte (vk.com)\n(function(hello) {\n\n\thello.init({\n\n\t\tvk: {\n\t\t\tname: 'Vk',\n\n\t\t\t// See https://vk.com/dev/oauth_dialog\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://oauth.vk.com/authorize',\n\t\t\t\tgrant: 'https://oauth.vk.com/access_token'\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\t// See https://vk.com/dev/permissions\n\t\t\tscope: {\n\t\t\t\temail: 'email',\n\t\t\t\tfriends: 'friends',\n\t\t\t\tphotos: 'photos',\n\t\t\t\tvideos: 'video',\n\t\t\t\tshare: 'share',\n\t\t\t\toffline_access: 'offline'\n\t\t\t},\n\n\t\t\t// Refresh the access_token\n\t\t\trefresh: true,\n\n\t\t\tlogin: function(p) {\n\t\t\t\tp.qs.display = window.navigator &&\n\t\t\t\t\twindow.navigator.userAgent &&\n\t\t\t\t\t/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase()) ? 'mobile' : 'popup';\n\t\t\t},\n\n\t\t\t// API Base URL\n\t\t\tbase: 'https://api.vk.com/method/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\t\t\t\tme: function(p, callback) {\n\t\t\t\t\tp.query.fields = 'id,first_name,last_name,photo_max';\n\t\t\t\t\tcallback('users.get');\n\t\t\t\t}\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: function(res, headers, req) {\n\t\t\t\t\tformatError(res);\n\t\t\t\t\treturn formatUser(res, req);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// No XHR\n\t\t\txhr: false,\n\n\t\t\t// All requests should be JSONP as of missing CORS headers in https://api.vk.com/method/*\n\t\t\tjsonp: true,\n\n\t\t\t// No form\n\t\t\tform: false\n\t\t}\n\t});\n\n\tfunction formatUser(o, req) {\n\n\t\tif (o !== null && 'response' in o && o.response !== null && o.response.length) {\n\t\t\to = o.response[0];\n\t\t\to.id = o.uid;\n\t\t\to.thumbnail = o.picture = o.photo_max;\n\t\t\to.name = o.first_name + ' ' + o.last_name;\n\n\t\t\tif (req.authResponse && req.authResponse.email !== null)\n\t\t\t\to.email = req.authResponse.email;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatError(o) {\n\n\t\tif (o.error) {\n\t\t\tvar e = o.error;\n\t\t\to.error = {\n\t\t\t\tcode: e.error_code,\n\t\t\t\tmessage: e.error_msg\n\t\t\t};\n\t\t}\n\t}\n\n})(hello);\n(function(hello) {\n\n\thello.init({\n\t\twindows: {\n\t\t\tname: 'Windows live',\n\n\t\t\t// REF: http://msdn.microsoft.com/en-us/library/hh243641.aspx\n\t\t\toauth: {\n\t\t\t\tversion: 2,\n\t\t\t\tauth: 'https://login.live.com/oauth20_authorize.srf',\n\t\t\t\tgrant: 'https://login.live.com/oauth20_token.srf'\n\t\t\t},\n\n\t\t\t// Refresh the access_token once expired\n\t\t\trefresh: true,\n\n\t\t\tlogout: function() {\n\t\t\t\treturn 'http://login.live.com/oauth20_logout.srf?ts=' + (new Date()).getTime();\n\t\t\t},\n\n\t\t\t// Authorization scopes\n\t\t\tscope: {\n\t\t\t\tbasic: 'wl.signin,wl.basic',\n\t\t\t\temail: 'wl.emails',\n\t\t\t\tbirthday: 'wl.birthday',\n\t\t\t\tevents: 'wl.calendars',\n\t\t\t\tphotos: 'wl.photos',\n\t\t\t\tvideos: 'wl.photos',\n\t\t\t\tfriends: 'wl.contacts_emails',\n\t\t\t\tfiles: 'wl.skydrive',\n\t\t\t\tpublish: 'wl.share',\n\t\t\t\tpublish_files: 'wl.skydrive_update',\n\t\t\t\tshare: 'wl.share',\n\t\t\t\tcreate_event: 'wl.calendars_update,wl.events_create',\n\t\t\t\toffline_access: 'wl.offline_access'\n\t\t\t},\n\n\t\t\t// API base URL\n\t\t\tbase: 'https://apis.live.net/v5.0/',\n\n\t\t\t// Map GET requests\n\t\t\tget: {\n\n\t\t\t\t// Friends\n\t\t\t\tme: 'me',\n\t\t\t\t'me/friends': 'me/friends',\n\t\t\t\t'me/following': 'me/contacts',\n\t\t\t\t'me/followers': 'me/friends',\n\t\t\t\t'me/contacts': 'me/contacts',\n\n\t\t\t\t'me/albums': 'me/albums',\n\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}/files',\n\t\t\t\t'me/photo': '@{id}',\n\n\t\t\t\t// Files\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files',\n\t\t\t\t'me/folders': '@{id|me/skydrive}/files',\n\t\t\t\t'me/folder': '@{id|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map POST requests\n\t\t\tpost: {\n\t\t\t\t'me/albums': 'me/albums',\n\t\t\t\t'me/album': '@{id}/files/',\n\n\t\t\t\t'me/folders': '@{id|me/skydrive/}',\n\t\t\t\t'me/files': '@{parent|me/skydrive}/files'\n\t\t\t},\n\n\t\t\t// Map DELETE requests\n\t\t\tdel: {\n\t\t\t\t// Include the data[id] in the path\n\t\t\t\t'me/album': '@{id}',\n\t\t\t\t'me/photo': '@{id}',\n\t\t\t\t'me/folder': '@{id}',\n\t\t\t\t'me/files': '@{id}'\n\t\t\t},\n\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/contacts': formatFriends,\n\t\t\t\t'me/followers': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'me/albums': formatAlbums,\n\t\t\t\t'me/photos': formatDefault,\n\t\t\t\t'default': formatDefault\n\t\t\t},\n\n\t\t\txhr: function(p) {\n\t\t\t\tif (p.method !== 'get' && p.method !== 'delete' && !hello.utils.hasBinary(p.data)) {\n\n\t\t\t\t\t// Does this have a data-uri to upload as a file?\n\t\t\t\t\tif (typeof (p.data.file) === 'string') {\n\t\t\t\t\t\tp.data.file = hello.utils.toBlob(p.data.file);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.data = JSON.stringify(p.data);\n\t\t\t\t\t\tp.headers = {\n\t\t\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tjsonp: function(p) {\n\t\t\t\tif (p.method !== 'get' && !hello.utils.hasBinary(p.data)) {\n\t\t\t\t\tp.data.method = p.method;\n\t\t\t\t\tp.method = 'get';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction formatDefault(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tif (d.picture) {\n\t\t\t\t\td.thumbnail = d.picture;\n\t\t\t\t}\n\n\t\t\t\tif (d.images) {\n\t\t\t\t\td.pictures = d.images\n\t\t\t\t\t\t.map(formatImage)\n\t\t\t\t\t\t.sort(function(a, b) {\n\t\t\t\t\t\t\treturn a.width - b.width;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatImage(image) {\n\t\treturn {\n\t\t\twidth: image.width,\n\t\t\theight: image.height,\n\t\t\tsource: image.source\n\t\t};\n\t}\n\n\tfunction formatAlbums(o) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\td.photos = d.files = 'https://apis.live.net/v5.0/' + d.id + '/photos';\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatUser(o, headers, req) {\n\t\tif (o.id) {\n\t\t\tvar token = req.query.access_token;\n\t\t\tif (o.emails) {\n\t\t\t\to.email = o.emails.preferred;\n\t\t\t}\n\n\t\t\t// If this is not an non-network friend\n\t\t\tif (o.is_friend !== false) {\n\t\t\t\t// Use the id of the user_id if available\n\t\t\t\tvar id = (o.user_id || o.id);\n\t\t\t\to.thumbnail = o.picture = 'https://apis.live.net/v5.0/' + id + '/picture?access_token=' + token;\n\t\t\t}\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, req) {\n\t\tif ('data' in o) {\n\t\t\to.data.forEach(function(d) {\n\t\t\t\tformatUser(d, headers, req);\n\t\t\t});\n\t\t}\n\n\t\treturn o;\n\t}\n\n})(hello);\n(function(hello) {\n\n\thello.init({\n\n\t\tyahoo: {\n\n\t\t\t// Ensure that you define an oauth_proxy\n\t\t\toauth: {\n\t\t\t\tversion: '1.0a',\n\t\t\t\tauth: 'https://api.login.yahoo.com/oauth/v2/request_auth',\n\t\t\t\trequest: 'https://api.login.yahoo.com/oauth/v2/get_request_token',\n\t\t\t\ttoken: 'https://api.login.yahoo.com/oauth/v2/get_token',\n\t\t\t\t// Yahoo requires the state param to be base 64 encoded, hence the flag base64_state is set to true for Yahoo.\n\t\t\t\t// Else uri encoding is used for all the other providers.\n\t\t\t\tbase64_state: true\n\t\t\t},\n\n\t\t\t// Login handler\n\t\t\tlogin: function(p) {\n\t\t\t\t// Change the default popup window to be at least 560\n\t\t\t\t// Yahoo does dynamically change it on the fly for the signin screen (only, what if your already signed in)\n\t\t\t\tp.options.popup.width = 560;\n\n\t\t\t\t// Yahoo throws an parameter error if for whatever reason the state.scope contains a comma, so lets remove scope\n\t\t\t\ttry {delete p.qs.state.scope;}\n\t\t\t\tcatch (e) {}\n\t\t\t},\n\n\t\t\tbase: 'https://social.yahooapis.com/v1/',\n\n\t\t\tget: {\n\t\t\t\tme: yql('select * from social.profile(0) where guid=me'),\n\t\t\t\t'me/friends': yql('select * from social.contacts(0) where guid=me'),\n\t\t\t\t'me/following': yql('select * from social.contacts(0) where guid=me')\n\t\t\t},\n\t\t\twrap: {\n\t\t\t\tme: formatUser,\n\n\t\t\t\t// Can't get IDs\n\t\t\t\t// It might be better to loop through the social.relationship table with has unique IDs of users.\n\t\t\t\t'me/friends': formatFriends,\n\t\t\t\t'me/following': formatFriends,\n\t\t\t\t'default': paging\n\t\t\t}\n\t\t}\n\t});\n\n\t/*\n\t\t// Auto-refresh fix: bug in Yahoo can't get this to work with node-oauth-shim\n\t\tlogin : function(o){\n\t\t\t// Is the user already logged in\n\t\t\tvar auth = hello('yahoo').getAuthResponse();\n\n\t\t\t// Is this a refresh token?\n\t\t\tif(o.options.display==='none'&&auth&&auth.access_token&&auth.refresh_token){\n\t\t\t\t// Add the old token and the refresh token, including path to the query\n\t\t\t\t// See http://developer.yahoo.com/oauth/guide/oauth-refreshaccesstoken.html\n\t\t\t\to.qs.access_token = auth.access_token;\n\t\t\t\to.qs.refresh_token = auth.refresh_token;\n\t\t\t\to.qs.token_url = 'https://api.login.yahoo.com/oauth/v2/get_token';\n\t\t\t}\n\t\t},\n\t*/\n\n\tfunction formatError(o) {\n\t\tif (o && 'meta' in o && 'error_type' in o.meta) {\n\t\t\to.error = {\n\t\t\t\tcode: o.meta.error_type,\n\t\t\t\tmessage: o.meta.error_message\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction formatUser(o) {\n\n\t\tformatError(o);\n\t\tif (o.query && o.query.results && o.query.results.profile) {\n\t\t\to = o.query.results.profile;\n\t\t\to.id = o.guid;\n\t\t\to.last_name = o.familyName;\n\t\t\to.first_name = o.givenName || o.nickname;\n\t\t\tvar a = [];\n\t\t\tif (o.first_name) {\n\t\t\t\ta.push(o.first_name);\n\t\t\t}\n\n\t\t\tif (o.last_name) {\n\t\t\t\ta.push(o.last_name);\n\t\t\t}\n\n\t\t\to.name = a.join(' ');\n\t\t\to.email = (o.emails && o.emails[0]) ? o.emails[0].handle : null;\n\t\t\to.thumbnail = o.image ? o.image.imageUrl : null;\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriends(o, headers, request) {\n\t\tformatError(o);\n\t\tpaging(o, headers, request);\n\t\tvar contact;\n\t\tvar field;\n\t\tif (o.query && o.query.results && o.query.results.contact) {\n\t\t\to.data = o.query.results.contact;\n\t\t\tdelete o.query;\n\n\t\t\tif (!Array.isArray(o.data)) {\n\t\t\t\to.data = [o.data];\n\t\t\t}\n\n\t\t\to.data.forEach(formatFriend);\n\t\t}\n\n\t\treturn o;\n\t}\n\n\tfunction formatFriend(contact) {\n\t\tcontact.id = null;\n\n\t\t// #362: Reports of responses returning a single item, rather than an Array of items.\n\t\t// Format the contact.fields to be an array.\n\t\tif (contact.fields && !(contact.fields instanceof Array)) {\n\t\t\tcontact.fields = [contact.fields];\n\t\t}\n\n\t\t(contact.fields || []).forEach(function(field) {\n\t\t\tif (field.type === 'email') {\n\t\t\t\tcontact.email = field.value;\n\t\t\t}\n\n\t\t\tif (field.type === 'name') {\n\t\t\t\tcontact.first_name = field.value.givenName;\n\t\t\t\tcontact.last_name = field.value.familyName;\n\t\t\t\tcontact.name = field.value.givenName + ' ' + field.value.familyName;\n\t\t\t}\n\n\t\t\tif (field.type === 'yahooid') {\n\t\t\t\tcontact.id = field.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction paging(res, headers, request) {\n\n\t\t// See: http://developer.yahoo.com/yql/guide/paging.html#local_limits\n\t\tif (res.query && res.query.count && request.options) {\n\t\t\tres.paging = {\n\t\t\t\tnext: '?start=' + (res.query.count + (+request.options.start || 1))\n\t\t\t};\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tfunction yql(q) {\n\t\treturn 'https://query.yahooapis.com/v1/yql?q=' + (q + ' limit @{limit|100} offset @{start|0}').replace(/\\s/g, '%20') + '&format=json';\n\t}\n\n})(hello);\n// Register as anonymous AMD module\nif (typeof define === 'function' && define.amd) {\n\tdefine(function() {\n\t\treturn hello;\n\t});\n}\n// CommonJS module for browserify\nif (typeof module === 'object' && module.exports) {\n\tmodule.exports = hello;\n}\n", "export default require(\"./node_modules/hellojs/dist/hello.all.js\");"],
  "mappings": "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",
  "names": ["i", "window", "e", "url", "parent", "hello", "m", "p", "callback", "headers", "r", "a", "req"]
}
